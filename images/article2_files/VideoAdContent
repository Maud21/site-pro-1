invibes.cb_bey6bfcq({"Data":{"videoAdContentResult":{"Ads":[],"Log":"","PageId":102882802,"PublisherUrlId":17565,"BlockingScript":"var divAMPIntegration = document.getElementById('divIvbsInfeed');\r\nif (!divAMPIntegration) { \r\n\r\n  //blacklist page if keywords within URL -->\r\n  var blacklistURLkeywords = [\"experts-ouest-france\"];\r\n  blacklistURLkeywords.push(\"le-havre-500-ans\");\r\n  blacklistURLkeywords.push(\"mayenne-innove\");\r\n  blacklistURLkeywords.push(\"sante-en-pays-de-la-loir\");\r\n  blacklistURLkeywords.push(\"faits-divers\");\r\n  blacklistURLkeywords.push(\"francois-regis-hutin\");\r\n  blacklistURLkeywords.push(\"necrologie\");\r\n  blacklistURLkeywords.push(\"/reflexion/\");\r\n  blacklistURLkeywords.push(\"parole-d-expert\");\r\n  // <--\r\n  \r\n  //blacklist page if element exists -->\r\n  var elementsBlacklisted = [\"footer [href*='faits-divers']\"];\r\n  elementsBlacklisted.push(\"footer [href*='ouest-france-communication']\");\r\n  elementsBlacklisted.push(\"body.detail-article.scrolling-down.communication.detail-article.scrolling-down.responsive\");\r\n  elementsBlacklisted.push(\"footer [href*='necrologie']\");\r\n  // <--\r\n  \r\n  //send no position + block ad when page url contains a keyword blacklisted -->\r\n  for (var i = 0; i < blacklistURLkeywords.length; i++) {\r\n      if (document.location.href.indexOf(blacklistURLkeywords[i]) > -1) {\r\n        \tinvibes.sendStatwebStats(-47, \"noPosition\");\r\n        \tinvibes.adBlocked = 1;\r\n          break;\r\n      }\r\n  }\r\n  // <--\r\n  \r\n  //send no position + block ad when page contains element -->\r\n  for (var i = 0; i < elementsBlacklisted.length; i++) {\r\n      if (document.querySelector(elementsBlacklisted)) {\r\n        \tinvibes.sendStatwebStats(-47, \"noPosition\");\r\n        \tinvibes.adBlocked = 1;\t\r\n          break;\r\n      }\r\n  }\r\n  // <--\r\n  \r\n  //position logic\r\n  var divTop = document.getElementById('divVideoStepAdTop') || document.getElementById('divVideoStepAdBottom');\r\n  \r\n  if (typeof refonteOf !== 'undefined') {\r\n      var divContent = document.querySelectorAll('.contenu-principal > p:not(:empty):not(.description):not(.chapeau)');\r\n      if (divContent.length <= 3) {\r\n\t      invibes.sendStatwebStats(-47, \"noPosition\");\r\n\t      invibes.adBlocked = 1;\t\r\n      } else if (divContent.length > 3 && divContent.length <= 7) {\r\n          var lastP = divContent[divContent.length - 2];\r\n          if (lastP) {\r\n              lastP.appendChild(divTop);\r\n              divTop.parentElement.style.display = \"inline-block\";\r\n          }\r\n      } else if (divContent.length >= 8) {\r\n          var lastP = divContent[7];\r\n          if (lastP) {\r\n              lastP.parentElement.insertBefore(divTop, lastP);\r\n          }\r\n      }\r\n  } else if (document.querySelector('.tag-scribble-live')) {\r\n      var divContent = document.querySelectorAll('.sl_feed > div.sl_post');\r\n      if (divContent.length > 0) {\r\n          var lastP = divContent[3];\r\n          if (lastP) {\r\n              lastP.appendChild(divTop);\r\n              divTop.style.marginTop = \"50px\";\r\n          }\r\n      }\r\n  } else if (document.querySelectorAll('#article-content>p:not(:empty):not(.description):not(.chapeau)')) {\r\n      var divContent = document.querySelectorAll('#article-content>p:not(:empty):not(.description):not(.chapeau)');\r\n      if (divContent.length === 0) {\r\n          var divOtherContent = document.querySelectorAll('.inside >p:not(:empty):not(.description):not(.chapeau)');\r\n          if (divOtherContent.length > 0 && divOtherContent.length <= 7) {\r\n              var lastP = divOtherContent[divOtherContent.length - 1];\r\n              if (lastP) {\r\n                  lastP.parentElement.insertBefore(divTop, lastP);\r\n              }\r\n          } else if (divOtherContent.length >= 8) {\r\n              var lastP = divOtherContent[7];\r\n              if (lastP) {\r\n                  lastP.parentElement.insertBefore(divTop, lastP);\r\n              }\r\n          }\r\n      } else {\r\n          if (divContent.length <= 3) {\r\n\t            invibes.sendStatwebStats(-47, \"noPosition\");\r\n\t            invibes.adBlocked = 1;\r\n          } else if (divContent.length > 3 && divContent.length <= 7) {\r\n              var lastP = divContent[divContent.length - 1];\r\n              if (lastP) {\r\n                  lastP.parentElement.insertBefore(divTop, lastP);\r\n              }\r\n          } else if (divContent.length >= 8) {\r\n              var lastP = divContent[7];\r\n              if (lastP) {\r\n                  lastP.parentElement.insertBefore(divTop, lastP);\r\n              }\r\n          }\r\n      }\r\n  } else {\r\n\t  invibes.sendStatwebStats(-47, \"noPosition\");\r\n\t  invibes.adBlocked = 1;\t\r\n  }\r\n  // <--\r\n  \r\n  // styling -->\r\n  invibes.addEventListener('adRendered', function() {\r\n      var ivMoreBtn = document.querySelector('.moreBtn img');\r\n      if (ivMoreBtn) {\r\n          ivMoreBtn.style.margin = \"0\";\r\n      }\r\n  });\r\n  \r\n  invibes.addEventListener('beforeEngagement', function() {\r\n      var ivRemoveHeight = document.querySelector(\"#ivPopup #fermer-btn img\");\r\n      if (ivRemoveHeight) {\r\n          ivRemoveHeight.style.setProperty(\"height\", \"10px\", \"important\");\r\n      }\r\n  });\r\n  \r\n  var styleIvbs = document.createElement('style');\r\n  styleIvbs.textContent =\r\n      '.ivVisiInTransition { z-index: 1999; position: relative; }' +\r\n      '.ivVisiActive { z-index: 1999; position: relative; }' +\r\n      '#ivPopup #fermer-btn img{width:auto;}' +\r\n      '.ivDescription {margin-top:0!important;}';\r\n  document.head.appendChild(styleIvbs);\r\n  \r\n  invibes.headerHeight = 45;\r\n  invibes.Sticky.noBottom = true;\r\n  \r\n  var bannerFixedTopOF = document.querySelector('.barre-infos');\r\n  if (bannerFixedTopOF) {\r\n      bannerFixedTopOF.style.zIndex = '999';\r\n  }\r\n\r\n} ","FallbackScript":"var ivSendStat = function() {\r\n    var url = \"//s.videostep.com/StatV1?location=\" + window.location.href.substring(0, 300).split(/[?#]/)[0];\r\n    if (document.referrer) {\r\n        url += \"&referrer=\" + document.referrer.substring(0, 300).split(/[?#]/)[0];\r\n    }\r\n    url += \"&actionType=-43\";\r\n    url += \"&callback=\";\r\n    var script = document.createElement(\"script\");\r\n    script.src = url;\r\n    document.head.appendChild(script);\r\n};\r\nvar findTeadsInRead = function() {\r\n    var divTeads = document.getElementsByClassName('teads-inread');\r\n    var filtered = [];\r\n    for (var i = 0; i < divTeads.length; i++) {\r\n        if (divTeads[i].offsetHeight > 0) {\r\n            filtered.push(divTeads[i]);\r\n        }\r\n    }\r\n    return filtered;\r\n};\r\nvar insertTeadsFallback = function() {\r\n    var container = document.getElementById('divVideoStepAdTop') || document.getElementById('divVideoStepAdBottom');\r\n    if (container) {\r\n        (function() {\r\n            var sc = document.createElement(\"script\");\r\n            sc.setAttribute('class', 'teads');\r\n            sc.src = '//a.teads.tv/page/87483/tag';\r\n            sc.type = 'text/javascript';\r\n            sc.async = true;\r\n            container.appendChild(sc);\r\n        }());\r\n    }\r\n};\r\nvar checkTeadsTimer = function() {\r\n    var teadsInread = findTeadsInRead();\r\n    if (teadsInread.length < 2) {\r\n        setTimeout(checkTeadsTimer, 500);\r\n    } else {\r\n        /* remove other divs  */\r\n        for (var i = 1; i < teadsInread.length; i++) {\r\n            teadsInread[i].parentNode.removeChild(teadsInread[i]);\r\n        }\r\n        ivSendStat();\r\n    }\r\n};\r\nvar currentTeads = findTeadsInRead();\r\n\r\nif (currentTeads.length == 0 && document.location.href.indexOf(\"faits-divers\") < 0 && document.location.href.indexOf(\"necrologie\") < 0 && document.location.href.indexOf('/leditiondusoir/') < 0 && !document.querySelector('footer [href*=\"faits-divers\"]') && !document.querySelector('footer [href*=\"ouest-france-communication\"]')) {\r\n    insertTeadsFallback();\r\n    checkTeadsTimer();\r\n} else {\r\n    ivSendStat();\r\n}","CmpSettings":{"AutoOI":false,"Reason":"CmpDisabled"},"LocalizedAdvertiserTitle":"PUBLICITÃ‰","AskGeoInfo":false,"LanguageCode":"fr","Zone":"fr","UserDeviceType":1,"BrokerApis":[],"SendAdRequest":false,"VideoAdDisplayOption":"AlwaysShowForAll"}},"JsonRequestBehavior":0});