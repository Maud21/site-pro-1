(function(){!function(){if(!window.bp_algolia){var e,t,n,r,a,s;window.AlgoliaAnalyticsObject="aa",window.aa=window.aa||function(){(window.aa.queue=window.aa.queue||[]).push(arguments)},function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).algoliasearch=e()}}(function(){return function a(s,o,c){function u(n,e){if(!o[n]){if(!s[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(l)return l(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=o[n]={exports:{}};s[n][0].call(i.exports,function(e){var t=s[n][1][e];return u(t||e)},i,i.exports,a,s,o,c)}return o[n].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(n,r,a){(function(t){function e(){var e;try{e=a.storage.debug}catch(e){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(a=r.exports=n(2)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},a.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+a.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,n)}},a.save=function(e){try{null==e?a.storage.removeItem("debug"):a.storage.debug=e}catch(e){}},a.load=e,a.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},a.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),a.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],a.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},a.enable(e())}).call(this,n(11))},{11:11,2:2}],2:[function(e,t,o){function n(e){function r(){if(r.enabled){var i=r,e=+new Date,t=e-(c||e);i.diff=t,i.prev=c,i.curr=e,c=e;for(var a=new Array(arguments.length),n=0;n<a.length;n++)a[n]=arguments[n];a[0]=o.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var s=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;s++;var n=o.formatters[t];if("function"==typeof n){var r=a[s];e=n.call(i,r),a.splice(s,1),s--}return e}),o.formatArgs.call(i,a),(r.log||o.log||console.log.bind(console)).apply(i,a)}}return r.namespace=e,r.enabled=o.enabled(e),r.useColors=o.useColors(),r.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return o.colors[Math.abs(n)%o.colors.length]}(e),"function"==typeof o.init&&o.init(r),r}var c;(o=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},o.disable=function(){o.enable("")},o.enable=function(e){o.save(e),o.names=[],o.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,r=0;r<n;r++)t[r]&&("-"===(e=t[r].replace(/\*/g,".*?"))[0]?o.skips.push(new RegExp("^"+e.substr(1)+"$")):o.names.push(new RegExp("^"+e+"$")))},o.enabled=function(e){var t,n;for(t=0,n=o.skips.length;t<n;t++)if(o.skips[t].test(e))return!1;for(t=0,n=o.names.length;t<n;t++)if(o.names[t].test(e))return!0;return!1},o.humanize=e(8),o.names=[],o.skips=[],o.formatters={}},{8:8}],3:[function(B,n,r){(function($,Q){var e,t;e=this,t=function(){"use strict";function u(e){return"function"==typeof e}function t(){var e=setTimeout;return function(){return e(n,1)}}function n(){for(var e=0;e<S;e+=2){(0,I[e])(I[e+1]),I[e]=void 0,I[e+1]=void 0}S=0}function o(e,t){var n=arguments,r=this,i=new this.constructor(l);void 0===i[N]&&y(i);var a,s=r._state;return s?(a=n[s-1],C(function(){return v(s,i,a,r._result)})):m(r,i,e,t),i}function c(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(l);return f(t,e),t}function l(){}function s(e){try{return e.then}catch(e){return H.error=e,H}}function h(e,t,n){var r,i,a,s;t.constructor===e.constructor&&n===o&&t.constructor.resolve===c?(a=e,(s=t)._state===q?p(a,s._result):s._state===L?d(a,s._result):m(s,void 0,function(e){return f(a,e)},function(e){return d(a,e)})):n===H?(d(e,H.error),H.error=null):void 0===n?p(e,t):u(n)?(r=t,i=n,C(function(t){var n=!1,e=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(i,r,function(e){n||(n=!0,r!==e?f(t,e):p(t,e))},function(e){n||(n=!0,d(t,e))},t._label);!n&&e&&(n=!0,d(t,e))},e)):p(e,t)}function f(e,t){var n,r;e===t?d(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!==r&&"function"!==r?p(e,t):h(e,t,s(t)))}function r(e){e._onerror&&e._onerror(e._result),g(e)}function p(e,t){e._state===D&&(e._result=t,e._state=q,0!==e._subscribers.length&&C(g,e))}function d(e,t){e._state===D&&(e._state=L,e._result=t,C(r,e))}function m(e,t,n,r){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+q]=n,i[a+L]=r,0===a&&e._state&&C(g,e)}function g(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,a=e._result,s=0;s<t.length;s+=3)r=t[s],i=t[s+n],r?v(n,r,i,a):i(a);e._subscribers.length=0}}function e(){this.error=null}function v(e,t,n,r){var i=u(n),a=void 0,s=void 0,o=void 0,c=void 0;if(i){if((a=function(e,t){try{return e(t)}catch(e){return U.error=e,U}}(n,r))===U?(c=!0,s=a.error,a.error=null):o=!0,t===a)return void d(t,new TypeError("A promises callback cannot return that same promise."))}else a=r,o=!0;t._state!==D||(i&&o?f(t,a):c?d(t,s):e===q?p(t,a):e===L&&d(t,a))}function y(e){e[N]=M++,e._state=void 0,e._result=void 0,e._subscribers=[]}function i(e,t){this._instanceConstructor=e,this.promise=new e(l),this.promise[N]||y(this.promise),R(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?p(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&p(this.promise,this._result))):d(this.promise,new Error("Array Methods must be provided an Array"))}function b(e){this[N]=M++,this._result=this._state=void 0,this._subscribers=[],l!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof b?function(t,e){try{e(function(e){f(t,e)},function(e){d(t,e)})}catch(e){d(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var a,w,_,x,R=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},S=0,j=void 0,A=void 0,C=function(e,t){I[S]=e,I[S+1]=t,2===(S+=2)&&(A?A(n):k())},T="undefined"!=typeof window?window:void 0,P=T||{},E=P.MutationObserver||P.WebKitMutationObserver,F="undefined"==typeof self&&void 0!==$&&"[object process]"==={}.toString.call($),O="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,I=new Array(1e3),k=void 0;k=F?function(){return $.nextTick(n)}:E?(w=0,_=new E(n),x=document.createTextNode(""),_.observe(x,{characterData:!0}),function(){x.data=w=++w%2}):O?((a=new MessageChannel).port1.onmessage=n,function(){return a.port2.postMessage(0)}):void 0===T&&"function"==typeof B?function(){try{var e=B("vertx");return void 0!==(j=e.runOnLoop||e.runOnContext)?function(){j(n)}:t()}catch(e){return t()}}():t();var N=Math.random().toString(36).substring(16),D=void 0,q=1,L=2,H=new e,U=new e,M=0;return i.prototype._enumerate=function(e){for(var t=0;this._state===D&&t<e.length;t++)this._eachEntry(e[t],t)},i.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===c){var i=s(t);if(i===o&&t._state!==D)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===b){var a=new n(l);h(a,t,i),this._willSettleAt(a,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},i.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===D&&(this._remaining--,e===L?d(r,n):this._result[t]=n),0===this._remaining&&p(r,this._result)},i.prototype._willSettleAt=function(e,t){var n=this;m(e,void 0,function(e){return n._settledAt(q,t,e)},function(e){return n._settledAt(L,t,e)})},b.all=function(e){return new i(this,e).promise},b.race=function(i){var a=this;return new a(R(i)?function(e,t){for(var n=i.length,r=0;r<n;r++)a.resolve(i[r]).then(e,t)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},b.resolve=c,b.reject=function(e){var t=new this(l);return d(t,e),t},b._setScheduler=function(e){A=e},b._setAsap=function(e){C=e},b._asap=C,b.prototype={constructor:b,then:o,catch:function(e){return this.then(null,e)}},b.polyfill=function(){var e=void 0;if(void 0!==Q)e=Q;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=b},b.Promise=b},"object"==typeof r&&void 0!==n?n.exports=t():e.ES6Promise=t()}).call(this,B(11),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{11:11}],4:[function(e,t,n){var s=Object.prototype.hasOwnProperty,o=Object.prototype.toString;t.exports=function(e,t,n){if("[object Function]"!==o.call(t))throw new TypeError("iterator must be a function");var r=e.length;if(r===+r)for(var i=0;i<r;i++)t.call(n,e[i],i,e);else for(var a in e)s.call(e,a)&&t.call(n,e[a],a,e)}},{}],5:[function(e,n,t){(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],7:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],8:[function(e,t,n){function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=36e5,o=864e5;t.exports=function(e,t){t=t||{};var n,r,i=typeof e;if("string"===i&&0<e.length)return function(e){if(!(100<(e=String(e)).length)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*o;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===i&&!1===isNaN(e))return t.long?a(r=e,o,"day")||a(r,s,"hour")||a(r,6e4,"minute")||a(r,1e3,"second")||r+" ms":o<=(n=e)?Math.round(n/o)+"d":s<=n?Math.round(n/s)+"h":6e4<=n?Math.round(n/6e4)+"m":1e3<=n?Math.round(n/1e3)+"s":n+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],9:[function(e,t,n){"use strict";var f=Object.prototype.hasOwnProperty,p=Object.prototype.toString,r=Array.prototype.slice,d=e(10),i=Object.prototype.propertyIsEnumerable,m=!i.call({toString:null},"toString"),g=i.call(function(){},"prototype"),v=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],y=function(e){var t=e.constructor;return t&&t.prototype===e},a={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},b=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!a["$"+e]&&f.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{y(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),s=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===p.call(e),r=d(e),i=t&&"[object String]"===p.call(e),a=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var s=g&&n;if(i&&0<e.length&&!f.call(e,0))for(var o=0;o<e.length;++o)a.push(String(o));if(r&&0<e.length)for(var c=0;c<e.length;++c)a.push(String(c));else for(var u in e)s&&"prototype"===u||!f.call(e,u)||a.push(String(u));if(m)for(var l=function(e){if("undefined"==typeof window||!b)return y(e);try{return y(e)}catch(e){return!1}}(e),h=0;h<v.length;++h)l&&"constructor"===v[h]||!f.call(e,v[h])||a.push(v[h]);return a};s.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var t=Object.keys;Object.keys=function(e){return t(d(e)?r.call(e):e)}}}else Object.keys=s;return Object.keys||s},t.exports=s},{10:10}],10:[function(e,t,n){"use strict";var r=Object.prototype.toString;t.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Function]"===r.call(e.callee)),n}},{}],11:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function s(){m&&p&&(m=!1,p.length?d=p.concat(d):g=-1,d.length&&o())}function o(){if(!m){var e=a(s);m=!0;for(var t=d.length;t;){for(p=d,d=[];++g<t;)p&&p[g].run();g=-1,t=d.length}p=null,m=!1,function(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,h,f=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var p,d=[],m=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new c(e,t)),1!==d.length||m||a(o)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],12:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var o,c,u=e.length;0<s&&s<u&&(u=s);for(var l=0;l<u;++l){var h,f,p,d,m=e[l].replace(a,"%20"),g=m.indexOf(n);f=0<=g?(h=m.substr(0,g),m.substr(g+1)):(h=m,""),p=decodeURIComponent(h),d=decodeURIComponent(f),o=i,c=p,Object.prototype.hasOwnProperty.call(o,c)?v(i[p])?i[p].push(d):i[p]=[i[p],d]:i[p]=d}return i};var v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],13:[function(e,t,n){"use strict";function a(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(n,r,i,e){return r=r||"&",i=i||"=",null===n&&(n=void 0),"object"==typeof n?a(c(n),function(e){var t=encodeURIComponent(s(e))+i;return o(n[e])?a(n[e],function(e){return t+encodeURIComponent(s(e))}).join(r):t+encodeURIComponent(s(n[e]))}).join(r):e?encodeURIComponent(s(e))+i+encodeURIComponent(s(n)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],14:[function(e,t,n){"use strict";n.decode=n.parse=e(12),n.encode=n.stringify=e(13)},{12:12,13:13}],15:[function(j,s,e){(function(e){function t(t,e,n){var r=j(1)("algoliasearch"),i=j(22),a=j(7),s=j(27),o="Usage: algoliasearch(applicationID, apiKey, opts)";if(!0!==n._allowEmptyCredentials&&!t)throw new S.AlgoliaSearchError("Please provide an application ID. "+o);if(!0!==n._allowEmptyCredentials&&!e)throw new S.AlgoliaSearchError("Please provide an API key. "+o);this.applicationID=t,this.apiKey=e,this.hosts={read:[],write:[]},n=n||{},this._timeouts=n.timeouts||{connect:1e3,read:2e3,write:3e4},n.timeout&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=n.timeout);var c=n.protocol||"https:";if(/:$/.test(c)||(c+=":"),"http:"!==c&&"https:"!==c)throw new S.AlgoliaSearchError("protocol must be `http:` or `https:` (was `"+n.protocol+"`)");if(this._checkAppIdData(),n.hosts)a(n.hosts)?(this.hosts.read=i(n.hosts),this.hosts.write=i(n.hosts)):(this.hosts.read=i(n.hosts.read),this.hosts.write=i(n.hosts.write));else{var u=s(this._shuffleResult,function(e){return t+"-"+e+".algolianet.com"}),l=(!1===n.dsn?"":"-dsn")+".algolia.net";this.hosts.read=[this.applicationID+l].concat(u),this.hosts.write=[this.applicationID+".algolia.net"].concat(u)}this.hosts.read=s(this.hosts.read,h(c)),this.hosts.write=s(this.hosts.write,h(c)),this.extraHeaders={},this.cache=n._cache||{},this._ua=n._ua,this._useCache=!(void 0!==n._useCache&&!n._cache)||n._useCache,this._useRequestCache=this._useCache&&n._useRequestCache,this._useFallback=void 0===n.useFallback||n.useFallback,this._setTimeout=n._setTimeout,r("init done, %j",this)}function h(t){return function(e){return t+"//"+e.toLowerCase()}}function x(e){if(void 0===Array.prototype.toJSON)return JSON.stringify(e);var t=Array.prototype.toJSON;delete Array.prototype.toJSON;var n=JSON.stringify(e);return Array.prototype.toJSON=t,n}function R(e){var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;r="x-algolia-api-key"===n||"x-algolia-application-id"===n?"**hidden for security purposes**":e[n],t[n]=r}return t}s.exports=t;var S=j(25),r=j(26),n=j(16),i=j(31),a=e.env.RESET_APP_DATA_TIMER&&parseInt(e.env.RESET_APP_DATA_TIMER,10)||12e4;t.prototype.initIndex=function(e){return new n(this,e)},t.prototype.setExtraHeader=function(e,t){this.extraHeaders[e.toLowerCase()]=t},t.prototype.getExtraHeader=function(e){return this.extraHeaders[e.toLowerCase()]},t.prototype.unsetExtraHeader=function(e){delete this.extraHeaders[e.toLowerCase()]},t.prototype.addAlgoliaAgent=function(e){var t="; "+e;-1===this._ua.indexOf(t)&&(this._ua+=t)},t.prototype._jsonRequest=function(u){function l(e,t,n){return v._useCache&&e&&t&&void 0!==t[n]}function e(e,t){return l(v._useRequestCache,g,f)&&e.catch(function(){delete g[f]}),"function"!=typeof u.callback?e.then(t):void e.then(function(e){r(function(){u.callback(null,t(e))},v._setTimeout||setTimeout)},function(e){r(function(){u.callback(e)},v._setTimeout||setTimeout)})}this._checkAppIdData();var h,f,p,d=j(1)("algoliasearch:"+u.url),m=u.additionalUA||"",g=u.cache,v=this,y=0,b=!1,w=v._useFallback&&v._request.fallback&&u.fallback;p=500<this.apiKey.length&&void 0!==u.body&&(void 0!==u.body.params||void 0!==u.body.requests)?(u.body.apiKey=this.apiKey,this._computeRequestHeaders({additionalUA:m,withApiKey:!1,headers:u.headers})):this._computeRequestHeaders({additionalUA:m,headers:u.headers}),void 0!==u.body&&(h=x(u.body)),d("request start");var _=[];if(v._useCache&&v._useRequestCache&&(f=u.url),v._useCache&&v._useRequestCache&&h&&(f+="_body_"+h),l(v._useRequestCache,g,f)){d("serving request from cache");var t=g[f];return e("function"!=typeof t.then?v._promise.resolve({responseText:t}):t,function(e){return JSON.parse(e.responseText)})}var n=function n(r,a){function s(){return d("retrying request"),v._incrementHostIndex(u.hostType),n(r,a)}v._checkAppIdData();var o=new Date;if(v._useCache&&!v._useRequestCache&&(f=u.url),v._useCache&&!v._useRequestCache&&h&&(f+="_body_"+a.body),l(!v._useRequestCache,g,f)){d("serving response from cache");var e=g[f];return v._promise.resolve({body:JSON.parse(e),responseText:e})}if(y>=v.hosts[u.hostType].length)return!w||b?(d("could not get any response"),v._promise.reject(new S.AlgoliaSearchError("Cannot connect to the AlgoliaSearch API. Send an email to support@algolia.com to report and resolve the issue. Application id was: "+v.applicationID,{debugData:_}))):(d("switching to fallback"),y=0,a.method=u.fallback.method,a.url=u.fallback.url,a.jsonBody=u.fallback.body,a.jsonBody&&(a.body=x(a.jsonBody)),p=v._computeRequestHeaders({additionalUA:m,headers:u.headers}),a.timeouts=v._getTimeoutsForRequest(u.hostType),v._setHostIndexByType(0,u.hostType),b=!0,n(v._request.fallback,a));var c=v._getHostByType(u.hostType),t=c+a.url,i={body:a.body,jsonBody:a.jsonBody,method:a.method,headers:p,timeouts:a.timeouts,debug:d,forceAuthHeaders:a.forceAuthHeaders};return d("method: %s, url: %s, headers: %j, timeouts: %d",i.method,t,i.headers,i.timeouts),r===v._request.fallback&&d("using fallback"),r.call(v,t,i).then(function(e){var t=e&&e.body&&e.body.message&&e.body.status||e.statusCode||e&&e.body&&200;d("received response: statusCode: %s, computed statusCode: %d, headers: %j",e.statusCode,t,e.headers);var n=2===Math.floor(t/100),r=new Date;if(_.push({currentHost:c,headers:R(p),content:h||null,contentLength:void 0!==h?h.length:null,method:a.method,timeouts:a.timeouts,url:a.url,startTime:o,endTime:r,duration:r-o,statusCode:t}),n)return v._useCache&&!v._useRequestCache&&g&&(g[f]=e.responseText),{responseText:e.responseText,body:e.body};if(4!==Math.floor(t/100))return y+=1,s();d("unrecoverable error");var i=new S.AlgoliaSearchError(e.body&&e.body.message,{debugData:_,statusCode:t});return v._promise.reject(i)},function(e){d("error: %s, stack: %s",e.message,e.stack);var t=new Date;return _.push({currentHost:c,headers:R(p),content:h||null,contentLength:void 0!==h?h.length:null,method:a.method,timeouts:a.timeouts,url:a.url,startTime:o,endTime:t,duration:t-o}),e instanceof S.AlgoliaSearchError||(e=new S.Unknown(e&&e.message,e)),y+=1,e instanceof S.Unknown||e instanceof S.UnparsableJSON||y>=v.hosts[u.hostType].length&&(b||!w)?(e.debugData=_,v._promise.reject(e)):e instanceof S.RequestTimeout?(d("retrying request with higher timeout"),v._incrementHostIndex(u.hostType),v._incrementTimeoutMultipler(),a.timeouts=v._getTimeoutsForRequest(u.hostType),n(r,a)):s()})}(v._request,{url:u.url,method:u.method,body:h,jsonBody:u.body,timeouts:v._getTimeoutsForRequest(u.hostType),forceAuthHeaders:u.forceAuthHeaders});return v._useCache&&v._useRequestCache&&g&&(g[f]=n),e(n,function(e){return e.body})},t.prototype._getSearchParams=function(e,t){if(null==e)return t;for(var n in e)null!==n&&void 0!==e[n]&&e.hasOwnProperty(n)&&(t+=""===t?"":"&",t+=n+"="+encodeURIComponent("[object Array]"===Object.prototype.toString.call(e[n])?x(e[n]):e[n]));return t},t.prototype._computeRequestHeaders=function(e){var t=j(4),n={"x-algolia-agent":e.additionalUA?this._ua+"; "+e.additionalUA:this._ua,"x-algolia-application-id":this.applicationID};return!1!==e.withApiKey&&(n["x-algolia-api-key"]=this.apiKey),this.userToken&&(n["x-algolia-usertoken"]=this.userToken),this.securityTags&&(n["x-algolia-tagfilters"]=this.securityTags),t(this.extraHeaders,function(e,t){n[t]=e}),e.headers&&t(e.headers,function(e,t){n[t]=e}),n},t.prototype.search=function(e,t,n){var r=j(7),i=j(27);if(!r(e))throw new Error("Usage: client.search(arrayOfQueries[, callback])");"function"==typeof t?(n=t,t={}):void 0===t&&(t={});var a=this,s={requests:i(e,function(e){var t="";return void 0!==e.query&&(t+="query="+encodeURIComponent(e.query)),{indexName:e.indexName,params:a._getSearchParams(e.params,t)}})},o=i(s.requests,function(e,t){return t+"="+encodeURIComponent("/1/indexes/"+encodeURIComponent(e.indexName)+"?"+e.params)}).join("&");return void 0!==t.strategy&&(s.strategy=t.strategy),this._jsonRequest({cache:this.cache,method:"POST",url:"/1/indexes/*/queries",body:s,hostType:"read",fallback:{method:"GET",url:"/1/indexes/*",body:{params:o}},callback:n})},t.prototype.searchForFacetValues=function(e){var t=j(7),n=j(27),c="Usage: client.searchForFacetValues([{indexName, params: {facetName, facetQuery, ...params}}, ...queries])";if(!t(e))throw new Error(c);var u=this;return u._promise.all(n(e,function(e){if(!e||void 0===e.indexName||void 0===e.params.facetName||void 0===e.params.facetQuery)throw new Error(c);var t=j(22),n=j(29),r=e.indexName,i=e.params,a=i.facetName,s=n(t(i),function(e){return"facetName"===e}),o=u._getSearchParams(s,"");return u._jsonRequest({cache:u.cache,method:"POST",url:"/1/indexes/"+encodeURIComponent(r)+"/facets/"+encodeURIComponent(a)+"/query",hostType:"read",body:{params:o}})}))},t.prototype.setSecurityTags=function(e){if("[object Array]"===Object.prototype.toString.call(e)){for(var t=[],n=0;n<e.length;++n)if("[object Array]"===Object.prototype.toString.call(e[n])){for(var r=[],i=0;i<e[n].length;++i)r.push(e[n][i]);t.push("("+r.join(",")+")")}else t.push(e[n]);e=t.join(",")}this.securityTags=e},t.prototype.setUserToken=function(e){this.userToken=e},t.prototype.clearCache=function(){this.cache={}},t.prototype.setRequestTimeout=function(e){e&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=e)},t.prototype.setTimeouts=function(e){this._timeouts=e},t.prototype.getTimeouts=function(){return this._timeouts},t.prototype._getAppIdData=function(){var e=i.get(this.applicationID);return null!==e&&this._cacheAppIdData(e),e},t.prototype._setAppIdData=function(e){return e.lastChange=(new Date).getTime(),this._cacheAppIdData(e),i.set(this.applicationID,e)},t.prototype._checkAppIdData=function(){var e=this._getAppIdData(),t=(new Date).getTime();return null===e||t-e.lastChange>a?this._resetInitialAppIdData(e):e},t.prototype._resetInitialAppIdData=function(e){var t=e||{};return t.hostIndexes={read:0,write:0},t.timeoutMultiplier=1,t.shuffleResult=t.shuffleResult||function(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[n],e[n]=t;return e}([1,2,3]),this._setAppIdData(t)},t.prototype._cacheAppIdData=function(e){this._hostIndexes=e.hostIndexes,this._timeoutMultiplier=e.timeoutMultiplier,this._shuffleResult=e.shuffleResult},t.prototype._partialAppIdDataUpdate=function(e){var t=j(4),n=this._getAppIdData();return t(e,function(e,t){n[t]=e}),this._setAppIdData(n)},t.prototype._getHostByType=function(e){return this.hosts[e][this._getHostIndexByType(e)]},t.prototype._getTimeoutMultiplier=function(){return this._timeoutMultiplier},t.prototype._getHostIndexByType=function(e){return this._hostIndexes[e]},t.prototype._setHostIndexByType=function(e,t){var n=j(22)(this._hostIndexes);return n[t]=e,this._partialAppIdDataUpdate({hostIndexes:n}),e},t.prototype._incrementHostIndex=function(e){return this._setHostIndexByType((this._getHostIndexByType(e)+1)%this.hosts[e].length,e)},t.prototype._incrementTimeoutMultipler=function(){var e=Math.max(this._timeoutMultiplier+1,4);return this._partialAppIdDataUpdate({timeoutMultiplier:e})},t.prototype._getTimeoutsForRequest=function(e){return{connect:this._timeouts.connect*this._timeoutMultiplier,complete:this._timeouts[e]*this._timeoutMultiplier}}}).call(this,j(11))},{1:1,11:11,16:16,22:22,25:25,26:26,27:27,29:29,31:31,4:4,7:7}],16:[function(o,e,t){function n(e,t){this.indexName=t,this.as=e,this.typeAheadArgs=null,this.typeAheadValueOption=null,this.cache={}}var r=o(21),i=o(23),a=o(24);(e.exports=n).prototype.clearCache=function(){this.cache={}},n.prototype.search=r("query"),n.prototype.similarSearch=i(r("similarQuery"),a("index.similarSearch(query[, callback])","index.search({ similarQuery: query }[, callback])")),n.prototype.browse=function(e,t,n){var r,i,a=o(28);0===arguments.length||1===arguments.length&&"function"==typeof e?(n=e,e=void(r=0)):"number"==typeof e?(r=e,"number"==typeof t?i=t:"function"==typeof t&&(n=t,i=void 0),t=e=void 0):"object"==typeof e?("function"==typeof t&&(n=t),t=e,e=void 0):"string"==typeof e&&"function"==typeof t&&(n=t,t=void 0),t=a({},t||{},{page:r,hitsPerPage:i,query:e});var s=this.as._getSearchParams(t,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/browse",body:{params:s},hostType:"read",callback:n})},n.prototype.browseFrom=function(e,t){return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/browse",body:{cursor:e},hostType:"read",callback:t})},n.prototype.searchForFacetValues=function(e,t){var n=o(22),r=o(29);if(void 0===e.facetName||void 0===e.facetQuery)throw new Error("Usage: index.searchForFacetValues({facetName, facetQuery, ...params}[, callback])");var i=e.facetName,a=r(n(e),function(e){return"facetName"===e}),s=this.as._getSearchParams(a,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/facets/"+encodeURIComponent(i)+"/query",hostType:"read",body:{params:s},callback:t})},n.prototype.searchFacet=i(function(e,t){return this.searchForFacetValues(e,t)},a("index.searchFacet(params[, callback])","index.searchForFacetValues(params[, callback])")),n.prototype._search=function(e,t,n,r){return this.as._jsonRequest({cache:this.cache,method:"POST",url:t||"/1/indexes/"+encodeURIComponent(this.indexName)+"/query",body:{params:e},hostType:"read",fallback:{method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName),body:{params:e}},callback:n,additionalUA:r})},n.prototype.getObject=function(e,t,n){1!==arguments.length&&"function"!=typeof t||(n=t,t=void 0);var r="";if(void 0!==t){r="?attributes=";for(var i=0;i<t.length;++i)0!==i&&(r+=","),r+=t[i]}return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/"+encodeURIComponent(e)+r,hostType:"read",callback:n})},n.prototype.getObjects=function(e,n,t){var r=o(7),i=o(27);if(!r(e))throw new Error("Usage: index.getObjects(arrayOfObjectIDs[, callback])");var a=this;1!==arguments.length&&"function"!=typeof n||(t=n,n=void 0);var s={requests:i(e,function(e){var t={indexName:a.indexName,objectID:e};return n&&(t.attributesToRetrieve=n.join(",")),t})};return this.as._jsonRequest({method:"POST",url:"/1/indexes/*/objects",hostType:"read",body:s,callback:t})},n.prototype.as=null,n.prototype.indexName=null,n.prototype.typeAheadArgs=null,n.prototype.typeAheadValueOption=null},{21:21,22:22,23:23,24:24,27:27,28:28,29:29,7:7}],17:[function(e,t,n){"use strict";var r=e(15),i=e(18);t.exports=i(r,"Browser (lite)")},{15:15,18:18}],18:[function(u,e,t){(function(o){"use strict";var c=u(5),d=c.Promise||u(3).Promise;e.exports=function(e,t){function r(e,t,n){return(n=u(22)(n||{}))._ua=n._ua||r.ua,new i(e,t,n)}function i(){e.apply(this,arguments)}var n=u(6),h=u(25),f=u(19),a=u(20),s=u(30);t=t||"","debug"===o.env.NODE_ENV&&u(1).enable("algoliasearch*"),r.version=u(32),r.ua="Algolia for JavaScript ("+r.version+"); "+t,r.initPlaces=s(r),c.__algolia={debug:u(1),algoliasearch:r};var p={hasXMLHttpRequest:"XMLHttpRequest"in c,hasXDomainRequest:"XDomainRequest"in c};return p.hasXMLHttpRequest&&(p.cors="withCredentials"in new XMLHttpRequest),n(i,e),(i.prototype._request=function(u,l){return new d(function(e,n){function t(){a=!0,o.abort(),n(new h.RequestTimeout)}function r(){c=!0,clearTimeout(i),i=setTimeout(t,l.timeouts.complete)}if(p.cors||p.hasXDomainRequest){u=f(u,l.headers);var i,a,s=l.body,o=p.cors?new XMLHttpRequest:new XDomainRequest,c=!1;i=setTimeout(t,l.timeouts.connect),o.onprogress=function(){c||r()},"onreadystatechange"in o&&(o.onreadystatechange=function(){!c&&1<o.readyState&&r()}),o.onload=function(){if(!a){var t;clearTimeout(i);try{t={body:JSON.parse(o.responseText),responseText:o.responseText,statusCode:o.status,headers:o.getAllResponseHeaders&&o.getAllResponseHeaders()||{}}}catch(e){t=new h.UnparsableJSON({more:o.responseText})}t instanceof h.UnparsableJSON?n(t):e(t)}},o.onerror=function(e){a||(clearTimeout(i),n(new h.Network({more:e})))},o instanceof XMLHttpRequest?(o.open(l.method,u,!0),l.forceAuthHeaders&&(o.setRequestHeader("x-algolia-application-id",l.headers["x-algolia-application-id"]),o.setRequestHeader("x-algolia-api-key",l.headers["x-algolia-api-key"]))):o.open(l.method,u),p.cors&&(s&&("POST"===l.method?o.setRequestHeader("content-type","application/x-www-form-urlencoded"):o.setRequestHeader("content-type","application/json")),o.setRequestHeader("accept","application/json")),s?o.send(s):o.send()}else n(new h.Network("CORS not supported"))})}).fallback=function(e,t){return e=f(e,t.headers),new d(function(n,r){a(e,t,function(e,t){return e?void r(e):void n(t)})})},i.prototype._promise={reject:function(e){return d.reject(e)},resolve:function(e){return d.resolve(e)},delay:function(t){return new d(function(e){setTimeout(e,t)})},all:function(e){return d.all(e)}},r}}).call(this,u(11))},{1:1,11:11,19:19,20:20,22:22,25:25,3:3,30:30,32:32,5:5,6:6}],19:[function(e,t,n){"use strict";t.exports=function(e,t){return(e+=/\?/.test(e)?"&":"?")+r(t)};var r=e(13)},{13:13}],20:[function(e,t,n){"use strict";t.exports=function(e,t,n){function r(){t.debug("JSONP: success"),l||s||(l=!0,a||(t.debug("JSONP: Fail. Script loaded but did not call the callback"),i(),n(new f.JSONPScriptFail)))}function i(){clearTimeout(h),c.onload=null,c.onreadystatechange=null,c.onerror=null,o.removeChild(c)}if("GET"===t.method){t.debug("JSONP: start");var a=!1,s=!1;p+=1;var o=document.getElementsByTagName("head")[0],c=document.createElement("script"),u="algoliaJSONP_"+p,l=!1;window[u]=function(e){return function(){try{delete window[u],delete window[u+"_loaded"]}catch(e){window[u]=window[u+"_loaded"]=void 0}}(),s?void t.debug("JSONP: Late answer, ignoring"):(a=!0,i(),void n(null,{body:e,responseText:JSON.stringify(e)}))},e+="&callback="+u,t.jsonBody&&t.jsonBody.params&&(e+="&"+t.jsonBody.params);var h=setTimeout(function(){t.debug("JSONP: Script timeout"),s=!0,i(),n(new f.RequestTimeout)},t.timeouts.complete);c.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||r()},c.onload=r,c.onerror=function(){t.debug("JSONP: Script error"),l||s||(i(),n(new f.JSONPScriptError))},c.async=!0,c.defer=!0,c.src=e,o.appendChild(c)}else n(new Error("Method "+t.method+" "+e+" is not supported by JSONP."))};var f=e(25),p=0},{25:25}],21:[function(e,t,n){t.exports=function(a,s){return function(e,t,n){if("function"==typeof e&&"object"==typeof t||"object"==typeof n)throw new o.AlgoliaSearchError("index.search usage is index.search(query, params, cb)");0===arguments.length||"function"==typeof e?(n=e,e=""):1!==arguments.length&&"function"!=typeof t||(n=t,t=void 0),"object"==typeof e&&null!==e?(t=e,e=void 0):null!=e||(e="");var r,i="";return void 0!==e&&(i+=a+"="+encodeURIComponent(e)),void 0!==t&&(t.additionalUA&&(r=t.additionalUA,delete t.additionalUA),i=this.as._getSearchParams(t,i)),this._search(i,s,n,r)}};var o=e(25)},{25:25}],22:[function(e,t,n){t.exports=function(e){return JSON.parse(JSON.stringify(e))}},{}],23:[function(e,t,n){t.exports=function(e,t){var n=!1;return function(){return n||(console.warn(t),n=!0),e.apply(this,arguments)}}},{}],24:[function(e,t,n){t.exports=function(e,t){var n=e.toLowerCase().replace(/[\.\(\)]/g,"");return"algoliasearch: `"+e+"` was replaced by `"+t+"`. Please see https://github.com/algolia/algoliasearch-client-javascript/wiki/Deprecated#"+n}},{}],25:[function(i,e,t){"use strict";function r(e,t){var n=i(4),r=this;"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):r.stack=(new Error).stack||"Cannot get a stacktrace, browser is too old",this.name="AlgoliaSearchError",this.message=e||"Unknown error",t&&n(t,function(e,t){r[t]=e})}function n(t,n){function e(){var e=Array.prototype.slice.call(arguments,0);"string"!=typeof e[0]&&e.unshift(n),r.apply(this,e),this.name="AlgoliaSearch"+t+"Error"}return a(e,r),e}var a=i(6);a(r,Error),e.exports={AlgoliaSearchError:r,UnparsableJSON:n("UnparsableJSON","Could not parse the incoming response as JSON, see err.more for details"),RequestTimeout:n("RequestTimeout","Request timed out before getting a response"),Network:n("Network","Network issue, see err.more for details"),JSONPScriptFail:n("JSONPScriptFail","<script> was loaded but did not call our provided callback"),JSONPScriptError:n("JSONPScriptError","<script> unable to load due to an `error` event on it"),Unknown:n("Unknown","Unknown error occured")}},{4:4,6:6}],26:[function(e,t,n){t.exports=function(e,t){t(e,0)}},{}],27:[function(e,t,n){var a=e(4);t.exports=function(n,r){var i=[];return a(n,function(e,t){i.push(r(e,t,n))}),i}},{4:4}],28:[function(e,t,n){var i=e(4);t.exports=function n(r){var e=Array.prototype.slice.call(arguments);return i(e,function(e){for(var t in e)e.hasOwnProperty(t)&&("object"==typeof r[t]&&"object"==typeof e[t]?r[t]=n({},r[t],e[t]):void 0!==e[t]&&(r[t]=e[t]))}),r}},{4:4}],29:[function(a,e,t){e.exports=function(t,n){var e=a(9),r=a(4),i={};return r(e(t),function(e){!0!==n(e)&&(i[e]=t[e])}),i}},{4:4,9:9}],30:[function(s,e,t){e.exports=function(a){return function(e,t,n){var r=s(22);(n=n&&r(n)||{}).hosts=n.hosts||["places-dsn.algolia.net","places-1.algolianet.com","places-2.algolianet.com","places-3.algolianet.com"],0!==arguments.length&&"object"!=typeof e&&void 0!==e||(t=e="",n._allowEmptyCredentials=!0);var i=a(e,t,n).initIndex("places");return i.search=c("query","/1/places/query"),i.reverse=function(e,t){var n=o.encode(e);return this.as._jsonRequest({method:"GET",url:"/1/places/reverse?"+n,hostType:"read",callback:t})},i.getObject=function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/places/"+encodeURIComponent(e),hostType:"read",callback:t})},i}};var o=s(14),c=s(21)},{14:14,21:21,22:22}],31:[function(u,l,e){(function(r){function i(e,t){return a("localStorage failed with",t),function(){try{r.localStorage.removeItem(s)}catch(e){}}(),(n=o).get(e)}function e(e,t){return 1===arguments.length?n.get(e):n.set(e,t)}function t(){try{return"localStorage"in r&&null!==r.localStorage&&(r.localStorage[s]||r.localStorage.setItem(s,JSON.stringify({})),!0)}catch(e){return!1}}var n,a=u(1)("algoliasearch:src/hostIndexState.js"),s="algoliasearch-client-js",o={state:{},set:function(e,t){return this.state[e]=t,this.state[e]},get:function(e){return this.state[e]||null}},c={set:function(t,e){o.set(t,e);try{var n=JSON.parse(r.localStorage[s]);return n[t]=e,r.localStorage[s]=JSON.stringify(n),n[t]}catch(e){return i(t,e)}},get:function(t){try{return JSON.parse(r.localStorage[s])[t]||null}catch(e){return i(t,e)}}};n=t()?c:o,l.exports={get:e,set:e,supportsLocalStorage:t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],32:[function(e,t,n){"use strict";t.exports="3.33.0"},{}]},{},[17])(17)}),e=this,t=function(){"use strict";var i,a,s,o,t=function(){var r=this;if(this.storeClick=function(e,t){var n=JSON.parse(localStorage.getItem("insights-store"))||{};n[e]={queryID:t,eventTimestamp:(new Date).getTime()},localStorage.setItem(r._storageKey,JSON.stringify(n))},this.getConversionObjectID=function(e){var t=r.getStorageData()[e];return t&&t.queryID?t.queryID:void 0},this.cleanOldStorage=function(r,i){var e=Object.keys(i);return 0<e.length?e.reduce(function(e,t){var n=i[t];return Math.abs(r-n.eventTimestamp)/36e5<=6&&(e[t]=n),e},{}):{}},this.getStorageData=function(){return JSON.parse(localStorage.getItem("insights-store"))||{}},!function(e){try{var t=window.localStorage,n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}}())throw new Error("LocalStorage is not available");this._storageKey="insights-store";var e=(new Date).getTime(),t=this.getStorageData(),n=this.cleanOldStorage(e,t);localStorage.setItem(this._storageKey,JSON.stringify(n))},r=function(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var i="expires="+r.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"},n=function(e){var t=function(e){for(var t="_ALGOLIA=",n=decodeURIComponent(document.cookie).split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}();if(t&&""!==t)return r("_ALGOLIA",t,10),t;var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});return r("_ALGOLIA",n,10),n};return Object.keys||(Object.keys=(i=Object.prototype.hasOwnProperty,a=!{toString:null}.propertyIsEnumerable("toString"),o=(s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("function"!=typeof e&&("object"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,n,r=[];for(t in e)i.call(e,t)&&r.push(t);if(a)for(n=0;n<o;n++)i.call(e,s[n])&&r.push(s[n]);return r})),"function"!=typeof Object.assign&&(Object.assign=function(e,t){var n=arguments;if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),i=1;i<arguments.length;i++){var a=n[i];if(null!=a)for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r}),new function(e){if(this._hasCredentials=!1,!document.addEventListener||!window)throw new Error("Browser does not support eventlistener or there is no window object.");this.storageManager=new t,this.processQueue=function(){var r=this,e=window.AlgoliaAnalyticsObject;e&&((window[e].queue||[]).forEach(function(e){var t=e[0],n=e[1];t&&"function"==typeof r[t]&&r[t](n)}),window[e]=function(e,t){r[e](t)})}.bind(this),this.sendEvent=function(e,t){var n=this;t.timestamp=Date.now(),t.userID=this._userID;var r="https://insights.algolia.io/1/searches/"+e+"?X-Algolia-Application-Id="+this._applicationID+"&X-Algolia-API-Key="+this._apiKey;if(navigator&&"function"==typeof navigator.sendBeacon&&"search"!==e)navigator.sendBeacon(r,JSON.stringify(t));else{var i=new XMLHttpRequest;i.open("POST",r),"search"===e&&(i.onreadystatechange=function(){if(4===i.readyState&&i.responseText){var e=i&&i.responseText?JSON.parse(i.responseText):{};n._lastQueryID=e.queryID}}),i.send(JSON.stringify(t))}}.bind(this),this.init=function(e){if(!e)throw new Error("Init function should be called with an object argument containing your apiKey and applicationID");if(!e.apiKey||"string"!=typeof e.apiKey)throw new Error("apiKey is missing, please provide it so we can authenticate the application");if(!e.applicationID||"string"!=typeof e.applicationID)throw new Error("applicationID is missing, please provide it, so we can properly attribute data to your application");this._apiKey=e.apiKey,this._applicationID=e.applicationID,this._hasCredentials=!0}.bind(this),this.initSearch=function(e){if(!this._hasCredentials)throw new Error("Before calling any methods on the analytics, you first need to call the 'init' function with applicationID and apiKey parameters");if(!e)throw new Error("initSearch function requires an argument with getQueryID and hitsContainer arguments");if(!e.getQueryID||"function"!=typeof e.getQueryID)throw new Error("getQueryID must be a function that returns the queryID of the last search operation");this.getQueryID=e.getQueryID}.bind(this),this.click=function(e){if(!this._hasCredentials)throw new Error("Before calling any methods on the analytics, you first need to call the 'init' function with applicationID and apiKey parameters");if(!e)throw new Error("No params were sent to click function, please provide an objectID and position to be reported");if(!e.objectID)throw new Error("required objectID parameter was not sent, click event can not be properly attributed");if(!e.position)throw new Error("required position parameter was not sent, click event position can not be properly sent without");var t=e.queryID;if("function"!=typeof this.getQueryID||t||(t=this.getQueryID()||this._lastQueryID),!t)throw new Error("No queryID was retrieved, please check the implementation and provide either a getQueryID function\n    or call the search method that will return the queryID parameter");this.storageManager.storeClick(e.objectID,t);var n=Object.assign({},e,{queryID:t});this.sendEvent("click",n)}.bind(this),this.conversion=function(e){if(!this._hasCredentials)throw new Error("Before calling any methods on the analytics, you first need to call the 'init' function with applicationID and apiKey parameters");if(!e)throw new Error("No parameters were sent to conversion event, please provide an objectID");if(!e.objectID)throw new Error("No objectID was sent to conversion event, please provide an objectID");var t=e.queryID?e.queryID:this.storageManager.getConversionObjectID(e.objectID),n=Object.assign(e,{queryID:t});if(!t)throw new Error("No queryID was retrieved, please check the implementation and provide either a getQueryID function\n    or call the conversion method that will return the queryID parameter");this.sendEvent("conversion",n)}.bind(this),this.search=function(e){if(!e)throw new Error("Search functions has to be called with a query string, which cannot be undefined");if(!e.index)throw new Error("Please provide index of the index being searched");this.sendEvent("search",e)}.bind(this),this._userID=n(),this.processQueue()}},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.AlgoliaAnalytics=t(),n=this,r=function(){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){h(t,e,n[e])})}return t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t,n){return(i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&s(i,n.prototype),i}).apply(null,arguments)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?o(e):t}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function f(e,t){return e(t={exports:{}},t.exports),t.exports}var p="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,T=p||d||Function("return this")(),m=T.Symbol,g=Object.prototype,v=g.hasOwnProperty,_=g.toString,x=m?m.toStringTag:void 0,R=Object.prototype.toString,S=m?m.toStringTag:void 0,j=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":S&&S in Object(e)?function(e){var t=v.call(e,x),n=e[x];try{var r=!(e[x]=void 0)}catch(e){}var i=_.call(e);return r&&(t?e[x]=n:delete e[x]),i}(e):(t=e,R.call(t));var t},A=function(e){return null!=e&&"object"==typeof e},C=function(e){return A(e)&&"[object Arguments]"==j(e)},P=Object.prototype,F=P.hasOwnProperty,O=P.propertyIsEnumerable,I=C(function(){return arguments}())?C:function(e){return A(e)&&F.call(e,"callee")&&!O.call(e,"callee")},k=Array.isArray;function N(){return!1}var D=f(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,i=r&&r.exports===n?T.Buffer:void 0,a=(i?i.isBuffer:void 0)||N;e.exports=a}),q=/^(?:0|[1-9]\d*)$/,L=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&q.test(e))&&-1<e&&e%1==0&&e<t},H=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991},U={};U["[object Float32Array]"]=U["[object Float64Array]"]=U["[object Int8Array]"]=U["[object Int16Array]"]=U["[object Int32Array]"]=U["[object Uint8Array]"]=U["[object Uint8ClampedArray]"]=U["[object Uint16Array]"]=U["[object Uint32Array]"]=!0,U["[object Arguments]"]=U["[object Array]"]=U["[object ArrayBuffer]"]=U["[object Boolean]"]=U["[object DataView]"]=U["[object Date]"]=U["[object Error]"]=U["[object Function]"]=U["[object Map]"]=U["[object Number]"]=U["[object Object]"]=U["[object RegExp]"]=U["[object Set]"]=U["[object String]"]=U["[object WeakMap]"]=!1;var M,$=function(t){return function(e){return t(e)}},Q=f(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,i=r&&r.exports===n&&p.process,a=function(){try{return r&&r.require&&r.require("util").types||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}),B=Q&&Q.isTypedArray,W=B?$(B):function(e){return A(e)&&H(e.length)&&!!U[j(e)]},V=Object.prototype.hasOwnProperty,K=function(e,t){var n=k(e),r=!n&&I(e),i=!n&&!r&&D(e),a=!n&&!r&&!i&&W(e),s=n||r||i||a,o=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=o.length;for(var u in e)!t&&!V.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||L(u,c))||o.push(u);return o},z=Object.prototype,J=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||z)},G=function(t,n){return function(e){return t(n(e))}},X=G(Object.keys,Object),Y=Object.prototype.hasOwnProperty,Z=function(e){if(!J(e))return X(e);var t=[];for(var n in Object(e))Y.call(e,n)&&"constructor"!=n&&t.push(n);return t},ee=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},te=function(e){if(!ee(e))return!1;var t=j(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},ne=function(e){return null!=e&&H(e.length)&&!te(e)},re=function(e){return ne(e)?K(e):Z(e)},ie=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},ae=T["__core-js_shared__"],se=(M=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",oe=Function.prototype.toString,ce=function(e){if(null!=e){try{return oe.call(e)}catch(e){}try{return e+""}catch(e){}}return""},ue=/^\[object .+?Constructor\]$/,le=Function.prototype,he=Object.prototype,fe=le.toString,pe=he.hasOwnProperty,de=RegExp("^"+fe.call(pe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=function(e){return!(!ee(e)||(t=e,se&&se in t))&&(te(e)?de:ue).test(ce(e));var t},ge=function(e,t){var n,r,i=(r=t,null==(n=e)?void 0:n[r]);return me(i)?i:void 0},ve=ge(Object,"create");var ye=Object.prototype.hasOwnProperty;var be=Object.prototype.hasOwnProperty;function we(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}we.prototype.clear=function(){this.__data__=ve?ve(null):{},this.size=0},we.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},we.prototype.get=function(e){var t=this.__data__;if(ve){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ye.call(t,e)?t[e]:void 0},we.prototype.has=function(e){var t=this.__data__;return ve?void 0!==t[e]:be.call(t,e)},we.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ve&&void 0===t?"__lodash_hash_undefined__":t,this};var _e=we;var xe=function(e,t){return e===t||e!=e&&t!=t},Re=function(e,t){for(var n=e.length;n--;)if(xe(e[n][0],t))return n;return-1},Se=Array.prototype.splice;function je(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}je.prototype.clear=function(){this.__data__=[],this.size=0},je.prototype.delete=function(e){var t=this.__data__,n=Re(t,e);return!(n<0||(n==t.length-1?t.pop():Se.call(t,n,1),--this.size,0))},je.prototype.get=function(e){var t=this.__data__,n=Re(t,e);return n<0?void 0:t[n][1]},je.prototype.has=function(e){return-1<Re(this.__data__,e)},je.prototype.set=function(e,t){var n=this.__data__,r=Re(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var Ae=je,Ce=ge(T,"Map"),Te=function(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map};function Pe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Pe.prototype.clear=function(){this.size=0,this.__data__={hash:new _e,map:new(Ce||Ae),string:new _e}},Pe.prototype.delete=function(e){var t=Te(this,e).delete(e);return this.size-=t?1:0,t},Pe.prototype.get=function(e){return Te(this,e).get(e)},Pe.prototype.has=function(e){return Te(this,e).has(e)},Pe.prototype.set=function(e,t){var n=Te(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var Ee=Pe;function Fe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ee;++t<n;)this.add(e[t])}Fe.prototype.add=Fe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Fe.prototype.has=function(e){return this.__data__.has(e)};var Oe=Fe,Ie=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1};function ke(e){return e!=e}var Ne=function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ie(e,ke,n)},De=function(e,t){return!(null==e||!e.length)&&-1<Ne(e,t,0)};function qe(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var Le=function(e,t){return e.has(t)},He=Math.min;function Ue(e){return e}var Me=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},$e=Math.max,Qe=function(a,s,o){return s=$e(void 0===s?a.length-1:s,0),function(){for(var e=arguments,t=-1,n=$e(e.length-s,0),r=Array(n);++t<n;)r[t]=e[s+t];t=-1;for(var i=Array(s+1);++t<s;)i[t]=e[t];return i[s]=o(r),Me(a,this,i)}},Be=function(e){return function(){return e}},We=function(){try{var e=ge(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ve=We?function(e,t){return We(e,"toString",{configurable:!0,enumerable:!1,value:Be(t),writable:!0})}:Ue,Ke=Date.now,ze=function(n){var r=0,i=0;return function(){var e=Ke(),t=16-(e-i);if(i=e,0<t){if(800<=++r)return arguments[0]}else r=0;return n.apply(void 0,arguments)}},Je=ze(Ve),Ge=function(e,t){return Je(Qe(e,t,Ue),e+"")},Xe=function(e){return A(e)&&ne(e)};function Ye(e){return Xe(e)?e:[]}var Ze,et=Ge(function(e){var t=ie(e,Ye);return t.length&&t[0]===e[0]?function(e,t,n){for(var r=n?qe:De,i=e[0].length,a=e.length,s=a,o=Array(a),c=1/0,u=[];s--;){var l=e[s];s&&t&&(l=ie(l,$(t))),c=He(l.length,c),o[s]=!n&&(t||120<=i&&120<=l.length)?new Oe(s&&l):void 0}l=e[0];var h=-1,f=o[0];e:for(;++h<i&&u.length<c;){var p=l[h],d=t?t(p):p;if(p=n||0!==p?p:0,!(f?Le(f,d):r(u,d,n))){for(s=a;--s;){var m=o[s];if(!(m?Le(m,d):r(e[s],d,n)))continue e}f&&f.push(d),u.push(p)}}return u}(t):[]}),tt=function(e,t,n){for(var r=-1,i=Object(e),a=n(e),s=a.length;s--;){var o=a[++r];if(!1===t(i[o],o,i))break}return e},nt=function(e,t){return e&&tt(e,t,re)},rt=function(e){return"function"==typeof e?e:Ue},it=function(e,t){return e&&nt(e,rt(t))},at=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},st=(Ze=nt,function(e,t){if(null==e)return e;if(!ne(e))return Ze(e,t);for(var n=e.length,r=-1,i=Object(e);++r<n&&!1!==t(i[r],r,i););return e}),ot=function(e,t){return(k(e)?at:st)(e,rt(t))},ct=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var s=e[n];t(s,n,e)&&(a[i++]=s)}return a};function ut(e){var t=this.__data__=new Ae(e);this.size=t.size}ut.prototype.clear=function(){this.__data__=new Ae,this.size=0},ut.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ut.prototype.get=function(e){return this.__data__.get(e)},ut.prototype.has=function(e){return this.__data__.has(e)},ut.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ae){var r=n.__data__;if(!Ce||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ee(r)}return n.set(e,t),this.size=n.size,this};var lt=ut,ht=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},ft=function(e,t,n,r,i,a){var s=1&n,o=e.length,c=t.length;if(o!=c&&!(s&&o<c))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var l=-1,h=!0,f=2&n?new Oe:void 0;for(a.set(e,t),a.set(t,e);++l<o;){var p=e[l],d=t[l];if(r)var m=s?r(d,p,l,t,e,a):r(p,d,l,e,t,a);if(void 0!==m){if(m)continue;h=!1;break}if(f){if(!ht(t,function(e,t){if(!Le(f,t)&&(p===e||i(p,e,n,r,a)))return f.push(t)})){h=!1;break}}else if(p!==d&&!i(p,d,n,r,a)){h=!1;break}}return a.delete(e),a.delete(t),h},pt=T.Uint8Array;function dt(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r}function mt(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var gt=m?m.prototype:void 0,vt=gt?gt.valueOf:void 0,yt=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},bt=function(e,t,n){var r=t(e);return k(e)?r:yt(r,n(e))};function wt(){return[]}var _t=Object.prototype.propertyIsEnumerable,xt=Object.getOwnPropertySymbols,Rt=xt?function(t){return null==t?[]:(t=Object(t),ct(xt(t),function(e){return _t.call(t,e)}))}:wt,St=function(e){return bt(e,re,Rt)},jt=Object.prototype.hasOwnProperty,At=ge(T,"DataView"),Ct=ge(T,"Promise"),Tt=ge(T,"Set"),Pt=ge(T,"WeakMap"),Et="[object Map]",Ft="[object Promise]",Ot="[object Set]",It="[object WeakMap]",kt="[object DataView]",Nt=ce(At),Dt=ce(Ce),qt=ce(Ct),Lt=ce(Tt),Ht=ce(Pt),Ut=j;(At&&Ut(new At(new ArrayBuffer(1)))!=kt||Ce&&Ut(new Ce)!=Et||Ct&&Ut(Ct.resolve())!=Ft||Tt&&Ut(new Tt)!=Ot||Pt&&Ut(new Pt)!=It)&&(Ut=function(e){var t=j(e),n="[object Object]"==t?e.constructor:void 0,r=n?ce(n):"";if(r)switch(r){case Nt:return kt;case Dt:return Et;case qt:return Ft;case Lt:return Ot;case Ht:return It}return t});var Mt=Ut,$t="[object Arguments]",Qt="[object Array]",Bt="[object Object]",Wt=Object.prototype.hasOwnProperty,Vt=function(e,t,n,r,i,a){var s=k(e),o=k(t),c=s?Qt:Mt(e),u=o?Qt:Mt(t),l=(c=c==$t?Bt:c)==Bt,h=(u=u==$t?Bt:u)==Bt,f=c==u;if(f&&D(e)){if(!D(t))return!1;l=!(s=!0)}if(f&&!l)return a||(a=new lt),s||W(e)?ft(e,t,n,r,i,a):function(e,t,n,r,i,a,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new pt(e),new pt(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return xe(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=dt;case"[object Set]":var c=1&r;if(o||(o=mt),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;r|=2,s.set(e,t);var l=ft(o(e),o(t),r,i,a,s);return s.delete(e),l;case"[object Symbol]":if(vt)return vt.call(e)==vt.call(t)}return!1}(e,t,c,n,r,i,a);if(!(1&n)){var p=l&&Wt.call(e,"__wrapped__"),d=h&&Wt.call(t,"__wrapped__");if(p||d){var m=p?e.value():e,g=d?t.value():t;return a||(a=new lt),i(m,g,n,r,a)}}return f&&(a||(a=new lt),function(e,t,n,r,i,a){var s=1&n,o=St(e),c=o.length;if(c!=St(t).length&&!s)return!1;for(var u=c;u--;){var l=o[u];if(!(s?l in t:jt.call(t,l)))return!1}var h=a.get(e);if(h&&a.get(t))return h==t;var f=!0;a.set(e,t),a.set(t,e);for(var p=s;++u<c;){var d=e[l=o[u]],m=t[l];if(r)var g=s?r(m,d,l,t,e,a):r(d,m,l,e,t,a);if(!(void 0===g?d===m||i(d,m,n,r,a):g)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var v=e.constructor,y=t.constructor;v!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(f=!1)}return a.delete(e),a.delete(t),f}(e,t,n,r,i,a))},Kt=function e(t,n,r,i,a){return t===n||(null==t||null==n||!A(t)&&!A(n)?t!=t&&n!=n:Vt(t,n,r,i,e,a))},zt=function(e){return e==e&&!ee(e)},Jt=function(t,n){return function(e){return null!=e&&e[t]===n&&(void 0!==n||t in Object(e))}},Gt=function(t){var n=function(e){for(var t=re(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,zt(i)]}return t}(t);return 1==n.length&&n[0][2]?Jt(n[0][0],n[0][1]):function(e){return e===t||function(e,t,n,r){var i=n.length,a=i,s=!r;if(null==e)return!a;for(e=Object(e);i--;){var o=n[i];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<a;){var c=(o=n[i])[0],u=e[c],l=o[1];if(s&&o[2]){if(void 0===u&&!(c in e))return!1}else{var h=new lt;if(r)var f=r(u,l,c,e,t,h);if(!(void 0===f?Kt(l,u,3,r,h):f))return!1}}return!0}(e,t,n)}},Xt=function(e){return"symbol"==typeof e||A(e)&&"[object Symbol]"==j(e)},Yt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zt=/^\w*$/,en=function(e,t){if(k(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Xt(e))||Zt.test(e)||!Yt.test(e)||null!=t&&e in Object(t)},tn="Expected a function";function nn(i,a){if("function"!=typeof i||null!=a&&"function"!=typeof a)throw new TypeError(tn);var s=function(){var e=arguments,t=a?a.apply(this,e):e[0],n=s.cache;if(n.has(t))return n.get(t);var r=i.apply(this,e);return s.cache=n.set(t,r)||n,r};return s.cache=new(nn.Cache||Ee),s}nn.Cache=Ee;var rn,an,sn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,on=/\\(\\)?/g,cn=(an=(rn=nn(function(e){var i=[];return 46===e.charCodeAt(0)&&i.push(""),e.replace(sn,function(e,t,n,r){i.push(n?r.replace(on,"$1"):t||e)}),i},function(e){return 500===an.size&&an.clear(),e})).cache,rn),un=m?m.prototype:void 0,ln=un?un.toString:void 0,hn=function e(t){if("string"==typeof t)return t;if(k(t))return ie(t,e)+"";if(Xt(t))return ln?ln.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},fn=function(e){return null==e?"":hn(e)},pn=function(e,t){return k(e)?e:en(e,t)?[e]:cn(fn(e))},dn=function(e){if("string"==typeof e||Xt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},mn=function(e,t){for(var n=0,r=(t=pn(t,e)).length;null!=e&&n<r;)e=e[dn(t[n++])];return n&&n==r?e:void 0},gn=function(e,t,n){var r=null==e?void 0:mn(e,t);return void 0===r?n:r};function vn(e,t){return null!=e&&t in Object(e)}var yn=function(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=pn(t,e)).length,a=!1;++r<i;){var s=dn(t[r]);if(!(a=null!=e&&n(e,s)))break;e=e[s]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&H(i)&&L(s,i)&&(k(e)||I(e))}(e,t,vn)},bn=function(e){return en(e)?(n=dn(e),function(e){return null==e?void 0:e[n]}):(t=e,function(e){return mn(e,t)});var t,n},wn=function(e){return"function"==typeof e?e:null==e?Ue:"object"==typeof e?k(e)?(n=e[0],r=e[1],en(n)&&zt(r)?Jt(dn(n),r):function(e){var t=gn(e,n);return void 0===t&&t===r?yn(e,n):Kt(r,t,3)}):Gt(e):bn(e);var n,r},_n=function(e,t){return(k(e)?ct:function(e,r){var i=[];return st(e,function(e,t,n){r(e,t,n)&&i.push(e)}),i})(e,wn(t))},xn=function(e,r){var i=-1,a=ne(e)?Array(e.length):[];return st(e,function(e,t,n){a[++i]=r(e,t,n)}),a},Rn=function(e,t){return(k(e)?ie:xn)(e,wn(t))};function Sn(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function jn(e,r,i,a,t){return t(e,function(e,t,n){i=a?(a=!1,e):r(i,e,t,n)}),i}var An=function(e,t,n){var r=k(e)?Sn:jn,i=arguments.length<3;return r(e,wn(t),n,i,st)},Cn=function(e,t,n){"__proto__"==t&&We?We(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Tn=Object.prototype.hasOwnProperty,Pn=function(e,t,n){var r=e[t];Tn.call(e,t)&&xe(r,n)&&(void 0!==n||t in e)||Cn(e,t,n)},En=function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var o=t[a],c=r?r(n[o],e[o],o,n,e):void 0;void 0===c&&(c=e[o]),i?Cn(n,o,c):Pn(n,o,c)}return n},Fn=Object.prototype.hasOwnProperty,On=function(e){if(!ee(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=J(e),n=[];for(var r in e)("constructor"!=r||!t&&Fn.call(e,r))&&n.push(r);return n},In=function(e){return ne(e)?K(e,!0):On(e)},kn=f(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,i=r&&r.exports===n?T.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}}),Nn=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Dn=G(Object.getPrototypeOf,Object),qn=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)yt(t,Rt(e)),e=Dn(e);return t}:wt,Ln=function(e){return bt(e,In,qn)},Hn=Object.prototype.hasOwnProperty,Un=function(e){var t=new e.constructor(e.byteLength);return new pt(t).set(new pt(e)),t},Mn=/\w*$/,$n=m?m.prototype:void 0,Qn=$n?$n.valueOf:void 0,Bn=function(e,t){var n=t?Un(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},Wn=function(e,t,n){var r,i,a,s,o,c=e.constructor;switch(t){case"[object ArrayBuffer]":return Un(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return s=e,o=n?Un(s.buffer):s.buffer,new s.constructor(o,s.byteOffset,s.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Bn(e,n);case"[object Map]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return(a=new(i=e).constructor(i.source,Mn.exec(i))).lastIndex=i.lastIndex,a;case"[object Set]":return new c;case"[object Symbol]":return r=e,Qn?Object(Qn.call(r)):{}}},Vn=Object.create;function Kn(){}var zn=function(e){if(!ee(e))return{};if(Vn)return Vn(e);Kn.prototype=e;var t=new Kn;return Kn.prototype=void 0,t},Jn=function(e){return"function"!=typeof e.constructor||J(e)?{}:zn(Dn(e))};var Gn=Q&&Q.isMap,Xn=Gn?$(Gn):function(e){return A(e)&&"[object Map]"==Mt(e)};var Yn=Q&&Q.isSet,Zn=Yn?$(Yn):function(e){return A(e)&&"[object Set]"==Mt(e)},er="[object Arguments]",tr="[object Function]",nr="[object Object]",rr={};rr[er]=rr["[object Array]"]=rr["[object ArrayBuffer]"]=rr["[object DataView]"]=rr["[object Boolean]"]=rr["[object Date]"]=rr["[object Float32Array]"]=rr["[object Float64Array]"]=rr["[object Int8Array]"]=rr["[object Int16Array]"]=rr["[object Int32Array]"]=rr["[object Map]"]=rr["[object Number]"]=rr[nr]=rr["[object RegExp]"]=rr["[object Set]"]=rr["[object String]"]=rr["[object Symbol]"]=rr["[object Uint8Array]"]=rr["[object Uint8ClampedArray]"]=rr["[object Uint16Array]"]=rr["[object Uint32Array]"]=!0,rr["[object Error]"]=rr[tr]=rr["[object WeakMap]"]=!1;var ir=function n(r,i,a,e,t,s){var o,c=1&i,u=2&i,l=4&i;if(a&&(o=t?a(r,e,t,s):a(r)),void 0!==o)return o;if(!ee(r))return r;var h,f,p,d,m,g,v,y,b,w,_,x=k(r);if(x){if(w=(b=r).length,_=new b.constructor(w),w&&"string"==typeof b[0]&&Hn.call(b,"index")&&(_.index=b.index,_.input=b.input),o=_,!c)return Nn(r,o)}else{var R=Mt(r),S=R==tr||"[object GeneratorFunction]"==R;if(D(r))return kn(r,c);if(R==nr||R==er||S&&!t){if(o=u||S?{}:Jn(r),!c)return u?(y=m=r,g=(v=o)&&En(y,In(y),v),En(m,qn(m),g)):(d=h=r,f=(p=o)&&En(d,re(d),p),En(h,Rt(h),f))}else{if(!rr[R])return t?r:{};o=Wn(r,R,c)}}s||(s=new lt);var j=s.get(r);if(j)return j;if(s.set(r,o),Zn(r))return r.forEach(function(e){o.add(n(e,i,a,e,r,s))}),o;if(Xn(r))return r.forEach(function(e,t){o.set(t,n(e,i,a,t,r,s))}),o;var A=l?u?Ln:St:u?keysIn:re,C=x?void 0:A(r);return at(C||r,function(e,t){C&&(e=r[t=e]),Pn(o,t,n(e,i,a,t,r,s))}),o},ar=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},sr=function(e,t,n){var r=-1,i=e.length;t<0&&(t=i<-t?0:i+t),(n=i<n?i:n)<0&&(n+=i),i=n<t?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a},or=function(e,t){return t=pn(t,e),null==(n=e,e=(r=t).length<2?n:mn(n,sr(r,0,-1)))||delete e[dn(ar(t))];var n,r},cr=Function.prototype,ur=Object.prototype,lr=cr.toString,hr=ur.hasOwnProperty,fr=lr.call(Object),pr=function(e){if(!A(e)||"[object Object]"!=j(e))return!1;var t=Dn(e);if(null===t)return!0;var n=hr.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&lr.call(n)==fr};function dr(e){return pr(e)?void 0:e}var mr,gr,vr=m?m.isConcatSpreadable:void 0,yr=function(e){return k(e)||I(e)||!!(vr&&e&&e[vr])},br=function(e){return null!=e&&e.length?function e(t,n,r,i,a){var s=-1,o=t.length;for(r||(r=yr),a||(a=[]);++s<o;){var c=t[s];0<n&&r(c)?1<n?e(c,n-1,r,i,a):yt(a,c):i||(a[a.length]=c)}return a}(e,1):[]},wr=function(e){return Je(Qe(e,void 0,br),e+"")},_r=wr(function(t,e){var n={};if(null==t)return n;var r=!1;e=ie(e,function(e){return e=pn(e,t),r||(r=1<e.length),e}),En(t,Ln(t),n),r&&(n=ir(n,7,dr));for(var i=e.length;i--;)or(n,e[i]);return n}),xr=/^\s+|\s+$/g,Rr=/^[-+]0x[0-9a-f]+$/i,Sr=/^0b[01]+$/i,jr=/^0o[0-7]+$/i,Ar=parseInt,Cr=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(Xt(e))return NaN;if(ee(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ee(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(xr,"");var n=Sr.test(e);return n||jr.test(e)?Ar(e.slice(2),n?2:8):Rr.test(e)?NaN:+e}(e))!==1/0&&e!==-1/0?e==e?e:0:17976931348623157e292*(e<0?-1:1):0===e?e:0},Tr=function(e){var t=Cr(e),n=t%1;return t==t?n?t-n:t:0},Pr=Math.max,Er=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Tr(n);return i<0&&(i=Pr(r+i,0)),Ne(e,t,i)},Fr=function(e){return"number"==typeof e||A(e)&&"[object Number]"==j(e)},Or=Object.prototype.hasOwnProperty,Ir=function(e){if(null==e)return!0;if(ne(e)&&(k(e)||"string"==typeof e||"function"==typeof e.splice||D(e)||W(e)||I(e)))return!e.length;var t=Mt(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(J(e))return!Z(e).length;for(var n in e)if(Or.call(e,n))return!1;return!0},kr=function(e,t){return Kt(e,t)},Nr=function(e){return void 0===e},Dr=function(e){return"string"==typeof e||!k(e)&&A(e)&&"[object String]"==j(e)},qr=Math.max,Lr=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Tr(n);return i<0&&(i=qr(r+i,0)),Ie(e,wn(t),i)},Hr=(mr=Lr,function(e,t,n){var r=Object(e);if(!ne(e)){var i=wn(t);e=re(e),t=function(e){return i(r[e],e,r)}}var a=mr(e,t,n);return-1<a?r[i?e[a]:a]:void 0}),Ur=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Mr="\\ud800-\\udfff",$r="["+Mr+"]",Qr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Br="\\ud83c[\\udffb-\\udfff]",Wr="[^"+Mr+"]",Vr="(?:\\ud83c[\\udde6-\\uddff]){2}",Kr="[\\ud800-\\udbff][\\udc00-\\udfff]",zr="(?:"+Qr+"|"+Br+")?",Jr="[\\ufe0e\\ufe0f]?",Gr=Jr+zr+"(?:\\u200d(?:"+[Wr,Vr,Kr].join("|")+")"+Jr+zr+")*",Xr="(?:"+[Wr+Qr+"?",Qr,Vr,Kr,$r].join("|")+")",Yr=RegExp(Br+"(?="+Br+")|"+Xr+Gr,"g"),Zr=function(e){return t=e,Ur.test(t)?e.match(Yr)||[]:e.split("");var t},ei=/^\s+|\s+$/g,ti=function(e,t,n){if((e=fn(e))&&(n||void 0===t))return e.replace(ei,"");if(!e||!(t=hn(t)))return e;var r,i,a,s,o=Zr(e),c=Zr(t),u=function(e,t){for(var n=-1,r=e.length;++n<r&&-1<Ne(t,e[n],0););return n}(o,c),l=function(e,t){for(var n=e.length;n--&&-1<Ne(t,e[n],0););return n}(o,c)+1;return(r=o,i=u,a=l,s=r.length,a=void 0===a?s:a,!i&&s<=a?r:sr(r,i,a)).join("")},ni=function(e,t,n){if(!ee(n))return!1;var r=typeof t;return!!("number"==r?ne(n)&&L(t,n.length):"string"==r&&t in n)&&xe(n[t],e)},ri=Object.prototype,ii=ri.hasOwnProperty,ai=Ge(function(e,t){e=Object(e);var n=-1,r=t.length,i=2<r?t[2]:void 0;for(i&&ni(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],s=In(a),o=-1,c=s.length;++o<c;){var u=s[o],l=e[u];(void 0===l||xe(l,ri[u])&&!ii.call(e,u))&&(e[u]=a[u])}return e}),si=function(e,t,n){(void 0===n||xe(e[t],n))&&(void 0!==n||t in e)||Cn(e,t,n)},oi=function(e,t){if("__proto__"!=t)return e[t]},ci=function(e,t,n,r,i,a,s){var o,c=oi(e,n),u=oi(t,n),l=s.get(u);if(l)si(e,n,l);else{var h=a?a(c,u,n+"",e,t,s):void 0,f=void 0===h;if(f){var p=k(u),d=!p&&D(u),m=!p&&!d&&W(u);h=u,p||d||m?h=k(c)?c:Xe(c)?Nn(c):d?kn(u,!(f=!1)):m?Bn(u,!(f=!1)):[]:pr(u)||I(u)?I(h=c)?h=En(o=c,In(o)):ee(c)&&!te(c)||(h=Jn(u)):f=!1}f&&(s.set(u,h),i(h,u,r,a,s),s.delete(u)),si(e,n,h)}},ui=(gr=function(e,t,n){!function r(i,a,s,o,c){i!==a&&tt(a,function(e,t){if(ee(e))c||(c=new lt),ci(i,a,t,s,r,o,c);else{var n=o?o(oi(i,t),e,t+"",i,a,c):void 0;void 0===n&&(n=e),si(i,t,n)}},In)}(e,t,n)},Ge(function(e,t){var n=-1,r=t.length,i=1<r?t[r-1]:void 0,a=2<r?t[2]:void 0;for(i=3<gr.length&&"function"==typeof i?(r--,i):void 0,a&&ni(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var s=t[n];s&&gr(e,s,n)}return e})),li=function e(t){if(Fr(t))return t;if(Dr(t))return parseFloat(t);if(Array.isArray(t))return Rn(t,e);throw new Error("The value should be a number, a parseable string or an array of those.")},hi={addRefinement:function(e,t,n){if(hi.isRefined(e,t,n))return e;var r=""+n,i=e[t]?e[t].concat(r):[r],a={};return a[t]=i,ai({},a,e)},removeRefinement:function(e,n,t){if(Nr(t))return hi.clearRefinement(e,n);var r=""+t;return hi.clearRefinement(e,function(e,t){return n===t&&r===e})},toggleRefinement:function(e,t,n){if(Nr(n))throw new Error("toggleRefinement should be used with a value");return hi.isRefined(e,t,n)?hi.removeRefinement(e,t,n):hi.addRefinement(e,t,n)},clearRefinement:function(e,i,a){if(Nr(i))return Ir(e)?e:{};if(Dr(i))return Ir(e[i])?e:_r(e,i);if(te(i)){var s=!1,t=An(e,function(e,t,n){var r=_n(t,function(e){return!i(e,n,a)});return Ir(r)?s=!0:(r.length!==t.length&&(s=!0),e[n]=r),e},{});return s?t:e}},isRefined:function(e,t,n){var r=Er,i=!!e[t]&&0<e[t].length;if(Nr(n)||!i)return i;var a=""+n;return-1!==r(e[t],a)}},fi=hi;function pi(e){var t=e?pi._parseNumbers(e):{};this.index=t.index||"",this.query=t.query||"",this.facets=t.facets||[],this.disjunctiveFacets=t.disjunctiveFacets||[],this.hierarchicalFacets=t.hierarchicalFacets||[],this.facetsRefinements=t.facetsRefinements||{},this.facetsExcludes=t.facetsExcludes||{},this.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements||{},this.numericRefinements=t.numericRefinements||{},this.tagRefinements=t.tagRefinements||[],this.hierarchicalFacetsRefinements=t.hierarchicalFacetsRefinements||{},this.numericFilters=t.numericFilters,this.tagFilters=t.tagFilters,this.optionalTagFilters=t.optionalTagFilters,this.optionalFacetFilters=t.optionalFacetFilters,this.hitsPerPage=t.hitsPerPage,this.maxValuesPerFacet=t.maxValuesPerFacet,this.page=t.page||0,this.queryType=t.queryType,this.typoTolerance=t.typoTolerance,this.minWordSizefor1Typo=t.minWordSizefor1Typo,this.minWordSizefor2Typos=t.minWordSizefor2Typos,this.minProximity=t.minProximity,this.allowTyposOnNumericTokens=t.allowTyposOnNumericTokens,this.ignorePlurals=t.ignorePlurals,this.restrictSearchableAttributes=t.restrictSearchableAttributes,this.advancedSyntax=t.advancedSyntax,this.analytics=t.analytics,this.analyticsTags=t.analyticsTags,this.synonyms=t.synonyms,this.replaceSynonymsInHighlight=t.replaceSynonymsInHighlight,this.optionalWords=t.optionalWords,this.removeWordsIfNoResults=t.removeWordsIfNoResults,this.attributesToRetrieve=t.attributesToRetrieve,this.attributesToHighlight=t.attributesToHighlight,this.highlightPreTag=t.highlightPreTag,this.highlightPostTag=t.highlightPostTag,this.attributesToSnippet=t.attributesToSnippet,this.getRankingInfo=t.getRankingInfo,this.distinct=t.distinct,this.aroundLatLng=t.aroundLatLng,this.aroundLatLngViaIP=t.aroundLatLngViaIP,this.aroundRadius=t.aroundRadius,this.minimumAroundRadius=t.minimumAroundRadius,this.aroundPrecision=t.aroundPrecision,this.insideBoundingBox=t.insideBoundingBox,this.insidePolygon=t.insidePolygon,this.snippetEllipsisText=t.snippetEllipsisText,this.disableExactOnAttributes=t.disableExactOnAttributes,this.enableExactOnSingleWordQuery=t.enableExactOnSingleWordQuery,this.offset=t.offset,this.length=t.length;var n=this;it(t,function(e,t){-1===pi.PARAMETERS.indexOf(t)&&(n[t]=e)})}pi.PARAMETERS=re(new pi),pi._parseNumbers=function(i){if(i instanceof pi)return i;var a={};if(ot(["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"],function(e){var t,n=i[e];if(Dr(n)){var r=parseFloat(n);a[e]=Fr(t=r)&&t!=+t?n:r}}),Array.isArray(i.insideBoundingBox)&&(a.insideBoundingBox=i.insideBoundingBox.map(function(e){return e.map(function(e){return parseFloat(e)})})),i.numericRefinements){var s={};ot(i.numericRefinements,function(e,r){s[r]={},ot(e,function(e,t){var n=Rn(e,function(e){return Array.isArray(e)?Rn(e,function(e){return Dr(e)?parseFloat(e):e}):Dr(e)?parseFloat(e):e});s[r][t]=n})}),a.numericRefinements=s}return ui({},i,a)},pi.make=function(e){var n=new pi(e);return ot(e.hierarchicalFacets,function(e){if(e.rootPath){var t=n.getHierarchicalRefinement(e.name);0<t.length&&0!==t[0].indexOf(e.rootPath)&&(n=n.clearRefinements(e.name)),0===(t=n.getHierarchicalRefinement(e.name)).length&&(n=n.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}}),n},pi.validate=function(e,t){var n=t||{};return e.tagFilters&&n.tagRefinements&&0<n.tagRefinements.length?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):0<e.tagRefinements.length&&n.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&n.numericRefinements&&!Ir(n.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):!Ir(e.numericRefinements)&&n.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},pi.prototype={constructor:pi,clearRefinements:function(e){var t=fi.clearRefinement,n={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:t(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:t(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:t(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:t(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return n.numericRefinements===this.numericRefinements&&n.facetsRefinements===this.facetsRefinements&&n.facetsExcludes===this.facetsExcludes&&n.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&n.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(n)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,n){var r=li(n);if(this.isNumericRefined(e,t,r))return this;var i=ui({},this.numericRefinements);return i[e]=ui({},i[e]),i[e][t]?(i[e][t]=i[e][t].slice(),i[e][t].push(r)):i[e][t]=[r],this.setQueryParameters({numericRefinements:i})},getConjunctiveRefinements:function(e){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.facetsExcludes[e]||[]},removeNumericRefinement:function(n,r,e){if(void 0===e)return void 0!==r?this.isNumericRefined(n,r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===n&&e.op===r})}):this:this.isNumericRefined(n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===n})}):this;var i=li(e);return this.isNumericRefined(n,r,i)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===n&&e.op===r&&kr(e.val,i)})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(a){if(Nr(a))return Ir(this.numericRefinements)?this.numericRefinements:{};if(Dr(a))return Ir(this.numericRefinements[a])?this.numericRefinements:_r(this.numericRefinements,a);if(te(a)){var s=!1,e=An(this.numericRefinements,function(e,t,r){var i={};return ot(t,function(e,t){var n=[];ot(e,function(e){a({val:e,op:t},r,"numeric")||n.push(e)}),Ir(n)?s=!0:(n.length!==e.length&&(s=!0),i[t]=n)}),Ir(i)||(e[r]=i),e},{});return s?e:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return fi.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:fi.addRefinement(this.facetsRefinements,e,t)})},addExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return fi.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:fi.addRefinement(this.facetsExcludes,e,t)})},addDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return fi.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:fi.addRefinement(this.disjunctiveFacetsRefinements,e,t)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(t)},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:_n(this.facets,function(e){return e!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:_n(this.disjunctiveFacets,function(e){return e!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:_n(this.hierarchicalFacets,function(e){return e.name!==t})}):this},removeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return fi.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:fi.removeRefinement(this.facetsRefinements,e,t)}):this},removeExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return fi.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:fi.removeRefinement(this.facetsExcludes,e,t)}):this},removeDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return fi.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:fi.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this},removeTagRefinement:function(t){if(!this.isTagRefined(t))return this;var e={tagRefinements:_n(this.tagRefinements,function(e){return e!==t})};return this.setQueryParameters(e)},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:fi.toggleRefinement(this.facetsRefinements,e,t)})},toggleExcludeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:fi.toggleRefinement(this.facetsExcludes,e,t)})},toggleDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:fi.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)})},toggleHierarchicalFacetRefinement:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),r={};return void 0!==this.hierarchicalFacetsRefinements[e]&&0<this.hierarchicalFacetsRefinements[e].length&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+n))?-1===t.indexOf(n)?r[e]=[]:r[e]=[t.slice(0,t.lastIndexOf(n))]:r[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ai({},r,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");var n={};return n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ai({},n,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))throw new Error(e+" is not refined.");var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:ai({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return-1<Er(this.disjunctiveFacets,e)},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return-1<Er(this.facets,e)},isFacetRefined:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return fi.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return fi.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return fi.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this.getHierarchicalRefinement(e);return t?-1!==Er(n,t):0<n.length},isNumericRefined:function(e,t,n){if(Nr(n)&&Nr(t))return!!this.numericRefinements[e];var r=this.numericRefinements[e]&&!Nr(this.numericRefinements[e][t]);if(Nr(n)||!r)return r;var i,a,s=li(n),o=!Nr((i=this.numericRefinements[e][t],a=s,Hr(i,function(e){return kr(e,a)})));return r&&o},isTagRefined:function(e){return-1!==Er(this.tagRefinements,e)},getRefinedDisjunctiveFacets:function(){var e=et(re(this.numericRefinements),this.disjunctiveFacets);return re(this.disjunctiveFacetsRefinements).concat(e).concat(this.getRefinedHierarchicalFacets())},getRefinedHierarchicalFacets:function(){return et(Rn(this.hierarchicalFacets,"name"),re(this.hierarchicalFacetsRefinements))},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return _n(this.disjunctiveFacets,function(e){return-1===Er(t,e)})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements"],getQueryParams:function(){var n=this.managedParameters,r={};return it(this,function(e,t){-1===Er(n,t)&&void 0!==e&&(r[t]=e)}),r},getQueryParameter:function(e){if(!this.hasOwnProperty(e))throw new Error("Parameter '"+e+"' is not an attribute of SearchParameters (http://algolia.github.io/algoliasearch-helper-js/docs/SearchParameters.html)");return this[e]},setQueryParameter:function(e,t){if(this[e]===t)return this;var n={};return n[e]=t,this.setQueryParameters(n)},setQueryParameters:function(n){if(!n)return this;var e=pi.validate(this,n);if(e)throw e;var r=pi._parseNumbers(n);return this.mutateMe(function(t){var e=re(n);return ot(e,function(e){t[e]=r[e]}),t})},filter:function(e){return function(n,e){var r={},t=_n(e,function(e){return-1!==e.indexOf("attribute:")}),i=Rn(t,function(e){return e.split(":")[1]});-1===Er(i,"*")?ot(i,function(e){n.isConjunctiveFacet(e)&&n.isFacetRefined(e)&&(r.facetsRefinements||(r.facetsRefinements={}),r.facetsRefinements[e]=n.facetsRefinements[e]),n.isDisjunctiveFacet(e)&&n.isDisjunctiveFacetRefined(e)&&(r.disjunctiveFacetsRefinements||(r.disjunctiveFacetsRefinements={}),r.disjunctiveFacetsRefinements[e]=n.disjunctiveFacetsRefinements[e]),n.isHierarchicalFacet(e)&&n.isHierarchicalFacetRefined(e)&&(r.hierarchicalFacetsRefinements||(r.hierarchicalFacetsRefinements={}),r.hierarchicalFacetsRefinements[e]=n.hierarchicalFacetsRefinements[e]);var t=n.getNumericRefinements(e);Ir(t)||(r.numericRefinements||(r.numericRefinements={}),r.numericRefinements[e]=n.numericRefinements[e])}):(Ir(n.numericRefinements)||(r.numericRefinements=n.numericRefinements),Ir(n.facetsRefinements)||(r.facetsRefinements=n.facetsRefinements),Ir(n.disjunctiveFacetsRefinements)||(r.disjunctiveFacetsRefinements=n.disjunctiveFacetsRefinements),Ir(n.hierarchicalFacetsRefinements)||(r.hierarchicalFacetsRefinements=n.hierarchicalFacetsRefinements));var a=_n(e,function(e){return-1===e.indexOf("attribute:")});return ot(a,function(e){r[e]=n[e]}),r}(this,e)},mutateMe:function(e){var t=new this.constructor(this);return e(t,this),t},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(e){return Hr(this.hierarchicalFacets,{name:e})},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))throw new Error("Cannot get the breadcrumb of an unknown hierarchical facet: `"+e+"`");var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),r=t.split(n);return Rn(r,ti)},toString:function(){return JSON.stringify(this,null,2)}};var di=pi,mi=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},gi=function(e){return null==e?[]:(n=re(t=e),ie(n,function(e){return t[e]}));var t,n},vi=Math.max,yi=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,a=Xt(e),s=void 0!==t,o=null===t,c=t==t,u=Xt(t);if(!o&&!u&&!a&&t<e||a&&s&&c&&!o&&!u||r&&s&&c||!n&&c||!i)return 1;if(!r&&!a&&!u&&e<t||u&&n&&i&&!r&&!a||o&&n&&i||!s&&i||!c)return-1}return 0},bi=function(e,r,n){var i=-1;return r=ie(r.length?r:[Ue],$(wn)),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(xn(e,function(t,e,n){return{criteria:ie(r,function(e){return e(t)}),index:++i,value:t}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,s=i.length,o=n.length;++r<s;){var c=yi(i[r],a[r]);if(c)return o<=r?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})},wi=function(e,t,n,r){return null==e?[]:(k(t)||(t=null==t?[]:[t]),k(n=r?void 0:n)||(n=null==n?[]:[n]),bi(e,t,n))},_i=Pt&&new Pt,xi=_i?function(e,t){return _i.set(e,t),e}:Ue,Ri=function(r){return function(){var e=arguments;switch(e.length){case 0:return new r;case 1:return new r(e[0]);case 2:return new r(e[0],e[1]);case 3:return new r(e[0],e[1],e[2]);case 4:return new r(e[0],e[1],e[2],e[3]);case 5:return new r(e[0],e[1],e[2],e[3],e[4]);case 6:return new r(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=zn(r.prototype),n=r.apply(t,e);return ee(n)?n:t}},Si=Math.max,ji=function(e,t,n,r){for(var i=-1,a=e.length,s=n.length,o=-1,c=t.length,u=Si(a-s,0),l=Array(c+u),h=!r;++o<c;)l[o]=t[o];for(;++i<s;)(h||i<a)&&(l[n[i]]=e[i]);for(;u--;)l[o++]=e[i++];return l},Ai=Math.max,Ci=function(e,t,n,r){for(var i=-1,a=e.length,s=-1,o=n.length,c=-1,u=t.length,l=Ai(a-o,0),h=Array(l+u),f=!r;++i<l;)h[i]=e[i];for(var p=i;++c<u;)h[p+c]=t[c];for(;++s<o;)(f||i<a)&&(h[p+n[s]]=e[i++]);return h},Ti=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r};function Pi(){}function Ei(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}var Fi=(Ei.prototype=zn(Pi.prototype)).constructor=Ei,Oi=_i?function(e){return _i.get(e)}:function(){},Ii={},ki=Object.prototype.hasOwnProperty;function Ni(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}var Di=(Ni.prototype=zn(Pi.prototype)).constructor=Ni,qi=Object.prototype.hasOwnProperty;function Li(e){if(A(e)&&!k(e)&&!(e instanceof Fi)){if(e instanceof Di)return e;if(qi.call(e,"__wrapped__"))return function(e){if(e instanceof Fi)return e.clone();var t=new Di(e.__wrapped__,e.__chain__);return t.__actions__=Nn(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}(e)}return new Di(e)}var Hi=(Li.prototype=Pi.prototype).constructor=Li,Ui=function(e){var t=function(e){for(var t=e.name+"",n=Ii[t],r=ki.call(Ii,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}(e),n=Hi[t];if("function"!=typeof n||!(t in Fi.prototype))return!1;if(e===n)return!0;var r=Oi(n);return!!r&&e===r[0]},Mi=ze(xi),$i=/\{\n\/\* \[wrapped with (.+)\] \*/,Qi=/,? & /,Bi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Wi=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Vi=function(e,t,n){var r,i,a,s=t+"";return Je(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(1<n?"& ":"")+t[r],t=t.join(2<n?", ":" "),e.replace(Bi,"{\n/* [wrapped with "+t+"] */\n")}(s,(a=s.match($i),r=a?a[1].split(Qi):[],i=n,at(Wi,function(e){var t="_."+e[0];i&e[1]&&!De(r,t)&&r.push(t)}),r.sort())))},Ki=function(e,t,n,r,i,a,s,o,c,u){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var h=[e,t,i,l?a:void 0,l?s:void 0,l?void 0:a,l?void 0:s,o,c,u],f=n.apply(void 0,h);return Ui(e)&&Mi(f,h),f.placeholder=r,Vi(f,e,t)},zi=function(e){return e.placeholder},Ji=Math.min,Gi=function(e,t){for(var n=e.length,r=Ji(t.length,n),i=Nn(e);r--;){var a=t[r];e[r]=L(a,n)?i[a]:void 0}return e},Xi="__lodash_placeholder__",Yi=function(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var s=e[n];s!==t&&s!==Xi||(e[n]=Xi,a[i++]=n)}return a},Zi=1,ea=2,ta=8,na=16,ra=128,ia=512;var aa=function u(l,h,f,p,d,m,g,v,y,b){var w=h&ra,_=h&Zi,x=h&ea,R=h&(ta|na),S=h&ia,j=x?void 0:Ri(l);return function e(){for(var t=arguments.length,n=Array(t),r=t;r--;)n[r]=arguments[r];if(R)var i=zi(e),a=Ti(n,i);if(p&&(n=ji(n,p,d,R)),m&&(n=Ci(n,m,g,R)),t-=a,R&&t<b){var s=Yi(n,i);return Ki(l,h,u,e.placeholder,f,n,s,v,y,b-t)}var o=_?f:this,c=x?o[l]:l;return t=n.length,v?n=Gi(n,v):S&&1<t&&n.reverse(),w&&y<t&&(n.length=y),this&&this!==T&&this instanceof e&&(c=j||Ri(c)),c.apply(o,n)}},sa="__lodash_placeholder__",oa=Math.min,ca=Math.max,ua=function(e,t,n,r,i,a,s,o){var c=2&t;if(!c&&"function"!=typeof e)throw new TypeError("Expected a function");var u=r?r.length:0;if(u||(t&=-97,r=i=void 0),s=void 0===s?s:ca(Tr(s),0),o=void 0===o?o:Tr(o),u-=i?i.length:0,64&t){var l=r,h=i;r=i=void 0}var f,p,d,m,g,v,y,b,w,_,x,R,S,j=c?void 0:Oi(e),A=[e,t,n,r,i,l,h,a,s,o];if(j&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,s=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!s)return;1&r&&(e[2]=t[2],i|=1&n?0:4);var o=t[3];if(o){var c=e[3];e[3]=c?ji(c,o,t[4]):o,e[4]=c?Yi(e[3],sa):t[4]}(o=t[5])&&(c=e[5],e[5]=c?Ci(c,o,t[6]):o,e[6]=c?Yi(e[5],sa):t[6]),(o=t[7])&&(e[7]=o),128&r&&(e[8]=null==e[8]?t[8]:oa(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(A,j),e=A[0],t=A[1],n=A[2],r=A[3],i=A[4],!(o=A[9]=void 0===A[9]?c?0:e.length:ca(A[9]-u,0))&&24&t&&(t&=-25),t&&1!=t)C=8==t||16==t?(x=t,R=o,S=Ri(_=e),function e(){for(var t=arguments.length,n=Array(t),r=t,i=zi(e);r--;)n[r]=arguments[r];var a=t<3&&n[0]!==i&&n[t-1]!==i?[]:Yi(n,i);return(t-=a.length)<R?Ki(_,x,aa,e.placeholder,void 0,n,a,void 0,void 0,R-t):Me(this&&this!==T&&this instanceof e?S:_,this,n)}):32!=t&&33!=t||i.length?aa.apply(void 0,A):(v=n,y=r,b=1&t,w=Ri(g=e),function e(){for(var t=-1,n=arguments.length,r=-1,i=y.length,a=Array(i+n),s=this&&this!==T&&this instanceof e?w:g;++r<i;)a[r]=y[r];for(;n--;)a[r++]=arguments[++t];return Me(s,b?v:this,a)});else var C=(p=n,d=1&t,m=Ri(f=e),function e(){return(this&&this!==T&&this instanceof e?m:f).apply(d?p:this,arguments)});return Vi((j?xi:Mi)(C,A),e,t)},la=Ge(function(e,t){var n=Yi(t,zi(la));return ua(e,32,void 0,t,n)});la.placeholder={};var ha=la,fa=Ge(function(e,t){var n=Yi(t,zi(fa));return ua(e,64,void 0,t,n)});fa.placeholder={};var pa=fa;function da(e,r){return An(e,function(e,o){var t=o.split(":");if(r&&1===t.length){var n=Hr(r,function(e){return t=e,n=o[0],t=fn(t),r=null==r?0:(i=Tr(r),a=0,s=t.length,i==i&&(void 0!==s&&(i=i<=s?i:s),void 0!==a&&(i=a<=i?i:a)),i),n=hn(n),t.slice(r,r+n.length)==n;var t,n,r,i,a,s});n&&(t=n.split(":"))}return e[0].push(t[0]),e[1].push(t[1]),e},[[],[]])}var ma=function(e,t,n,r){if(!ee(e))return e;for(var i=-1,a=(t=pn(t,e)).length,s=a-1,o=e;null!=o&&++i<a;){var c=dn(t[i]),u=n;if(i!=s){var l=o[c];void 0===(u=r?r(l,c,o):void 0)&&(u=ee(l)?l:L(t[i+1])?[]:{})}Pn(o,c,u),o=o[c]}return e},ga=function(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var s=t[r],o=mn(e,s);n(o,s)&&ma(a,pn(s,e),o)}return a},va=function(u){return function(e,t){var p,d,m,g,v,n=u.hierarchicalFacets[t],r=u.hierarchicalFacetsRefinements[n.name]&&u.hierarchicalFacetsRefinements[n.name][0]||"",i=u._getHierarchicalFacetSeparator(n),a=u._getHierarchicalRootPath(n),s=u._getHierarchicalShowParentLevel(n),o=(p=da(u._getHierarchicalFacetSortBy(n)),d=i,m=a,g=s,v=r,function(e,t,n){var r,i,a,s,o,c,u,l=e;if(0<n){var h=0;for(l=e;h<n;)l=l&&Hr(l.data,{isRefined:!0}),h++}if(l){var f=(a=l.path||m,s=v,o=d,c=m,u=g,function(e,t){return(!c||0===t.indexOf(c)&&c!==t)&&(!c&&-1===t.indexOf(o)||c&&t.split(o).length-c.split(o).length==1||-1===t.indexOf(o)&&-1===s.indexOf(o)||0===s.indexOf(t)||0===t.indexOf(a+o)&&(u||0===t.indexOf(s)))});l.data=wi(Rn(function(e,n){if(null==e)return{};var t=ie(Ln(e),function(e){return[e]});return n=wn(n),ga(e,t,function(e,t){return n(e,t[0])})}(t.data,f),(r=d,i=v,function(e,t){return{name:ti(ar(t.split(r))),path:t,count:e,isRefined:i===t||0===i.indexOf(t+r),data:null}})),p[0],p[1])}return e}),c=e;return a&&(c=e.slice(a.split(i).length)),An(c,o,{name:u.hierarchicalFacets[t].name,count:null,isRefined:!0,path:null,data:null})}};function ya(e){var n={};return ot(e,function(e,t){n[e]=t}),n}function ba(e,t,n){t&&t[n]&&(e.stats=t[n])}function wa(l,n){var e,t,h=n[0];this._rawResults=n,this.query=h.query,this.parsedQuery=h.parsedQuery,this.hits=h.hits,this.index=h.index,this.hitsPerPage=h.hitsPerPage,this.nbHits=h.nbHits,this.nbPages=h.nbPages,this.page=h.page,this.processingTimeMS=(t="processingTimeMS",(e=n)&&e.length?function(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);void 0!==a&&(n=void 0===n?a:n+a)}return n}(e,wn(t)):0),this.aroundLatLng=h.aroundLatLng,this.automaticRadius=h.automaticRadius,this.serverUsed=h.serverUsed,this.timeoutCounts=h.timeoutCounts,this.timeoutHits=h.timeoutHits,this.exhaustiveFacetsCount=h.exhaustiveFacetsCount,this.exhaustiveNbHits=h.exhaustiveNbHits,this.userData=h.userData,this.queryID=h.queryID,this.disjunctiveFacets=[],this.hierarchicalFacets=Rn(l.hierarchicalFacets,function(){return[]}),this.facets=[];var r=l.getRefinedDisjunctiveFacets(),f=ya(l.facets),p=ya(l.disjunctiveFacets),i=1,d=this;ot(h.facets,function(e,t){var n,r,i=(n=l.hierarchicalFacets,r=t,Hr(n,function(e){return function(e,t,n,r){e=ne(e)?e:gi(e),n=n&&!r?Tr(n):0;var i=e.length;return n<0&&(n=vi(i+n,0)),Dr(e)?n<=i&&-1<e.indexOf(t,n):!!i&&-1<Ne(e,t,n)}(e.attributes,r)}));if(i){var a=i.attributes.indexOf(t),s=Lr(l.hierarchicalFacets,{name:i.name});d.hierarchicalFacets[s][a]={attribute:t,data:e,exhaustive:h.exhaustiveFacetsCount}}else{var o,c=-1!==Er(l.disjunctiveFacets,t),u=-1!==Er(l.facets,t);c&&(o=p[t],d.disjunctiveFacets[o]={name:t,data:e,exhaustive:h.exhaustiveFacetsCount},ba(d.disjunctiveFacets[o],h.facets_stats,t)),u&&(o=f[t],d.facets[o]={name:t,data:e,exhaustive:h.exhaustiveFacetsCount},ba(d.facets[o],h.facets_stats,t))}}),this.hierarchicalFacets=mi(this.hierarchicalFacets),ot(r,function(e){var a=n[i],s=l.getHierarchicalFacetByName(e);ot(a.facets,function(e,t){var n;if(s){n=Lr(l.hierarchicalFacets,{name:s.name});var r=Lr(d.hierarchicalFacets[n],{attribute:t});if(-1===r)return;d.hierarchicalFacets[n][r].data=ui({},d.hierarchicalFacets[n][r].data,e)}else{n=p[t];var i=h.facets&&h.facets[t]||{};d.disjunctiveFacets[n]={name:t,data:ai({},e,i),exhaustive:a.exhaustiveFacetsCount},ba(d.disjunctiveFacets[n],a.facets_stats,t),l.disjunctiveFacetsRefinements[t]&&ot(l.disjunctiveFacetsRefinements[t],function(e){!d.disjunctiveFacets[n].data[e]&&-1<Er(l.disjunctiveFacetsRefinements[t],e)&&(d.disjunctiveFacets[n].data[e]=0)})}}),i++}),ot(l.getRefinedHierarchicalFacets(),function(e){var s=l.getHierarchicalFacetByName(e),o=l._getHierarchicalFacetSeparator(s),c=l.getHierarchicalRefinement(e);if(!(0===c.length||c[0].split(o).length<2)){var t=n[i];ot(t.facets,function(e,t){var n=Lr(l.hierarchicalFacets,{name:s.name}),r=Lr(d.hierarchicalFacets[n],{attribute:t});if(-1!==r){var i={};if(0<c.length){var a=c[0].split(o)[0];i[a]=d.hierarchicalFacets[n][r].data[a]}d.hierarchicalFacets[n][r].data=ai(i,e,d.hierarchicalFacets[n][r].data)}}),i++}}),ot(l.facetsExcludes,function(e,t){var n=f[t];d.facets[n]={name:t,data:h.facets[t],exhaustive:h.exhaustiveFacetsCount},ot(e,function(e){d.facets[n]=d.facets[n]||{name:t},d.facets[n].data=d.facets[n].data||{},d.facets[n].data[e]=0})}),this.hierarchicalFacets=Rn(this.hierarchicalFacets,va(l)),this.facets=mi(this.facets),this.disjunctiveFacets=mi(this.disjunctiveFacets),this._state=l}function _a(e,t){if(!t.data||0===t.data.length)return t;var n=e(Rn(t.data,ha(_a,e)));return ui({},t,{data:n})}function xa(e,t){return t.sort(e)}function Ra(e,t){var n=Hr(e,{name:t});return n&&n.stats}function Sa(e,t,n,r,i){var a=Hr(i,{name:n});return{type:t,attributeName:n,name:r,count:gn(a,"data["+r+"]")||0,exhaustive:gn(a,"exhaustive")||!1}}wa.prototype.getFacetByName=function(e){var t={name:e};return Hr(this.facets,t)||Hr(this.disjunctiveFacets,t)||Hr(this.hierarchicalFacets,t)},wa.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],wa.prototype.getFacetValues=function(e,t){var n=function(n,r){var e={name:r};if(n._state.isConjunctiveFacet(r)){var t=Hr(n.facets,e);return t?Rn(t.data,function(e,t){return{name:t,count:e,isRefined:n._state.isFacetRefined(r,t),isExcluded:n._state.isExcludeRefined(r,t)}}):[]}if(n._state.isDisjunctiveFacet(r)){var i=Hr(n.disjunctiveFacets,e);return i?Rn(i.data,function(e,t){return{name:t,count:e,isRefined:n._state.isDisjunctiveFacetRefined(r,t)}}):[]}if(n._state.isHierarchicalFacet(r))return Hr(n.hierarchicalFacets,e)}(this,e);if(!n)throw new Error(e+" is not a retrieved facet.");var r=ai({},t,{sortBy:wa.DEFAULT_SORT});if(Array.isArray(r.sortBy)){var i=da(r.sortBy,wa.DEFAULT_SORT);return Array.isArray(n)?wi(n,i[0],i[1]):_a(pa(wi,i[0],i[1]),n)}if(te(r.sortBy))return Array.isArray(n)?n.sort(r.sortBy):_a(ha(xa,r.sortBy),n);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},wa.prototype.getFacetStats=function(e){if(this._state.isConjunctiveFacet(e))return Ra(this.facets,e);if(this._state.isDisjunctiveFacet(e))return Ra(this.disjunctiveFacets,e);throw new Error(e+" is not present in `facets` or `disjunctiveFacets`")},wa.prototype.getRefinements=function(){var n=this._state,r=this,i=[];return ot(n.facetsRefinements,function(e,t){ot(e,function(e){i.push(Sa(0,"facet",t,e,r.facets))})}),ot(n.facetsExcludes,function(e,t){ot(e,function(e){i.push(Sa(0,"exclude",t,e,r.facets))})}),ot(n.disjunctiveFacetsRefinements,function(e,t){ot(e,function(e){i.push(Sa(0,"disjunctive",t,e,r.disjunctiveFacets))})}),ot(n.hierarchicalFacetsRefinements,function(e,t){ot(e,function(e){i.push(function(e,t,n,r){for(var i=Hr(r,{name:t}),a=e.getHierarchicalFacetByName(t),s=n.split(a.separator),o=s[s.length-1],c=0;void 0!==i&&c<s.length;++c)i=Hr(i.data,{name:s[c]});return{type:"hierarchical",attributeName:t,name:o,count:gn(i,"count")||0,exhaustive:gn(i,"exhaustive")||!1}}(n,t,e,r.hierarchicalFacets))})}),ot(n.numericRefinements,function(e,n){ot(e,function(e,t){ot(e,function(e){i.push({type:"numeric",attributeName:n,name:e,numericValue:e,operator:t})})})}),ot(n.tagRefinements,function(e){i.push({type:"tag",attributeName:"_tags",name:e})}),i};var ja=wa;function Aa(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var Ca=Aa;function Ta(e){return"function"==typeof e}function Pa(e){return"object"==typeof e&&null!==e}function Ea(e){return void 0===e}(Aa.EventEmitter=Aa).prototype._events=void 0,Aa.prototype._maxListeners=void 0,Aa.defaultMaxListeners=10,Aa.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},Aa.prototype.emit=function(e){var t,n,r,i,a,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||Pa(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var o=new Error('Uncaught, unspecified "error" event. ('+t+")");throw o.context=t,o}if(Ea(n=this._events[e]))return!1;if(Ta(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(Pa(n))for(i=Array.prototype.slice.call(arguments,1),r=(s=n.slice()).length,a=0;a<r;a++)s[a].apply(this,i);return!0},Aa.prototype.on=Aa.prototype.addListener=function(e,t){var n;if(!Ta(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,Ta(t.listener)?t.listener:t),this._events[e]?Pa(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,Pa(this._events[e])&&!this._events[e].warned&&(n=Ea(this._maxListeners)?Aa.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},Aa.prototype.once=function(e,t){if(!Ta(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},Aa.prototype.removeListener=function(e,t){var n,r,i,a;if(!Ta(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||Ta(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(Pa(n)){for(a=i;0<a--;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},Aa.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(Ta(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},Aa.prototype.listeners=function(e){return this._events&&this._events[e]?Ta(this._events[e])?[this._events[e]]:this._events[e].slice():[]},Aa.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(Ta(t))return 1;if(t)return t.length}return 0},Aa.listenerCount=function(e,t){return e.listenerCount(t)};var Fa=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};function Oa(e,t){this.main=e,this.fn=t,this.lastResults=null}Fa(Oa,Ca.EventEmitter),Oa.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},Oa.prototype.getModifiedState=function(e){return this.fn(e)};var Ia=Oa,ka={_getQueries:function(i,a){var s=[];return s.push({indexName:i,params:ka._getHitsSearchParams(a)}),ot(a.getRefinedDisjunctiveFacets(),function(e){s.push({indexName:i,params:ka._getDisjunctiveFacetSearchParams(a,e)})}),ot(a.getRefinedHierarchicalFacets(),function(e){var t=a.getHierarchicalFacetByName(e),n=a.getHierarchicalRefinement(e),r=a._getHierarchicalFacetSeparator(t);0<n.length&&1<n[0].split(r).length&&s.push({indexName:i,params:ka._getDisjunctiveFacetSearchParams(a,e,!0)})}),s},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(ka._getHitsHierarchicalFacetsAttributes(e)),n=ka._getFacetFilters(e),r=ka._getNumericFilters(e),i={facets:t,tagFilters:ka._getTagFilters(e)};return 0<n.length&&(i.facetFilters=n),0<r.length&&(i.numericFilters=r),ui(e.getQueryParams(),i)},_getDisjunctiveFacetSearchParams:function(e,t,n){var r=ka._getFacetFilters(e,t,n),i=ka._getNumericFilters(e,t),a={hitsPerPage:1,page:0,attributesToRetrieve:[],attributesToHighlight:[],attributesToSnippet:[],tagFilters:ka._getTagFilters(e),analytics:!1,clickAnalytics:!1},s=e.getHierarchicalFacetByName(t);return a.facets=s?ka._getDisjunctiveHierarchicalFacetAttribute(e,s,n):t,0<i.length&&(a.numericFilters=i),0<r.length&&(a.facetFilters=r),ui(e.getQueryParams(),a)},_getNumericFilters:function(e,t){if(e.numericFilters)return e.numericFilters;var i=[];return ot(e.numericRefinements,function(e,r){ot(e,function(e,n){t!==r&&ot(e,function(e){if(Array.isArray(e)){var t=Rn(e,function(e){return r+n+e});i.push(t)}else i.push(r+n+e)})})}),i},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(c,u,l){var h=[];return ot(c.facetsRefinements,function(e,t){ot(e,function(e){h.push(t+":"+e)})}),ot(c.facetsExcludes,function(e,t){ot(e,function(e){h.push(t+":-"+e)})}),ot(c.disjunctiveFacetsRefinements,function(e,t){if(t!==u&&e&&0!==e.length){var n=[];ot(e,function(e){n.push(t+":"+e)}),h.push(n)}}),ot(c.hierarchicalFacetsRefinements,function(e,t){var n=e[0];if(void 0!==n){var r,i,a=c.getHierarchicalFacetByName(t),s=c._getHierarchicalFacetSeparator(a),o=c._getHierarchicalRootPath(a);if(u===t){if(-1===n.indexOf(s)||!o&&!0===l||o&&o.split(s).length===n.split(s).length)return;n=o?(i=o.split(s).length-1,o):(i=n.split(s).length-2,n.slice(0,n.lastIndexOf(s))),r=a.attributes[i]}else i=n.split(s).length-1,r=a.attributes[i];r&&h.push([r+":"+n])}}),h},_getHitsHierarchicalFacetsAttributes:function(s){return An(s.hierarchicalFacets,function(e,t){var n=s.getHierarchicalRefinement(t.name)[0];if(!n)return e.push(t.attributes[0]),e;var r=s._getHierarchicalFacetSeparator(t),i=n.split(r).length,a=t.attributes.slice(0,i+1);return e.concat(a)},[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,n){var r=e._getHierarchicalFacetSeparator(t);if(!0===n){var i=e._getHierarchicalRootPath(t),a=0;return i&&(a=i.split(r).length),[t.attributes[a]]}var s=(e.getHierarchicalRefinement(t.name)[0]||"").split(r).length-1;return t.attributes.slice(0,1+s)},getSearchForFacetQuery:function(e,t,n,r){var i=r.isDisjunctiveFacet(e)?r.clearRefinements(e):r,a={facetQuery:t,facetName:e};return"number"==typeof n&&(a.maxFacetHits=n),ui(ka._getHitsSearchParams(i),a)}},Na=ka;function Da(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n}function qa(e,t){rs.apply(e,ns(t)?t:[t])}function La(e,t,n,r,i,a,s,o,c,u,l,h,f){var p=e;if("function"==typeof s?p=s(t,p):p instanceof Date?p=u(p):"comma"===n&&ns(p)&&(p=p.join(",")),null===p){if(r)return a&&!h?a(t,as.encoder,f):t;p=""}if("string"==typeof p||"number"==typeof p||"boolean"==typeof p||Ga.isBuffer(p))return a?[l(h?t:a(t,as.encoder,f))+"="+l(a(p,as.encoder,f))]:[l(t)+"="+l(String(p))];var d,m=[];if(void 0===p)return m;if(ns(s))d=s;else{var g=Object.keys(p);d=o?g.sort(o):g}for(var v=0;v<d.length;++v){var y=d[v];i&&null===p[y]||(ns(p)?qa(m,La(p[y],"function"==typeof n?n(t,y):t,n,r,i,a,s,o,c,u,l,h,f)):qa(m,La(p[y],t+(c?"."+y:"["+y+"]"),n,r,i,a,s,o,c,u,l,h,f)))}return m}function Ha(e,u,t){if(e){var n=t.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,r=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(n),a=i?n.slice(0,i.index):n,s=[];if(a){if(!t.plainObjects&&ss.call(Object.prototype,a)&&!t.allowPrototypes)return;s.push(a)}for(var o=0;null!==(i=r.exec(n))&&o<t.depth;){if(o+=1,!t.plainObjects&&ss.call(Object.prototype,i[1].slice(1,-1))&&!t.allowPrototypes)return;s.push(i[1])}return i&&s.push("["+n.slice(i.index)+"]"),function(e,t,n){for(var r=u,i=e.length-1;0<=i;--i){var a,s=e[i];if("[]"===s&&n.parseArrays)a=[].concat(r);else{a=n.plainObjects?Object.create(null):{};var o="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(o,10);n.parseArrays||""!==o?!isNaN(c)&&s!==o&&String(c)===o&&0<=c&&n.parseArrays&&c<=n.arrayLimit?(a=[])[c]=r:a[o]=r:a={0:r}}r=a}return r}(s,0,t)}}var Ua,Ma,$a=Object.prototype.toString,Qa=(Ua=function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=$a.call(t)),e[t]=n},Ma=Be(Ue),function(e,t){return n=e,r=Ua,i=Ma(t),a={},nt(n,function(e,t,n){r(a,i(e),t,n)}),a;var n,r,i,a}),Ba={advancedSyntax:"aS",allowTyposOnNumericTokens:"aTONT",analyticsTags:"aT",analytics:"a",aroundLatLngViaIP:"aLLVIP",aroundLatLng:"aLL",aroundPrecision:"aP",aroundRadius:"aR",attributesToHighlight:"aTH",attributesToRetrieve:"aTR",attributesToSnippet:"aTS",disjunctiveFacetsRefinements:"dFR",disjunctiveFacets:"dF",distinct:"d",facetsExcludes:"fE",facetsRefinements:"fR",facets:"f",getRankingInfo:"gRI",hierarchicalFacetsRefinements:"hFR",hierarchicalFacets:"hF",highlightPostTag:"hPoT",highlightPreTag:"hPrT",hitsPerPage:"hPP",ignorePlurals:"iP",index:"idx",insideBoundingBox:"iBB",insidePolygon:"iPg",length:"l",maxValuesPerFacet:"mVPF",minimumAroundRadius:"mAR",minProximity:"mP",minWordSizefor1Typo:"mWS1T",minWordSizefor2Typos:"mWS2T",numericFilters:"nF",numericRefinements:"nR",offset:"o",optionalWords:"oW",page:"p",queryType:"qT",query:"q",removeWordsIfNoResults:"rWINR",replaceSynonymsInHighlight:"rSIH",restrictSearchableAttributes:"rSA",synonyms:"s",tagFilters:"tF",tagRefinements:"tR",typoTolerance:"tT",optionalTagFilters:"oTF",optionalFacetFilters:"oFF",snippetEllipsisText:"sET",disableExactOnAttributes:"dEOA",enableExactOnSingleWordQuery:"eEOSWQ"},Wa=Qa(Ba),Va={ENCODED_PARAMETERS:re(Wa),decode:function(e){return Wa[e]},encode:function(e){return Ba[e]}},Ka=Object.prototype.hasOwnProperty,za=Array.isArray,Ja=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),Ga={arrayToObject:Da,assign:function(e,n){return Object.keys(n).reduce(function(e,t){return e[t]=n[t],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],a=i.obj[i.prop],s=Object.keys(a),o=0;o<s.length;++o){var c=s[o],u=a[c];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:a,prop:c}),n.push(u))}return function(e){for(;1<e.length;){var t=e.pop(),n=t.obj[t.prop];if(za(n)){for(var r=[],i=0;i<n.length;++i)void 0!==n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n){if(0===e.length)return e;var r="string"==typeof e?e:String(e);if("iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var i="",a=0;a<r.length;++a){var s=r.charCodeAt(a);45===s||46===s||95===s||126===s||48<=s&&s<=57||65<=s&&s<=90||97<=s&&s<=122?i+=r.charAt(a):s<128?i+=Ja[s]:s<2048?i+=Ja[192|s>>6]+Ja[128|63&s]:s<55296||57344<=s?i+=Ja[224|s>>12]+Ja[128|s>>6&63]+Ja[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&r.charCodeAt(a)),i+=Ja[240|s>>18]+Ja[128|s>>12&63]+Ja[128|s>>6&63]+Ja[128|63&s])}return i},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function r(i,a,s){if(!a)return i;if("object"!=typeof a){if(za(i))i.push(a);else{if(!i||"object"!=typeof i)return[i,a];(s&&(s.plainObjects||s.allowPrototypes)||!Ka.call(Object.prototype,a))&&(i[a]=!0)}return i}if(!i||"object"!=typeof i)return[i].concat(a);var e=i;return za(i)&&!za(a)&&(e=Da(i,s)),za(i)&&za(a)?(a.forEach(function(e,t){if(Ka.call(i,t)){var n=i[t];n&&"object"==typeof n&&e&&"object"==typeof e?i[t]=r(n,e,s):i.push(e)}else i[t]=e}),i):Object.keys(a).reduce(function(e,t){var n=a[t];return Ka.call(e,t)?e[t]=r(e[t],n,s):e[t]=n,e},e)}},Xa=String.prototype.replace,Ya=/%20/g,Za={default:"RFC3986",formatters:{RFC1738:function(e){return Xa.call(e,Ya,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},es=Object.prototype.hasOwnProperty,ts={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},ns=Array.isArray,rs=Array.prototype.push,is=Date.prototype.toISOString,as={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Ga.encode,encodeValuesOnly:!1,formatter:Za.formatters[Za.default],indices:!1,serializeDate:function(e){return is.call(e)},skipNulls:!1,strictNullHandling:!1},ss=Object.prototype.hasOwnProperty,os={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Ga.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},cs={formats:Za,parse:function(e,t){var n=function(e){if(!e)return os;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?os.charset:e.charset;return{allowDots:void 0===e.allowDots?os.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:os.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:os.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:os.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:os.comma,decoder:"function"==typeof e.decoder?e.decoder:os.decoder,delimiter:"string"==typeof e.delimiter||Ga.isRegExp(e.delimiter)?e.delimiter:os.delimiter,depth:"number"==typeof e.depth?e.depth:os.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:os.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:os.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:os.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:os.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?function(e,t){var n,r={},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=t.parameterLimit===1/0?void 0:t.parameterLimit,s=i.split(t.delimiter,a),o=-1,c=t.charset;if(t.charsetSentinel)for(n=0;n<s.length;++n)0===s[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===s[n]?c="utf-8":"utf8=%26%2310003%3B"===s[n]&&(c="iso-8859-1"),o=n,n=s.length);for(n=0;n<s.length;++n)if(n!==o){var u,l,h=s[n],f=h.indexOf("]="),p=-1===f?h.indexOf("="):f+1;(l=-1===p?(u=t.decoder(h,os.decoder,c),t.strictNullHandling?null:""):(u=t.decoder(h.slice(0,p),os.decoder,c),t.decoder(h.slice(p+1),os.decoder,c)))&&t.interpretNumericEntities&&"iso-8859-1"===c&&(l=l.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),l&&t.comma&&-1<l.indexOf(",")&&(l=l.split(",")),ss.call(r,u)?r[u]=Ga.combine(r[u],l):r[u]=l}return r}(e,n):e,i=n.plainObjects?Object.create(null):{},a=Object.keys(r),s=0;s<a.length;++s){var o=a[s],c=Ha(o,r[o],n);i=Ga.merge(i,c,n)}return Ga.compact(i)},stringify:function(e,t){var n,r=e,i=function(e){if(!e)return as;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||as.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Za.default;if(void 0!==e.format){if(!es.call(Za.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=Za.formatters[n],i=as.filter;return"function"!=typeof e.filter&&!ns(e.filter)||(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:as.addQueryPrefix,allowDots:void 0===e.allowDots?as.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:as.charsetSentinel,delimiter:void 0===e.delimiter?as.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:as.encode,encoder:"function"==typeof e.encoder?e.encoder:as.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:as.encodeValuesOnly,filter:i,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:as.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:as.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:as.strictNullHandling}}(t);"function"==typeof i.filter?r=(0,i.filter)("",r):ns(i.filter)&&(n=i.filter);var a,s=[];if("object"!=typeof r||null===r)return"";a=t&&t.arrayFormat in ts?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var o=ts[a];n||(n=Object.keys(r)),i.sort&&n.sort(i.sort);for(var c=0;c<n.length;++c){var u=n[c];i.skipNulls&&null===r[u]||qa(s,La(r[u],u,o,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.formatter,i.encodeValuesOnly,i.charset))}var l=s.join(i.delimiter),h=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),0<l.length?h+l:""}},us=Ge(function(e,t,n){var r=1;if(n.length){var i=Yi(n,zi(us));r|=32}return ua(e,r,t,n,i)});us.placeholder={};var ls=us,hs=wr(function(e,t){return null==e?{}:ga(n=e,t,function(e,t){return yn(n,t)});var n}),fs=function(e,r){var i={};return r=wn(r),nt(e,function(e,t,n){Cn(i,r(e,t,n),e)}),i},ps=function(e,r){var i={};return r=wn(r),nt(e,function(e,t,n){Cn(i,t,r(e,t,n))}),i},ds=Ga.encode;function ms(e){return pr(e)?ps(e,ms):Array.isArray(e)?Rn(e,ms):Dr(e)?ds(e):e}var gs=["dFR","fR","nR","hFR","tR"],vs=Va.ENCODED_PARAMETERS;function ys(e,t,n,r){if(null!==e&&(n=n.replace(e,""),r=r.replace(e,"")),n=t[n]||n,r=t[r]||r,-1!==vs.indexOf(n)||-1!==vs.indexOf(r)){if("q"===n)return-1;if("q"===r)return 1;var i=-1!==gs.indexOf(n),a=-1!==gs.indexOf(r);if(i&&!a)return 1;if(a&&!i)return-1}return n.localeCompare(r)}var bs={getStateFromQueryString:function(e,t){var r=t&&t.prefix||"",n=t&&t.mapping||{},i=Qa(n),a=cs.parse(e),s=new RegExp("^"+r),o=fs(a,function(e,t){var n=r&&s.test(t)?t.replace(s,""):t;return Va.decode(i[n]||n)||n}),c=di._parseNumbers(o);return hs(c,di.PARAMETERS)},getUnrecognizedParametersInQueryString:function(e,t){var n=t&&t.prefix,r=t&&t.mapping||{},i=Qa(r),a={},s=cs.parse(e);if(n){var o=new RegExp("^"+n);ot(s,function(e,t){o.test(t)||(a[t]=e)})}else ot(s,function(e,t){Va.decode(i[t]||t)||(a[t]=e)});return a},getQueryStringFromState:function(e,t){var n=t&&t.moreAttributes,r=t&&t.prefix||"",i=t&&t.mapping||{},a=t&&t.safe||!1,s=Qa(i),o=a?e:ms(e),c=fs(o,function(e,t){var n=Va.encode(t);return r+(i[n]||n)}),u=""===r?null:new RegExp("^"+r),l=ls(ys,null,u,s);if(Ir(n))return cs.stringify(c,{encode:a,sort:l});var h=cs.stringify(c,{encode:a,sort:l}),f=cs.stringify(n,{encode:a});return h?h+"&"+f:f}};function ws(e,t,n){e.addAlgoliaAgent&&!Rs(e)&&e.addAlgoliaAgent("JS Helper (2.28.0)"),this.setClient(e);var r=n||{};r.index=t,this.state=di.make(r),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}function _s(e){if(e<0)throw new Error("Page requested below 0.");return this._change(this.state.setPage(e)),this}function xs(){return this.state.page}function Rs(e){var t=e._ua;return!!t&&-1!==t.indexOf("JS Helper")}Fa(ws,Ca.EventEmitter),ws.prototype.search=function(){return this._search(),this},ws.prototype.getQuery=function(){var e=this.state;return Na._getHitsSearchParams(e)},ws.prototype.searchOnce=function(e,t){var n=e?this.state.setQueryParameters(e):this.state,r=Na._getQueries(n.index,n),i=this;if(this._currentNbQueries++,this.emit("searchOnce",n),!t)return this.client.search(r).then(function(e){return i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),{content:new ja(n,e.results),state:n,_originalResponse:e}},function(e){throw i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),e});this.client.search(r).then(function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(null,new ja(n,e.results),n)}).catch(function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(e,null,n)})},ws.prototype.searchForFacetValues=function(t,e,n,r){var i="function"==typeof this.client.searchForFacetValues;if(!i&&"function"!=typeof this.client.initIndex)throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var a=this.state.setQueryParameters(r||{}),s=a.isDisjunctiveFacet(t),o=Na.getSearchForFacetQuery(t,e,n,a);this._currentNbQueries++;var c=this;return this.emit("searchForFacetValues",a,t,e),(i?this.client.searchForFacetValues([{indexName:a.index,params:o}]):this.client.initIndex(a.index).searchForFacetValues(o)).then(function(e){return c._currentNbQueries--,0===c._currentNbQueries&&c.emit("searchQueueEmpty"),(e=Array.isArray(e)?e[0]:e).facetHits=ot(e.facetHits,function(e){e.isRefined=s?a.isDisjunctiveFacetRefined(t,e.value):a.isFacetRefined(t,e.value)}),e},function(e){throw c._currentNbQueries--,0===c._currentNbQueries&&c.emit("searchQueueEmpty"),e})},ws.prototype.setQuery=function(e){return this._change(this.state.setPage(0).setQuery(e)),this},ws.prototype.clearRefinements=function(e){return this._change(this.state.setPage(0).clearRefinements(e)),this},ws.prototype.clearTags=function(){return this._change(this.state.setPage(0).clearTags()),this},ws.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change(this.state.setPage(0).addDisjunctiveFacetRefinement(e,t)),this},ws.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},ws.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change(this.state.setPage(0).addHierarchicalFacetRefinement(e,t)),this},ws.prototype.addNumericRefinement=function(e,t,n){return this._change(this.state.setPage(0).addNumericRefinement(e,t,n)),this},ws.prototype.addFacetRefinement=function(e,t){return this._change(this.state.setPage(0).addFacetRefinement(e,t)),this},ws.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},ws.prototype.addFacetExclusion=function(e,t){return this._change(this.state.setPage(0).addExcludeRefinement(e,t)),this},ws.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},ws.prototype.addTag=function(e){return this._change(this.state.setPage(0).addTagRefinement(e)),this},ws.prototype.removeNumericRefinement=function(e,t,n){return this._change(this.state.setPage(0).removeNumericRefinement(e,t,n)),this},ws.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change(this.state.setPage(0).removeDisjunctiveFacetRefinement(e,t)),this},ws.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},ws.prototype.removeHierarchicalFacetRefinement=function(e){return this._change(this.state.setPage(0).removeHierarchicalFacetRefinement(e)),this},ws.prototype.removeFacetRefinement=function(e,t){return this._change(this.state.setPage(0).removeFacetRefinement(e,t)),this},ws.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},ws.prototype.removeFacetExclusion=function(e,t){return this._change(this.state.setPage(0).removeExcludeRefinement(e,t)),this},ws.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},ws.prototype.removeTag=function(e){return this._change(this.state.setPage(0).removeTagRefinement(e)),this},ws.prototype.toggleFacetExclusion=function(e,t){return this._change(this.state.setPage(0).toggleExcludeFacetRefinement(e,t)),this},ws.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},ws.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},ws.prototype.toggleFacetRefinement=function(e,t){return this._change(this.state.setPage(0).toggleFacetRefinement(e,t)),this},ws.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},ws.prototype.toggleTag=function(e){return this._change(this.state.setPage(0).toggleTagRefinement(e)),this},ws.prototype.nextPage=function(){return this.setPage(this.state.page+1)},ws.prototype.previousPage=function(){return this.setPage(this.state.page-1)},ws.prototype.setCurrentPage=_s,ws.prototype.setPage=_s,ws.prototype.setIndex=function(e){return this._change(this.state.setPage(0).setIndex(e)),this},ws.prototype.setQueryParameter=function(e,t){return this._change(this.state.setPage(0).setQueryParameter(e,t)),this},ws.prototype.setState=function(e){return this._change(di.make(e)),this},ws.prototype.getState=function(e){return void 0===e?this.state:this.state.filter(e)},ws.prototype.getStateAsQueryString=function(e){var t=e&&e.filters||["query","attribute:*"],n=this.getState(t);return bs.getQueryStringFromState(n,e)},ws.getConfigurationFromQueryString=bs.getStateFromQueryString,ws.getForeignConfigurationInQueryString=bs.getUnrecognizedParametersInQueryString,ws.prototype.setStateFromQueryString=function(e,t){var n=t&&t.triggerChange||!1,r=bs.getStateFromQueryString(e,t),i=this.state.setQueryParameters(r);n?this.setState(i):this.overrideStateWithoutTriggeringChangeEvent(i)},ws.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new di(e),this},ws.prototype.isRefined=function(e,t){if(this.state.isConjunctiveFacet(e))return this.state.isFacetRefined(e,t);if(this.state.isDisjunctiveFacet(e))return this.state.isDisjunctiveFacetRefined(e,t);throw new Error(e+" is not properly defined in this helper configuration(use the facets or disjunctiveFacets keys to configure it)")},ws.prototype.hasRefinements=function(e){return!Ir(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},ws.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},ws.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},ws.prototype.hasTag=function(e){return this.state.isTagRefined(e)},ws.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},ws.prototype.getIndex=function(){return this.state.index},ws.prototype.getCurrentPage=xs,ws.prototype.getPage=xs,ws.prototype.getTags=function(){return this.state.tagRefinements},ws.prototype.getQueryParameter=function(e){return this.state.getQueryParameter(e)},ws.prototype.getRefinements=function(e){var n=[];if(this.state.isConjunctiveFacet(e)){var t=this.state.getConjunctiveRefinements(e);ot(t,function(e){n.push({value:e,type:"conjunctive"})});var r=this.state.getExcludeRefinements(e);ot(r,function(e){n.push({value:e,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(e)){var i=this.state.getDisjunctiveRefinements(e);ot(i,function(e){n.push({value:e,type:"disjunctive"})})}var a=this.state.getNumericRefinements(e);return ot(a,function(e,t){n.push({value:e,operator:t,type:"numeric"})}),n},ws.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},ws.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},ws.prototype._search=function(){var r=this.state,e=Na._getQueries(r.index,r),i=[{state:r,queriesCount:e.length,helper:this}];this.emit("search",r,this.lastResults);var t=Rn(this.derivedHelpers,function(e){var t=e.getModifiedState(r),n=Na._getQueries(t.index,t);return i.push({state:t,queriesCount:n.length,helper:e}),e.emit("search",t,e.lastResults),n}),n=e.concat(br(t)),a=this._queryId++;this._currentNbQueries++;try{this.client.search(n).then(this._dispatchAlgoliaResponse.bind(this,i,a)).catch(this._dispatchAlgoliaError.bind(this,a))}catch(e){this.emit("error",e)}},ws.prototype._dispatchAlgoliaResponse=function(e,t,n){if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty");var s=n.results.slice();ot(e,function(e){var t=e.state,n=e.queriesCount,r=e.helper,i=s.splice(0,n),a=r.lastResults=new ja(t,i);r.emit("result",a,t)})}},ws.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",t),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},ws.prototype.containsRefinement=function(e,t,n,r){return e||0!==t.length||0!==n.length||0!==r.length},ws.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&0<this.state.disjunctiveRefinements[e].length},ws.prototype._change=function(e){e!==this.state&&(this.state=e,this.emit("change",this.state,this.lastResults))},ws.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},ws.prototype.setClient=function(e){return this.client===e||(e.addAlgoliaAgent&&!Rs(e)&&e.addAlgoliaAgent("JS Helper (2.28.0)"),this.client=e),this},ws.prototype.getClient=function(){return this.client},ws.prototype.derive=function(e){var t=new Ia(this,e);return this.derivedHelpers.push(t),t},ws.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(-1===t)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)},ws.prototype.hasPendingRequests=function(){return 0<this._currentNbQueries};var Ss=ws;function js(e,t,n){return new Ss(e,t,n)}js.version="2.28.0",js.AlgoliaSearchHelper=Ss,js.SearchParameters=di,js.SearchResults=ja,js.url=bs;var As=js;function Cs(e){var t,n="string"==typeof e,r=n?document.querySelector(e):e;if((t=r)instanceof HTMLElement||Boolean(t)&&0<t.nodeType)return r;var i="Container must be `string` or `HTMLElement`.";throw n&&(i+=" Unable to find ".concat(e)),new Error(i)}function Ts(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})}function Ps(e){var t=e.defaultTemplates,n=e.templates;return E({templatesConfig:e.templatesConfig},function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Ts([].concat(c(Object.keys(a)),c(Object.keys(s)))).reduce(function(e,t){var n=a[t],r=s[t],i=void 0!==r&&r!==n;return e.templates[t]=i?r:n,e.useCustomCompileOptions[t]=i,e},{templates:{},useCustomCompileOptions:{}})}(t,n))}var Es=f(function(e,t){!function(_){var x=/\S/,t=/\"/g,n=/\n/g,r=/\r/g,i=/\\/g,a=/\u2028/,s=/\u2029/;function R(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function S(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;r<i;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}_.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},_.scan=function(e,t){var n,r,i,a,s,o,c=e.length,u=0,l=null,h=null,f="",p=[],d=!1,m=0,g=0,v="{{",y="}}";function b(){0<f.length&&(p.push({tag:"_t",text:new String(f)}),f="")}function w(e,t){if(b(),e&&function(){for(var e=!0,t=g;t<p.length;t++)if(!(e=_.tags[p[t].tag]<_.tags._v||"_t"==p[t].tag&&null===p[t].text.match(x)))return!1;return e}())for(var n,r=g;r<p.length;r++)p[r].text&&((n=p[r+1])&&">"==n.tag&&(n.indent=p[r].text.toString()),p.splice(r,1));else t||p.push({tag:"\n"});d=!1,g=p.length}for(t&&(v=(t=t.split(" "))[0],y=t[1]),m=0;m<c;m++)0==u?S(v,e,m)?(--m,b(),u=1):"\n"==e.charAt(m)?w(d):f+=e.charAt(m):1==u?(m+=v.length-1,u="="==(l=(h=_.tags[e.charAt(m+1)])?e.charAt(m+1):"_v")?(r=m,i="="+y,a=(n=e).indexOf(i,r),v=(s=R(n.substring(n.indexOf("=",r)+1,a)).split(" "))[0],y=s[s.length-1],m=a+i.length-1,0):(h&&m++,2),d=m):S(y,e,m)?(p.push({tag:l,n:R(f),otag:v,ctag:y,i:"/"==l?d-v.length:m+y.length}),f="",m+=y.length-1,u=0,"{"==l&&("}}"==y?m++:"}"===(o=p[p.length-1]).n.substr(o.n.length-1)&&(o.n=o.n.substring(0,o.n.length-1)))):f+=e.charAt(m);return w(d,!0),p};var u={_t:!0,"\n":!0,$:!0,"/":!0};function l(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].o==e.n)return e.tag="#",!0}function h(e,t,n){for(var r=0,i=n.length;r<i;r++)if(n[r].c==e&&n[r].o==t)return!0}_.stringify=function(e,t,n){return"{code: function (c,p,i) { "+_.wrapMain(e.code)+" },"+function e(t){var n=[];for(var r in t.partials)n.push('"'+c(r)+'":{name:"'+c(t.partials[r].name)+'", '+e(t.partials[r])+"}");return"partials: {"+n.join(",")+"}, subs: "+function(e){var t=[];for(var n in e)t.push('"'+c(n)+'": function(c,p,t,i) {'+e[n]+"}");return"{ "+t.join(",")+" }"}(t.subs)}(e)+"}"};var o=0;function c(e){return e.replace(i,"\\\\").replace(t,'\\"').replace(n,"\\n").replace(r,"\\r").replace(a,"\\u2028").replace(s,"\\u2029")}function f(e){return~e.indexOf(".")?"d":"f"}function p(e,t){var n="<"+(t.prefix||"")+e.n+o++;return t.partials[n]={name:e.n,partials:{}},t.code+='t.b(t.rp("'+c(n)+'",c,p,"'+(e.indent||"")+'"));',n}function e(e,t){t.code+="t.b(t.t(t."+f(e.n)+'("'+c(e.n)+'",c,p,0)));'}function d(e){return"t.b("+e+");"}_.generate=function(e,t,n){o=0;var r={code:"",subs:{},partials:{}};return _.walk(e,r),n.asString?this.stringify(r,t,n):this.makeTemplate(r,t,n)},_.wrapMain=function(e){return'var t=this;t.b(i=i||"");'+e+"return t.fl();"},_.template=_.Template,_.makeTemplate=function(e,t,n){var r=this.makePartials(e);return r.code=new Function("c","p","i",this.wrapMain(e.code)),new this.template(r,t,this,n)},_.makePartials=function(e){var t,n={subs:{},partials:e.partials,name:e.name};for(t in n.partials)n.partials[t]=this.makePartials(n.partials[t]);for(t in e.subs)n.subs[t]=new Function("c","p","t","i",e.subs[t]);return n},_.codegen={"#":function(e,t){t.code+="if(t.s(t."+f(e.n)+'("'+c(e.n)+'",c,p,1),c,p,0,'+e.i+","+e.end+',"'+e.otag+" "+e.ctag+'")){t.rs(c,p,function(c,p,t){',_.walk(e.nodes,t),t.code+="});c.pop();}"},"^":function(e,t){t.code+="if(!t.s(t."+f(e.n)+'("'+c(e.n)+'",c,p,1),c,p,1,0,0,"")){',_.walk(e.nodes,t),t.code+="};"},">":p,"<":function(e,t){var n={partials:{},code:"",subs:{},inPartial:!0};_.walk(e.nodes,n);var r=t.partials[p(e,t)];r.subs=n.subs,r.partials=n.partials},$:function(e,t){var n={subs:{},code:"",partials:t.partials,prefix:e.n};_.walk(e.nodes,n),t.subs[e.n]=n.code,t.inPartial||(t.code+='t.sub("'+c(e.n)+'",c,p,i);')},"\n":function(e,t){t.code+=d('"\\n"'+(e.last?"":" + i"))},_v:function(e,t){t.code+="t.b(t.v(t."+f(e.n)+'("'+c(e.n)+'",c,p,0)));'},_t:function(e,t){t.code+=d('"'+c(e.text)+'"')},"{":e,"&":e},_.walk=function(e,t){for(var n,r=0,i=e.length;r<i;r++)(n=_.codegen[e[r].tag])&&n(e[r],t);return t},_.parse=function(e,t,n){return function e(t,n,r,i){var a,s=[],o=null,c=null;for(a=r[r.length-1];0<t.length;){if(c=t.shift(),a&&"<"==a.tag&&!(c.tag in u))throw new Error("Illegal content in < super tag.");if(_.tags[c.tag]<=_.tags.$||l(c,i))r.push(c),c.nodes=e(t,c.tag,r,i);else{if("/"==c.tag){if(0===r.length)throw new Error("Closing tag without opener: /"+c.n);if(o=r.pop(),c.n!=o.n&&!h(c.n,o.n,i))throw new Error("Nesting error: "+o.n+" vs. "+c.n);return o.end=c.i,s}"\n"==c.tag&&(c.last=0==t.length||"\n"==t[0].tag)}s.push(c)}if(0<r.length)throw new Error("missing closing tag: "+r.pop().n);return s}(e,0,[],(n=n||{}).sectionTags||[])},_.cache={},_.cacheKey=function(e,t){return[e,!!t.asString,!!t.disableLambda,t.delimiters,!!t.modelGet].join("||")},_.compile=function(e,t){t=t||{};var n=_.cacheKey(e,t),r=this.cache[n];if(r){var i=r.partials;for(var a in i)delete i[a].instance;return r}return r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[n]=r}}(t)}),Fs=f(function(e,t){!function(e){function l(e,t,n){var r;return t&&"object"==typeof t&&(void 0!==t[e]?r=t[e]:n&&t.get&&"function"==typeof t.get&&(r=t.get(e))),r}e.Template=function(e,t,n,r){e=e||{},this.r=e.code||this.r,this.c=n,this.options=r||{},this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.buf=""},e.Template.prototype={r:function(e,t,n){return""},v:function(e){return e=o(e),s.test(e)?e.replace(t,"&amp;").replace(n,"&lt;").replace(r,"&gt;").replace(i,"&#39;").replace(a,"&quot;"):e},t:o,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},ep:function(e,t){var n=this.partials[e],r=t[n.name];if(n.instance&&n.base==r)return n.instance;if("string"==typeof r){if(!this.c)throw new Error("No compiler available.");r=this.c.compile(r,this.options)}if(!r)return null;if(this.partials[e].base=r,n.subs){for(key in t.stackText||(t.stackText={}),n.subs)t.stackText[key]||(t.stackText[key]=void 0!==this.activeSub&&t.stackText[this.activeSub]?t.stackText[this.activeSub]:this.text);r=function(e,t,n,r,i,a){function s(){}function o(){}var c;o.prototype=(s.prototype=e).subs;var u=new s;for(c in u.subs=new o,u.subsText={},u.buf="",r=r||{},u.stackSubs=r,u.subsText=a,t)r[c]||(r[c]=t[c]);for(c in r)u.subs[c]=r[c];for(c in i=i||{},u.stackPartials=i,n)i[c]||(i[c]=n[c]);for(c in i)u.partials[c]=i[c];return u}(r,n.subs,n.partials,this.stackSubs,this.stackPartials,t.stackText)}return this.partials[e].instance=r},rp:function(e,t,n,r){var i=this.ep(e,n);return i?i.ri(t,n,r):""},rs:function(e,t,n){var r=e[e.length-1];if(h(r))for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop();else n(e,t,this)},s:function(e,t,n,r,i,a,s){var o;return(!h(e)||0!==e.length)&&("function"==typeof e&&(e=this.ms(e,t,n,r,i,a,s)),o=!!e,!r&&o&&t&&t.push("object"==typeof e?e:t[t.length-1]),o)},d:function(e,t,n,r){var i,a=e.split("."),s=this.f(a[0],t,n,r),o=this.options.modelGet,c=null;if("."===e&&h(t[t.length-2]))s=t[t.length-1];else for(var u=1;u<a.length;u++)s=void 0!==(i=l(a[u],s,o))?(c=s,i):"";return!(r&&!s)&&(r||"function"!=typeof s||(t.push(c),s=this.mv(s,t,n),t.pop()),s)},f:function(e,t,n,r){for(var i=!1,a=!1,s=this.options.modelGet,o=t.length-1;0<=o;o--)if(void 0!==(i=l(e,t[o],s))){a=!0;break}return a?(r||"function"!=typeof i||(i=this.mv(i,t,n)),i):!r&&""},ls:function(e,t,n,r,i){var a=this.options.delimiters;return this.options.delimiters=i,this.b(this.ct(o(e.call(t,r)),t,n)),this.options.delimiters=a,!1},ct:function(e,t,n){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,n)},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ms:function(e,t,n,r,i,a,s){var o,c=t[t.length-1],u=e.call(c);return"function"==typeof u?!!r||(o=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(u,c,n,o.substring(i,a),s)):u},mv:function(e,t,n){var r=t[t.length-1],i=e.call(r);return"function"==typeof i?this.ct(o(i.call(r)),r,n):i},sub:function(e,t,n,r){var i=this.subs[e];i&&(this.activeSub=e,i(t,n,this,r),this.activeSub=!1)}};var t=/&/g,n=/</g,r=/>/g,i=/\'/g,a=/\"/g,s=/[&<>\"\']/;function o(e){return String(null==e?"":e)}var h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}(t)});Es.Template=Fs.Template,Es.template=Es.Template;var Os=Es;function Is(e,t){if(void 0===e||"function"!=typeof e)throw new Error('The render function is not valid (got type "'.concat(l(e),'").\n\n').concat(t))}function ks(e,t){return t.split(".").reduce(function(e,t){return e&&e[t]},e)}function Ns(){}function Ds(e){if("object"!==l(n=e)||null===n||"[object Object]"!==(null===(t=e)?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)))return!1;var t,n;if(null===Object.getPrototypeOf(e))return!0;for(var r=e;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}function qs(e){return e!==Object(e)}function Ls(e,t){if(e===t)return!0;if(qs(e)||qs(t)||"function"==typeof e||"function"==typeof t)return e===t;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(!(i in t))return!1;if(!Ls(e[i],t[i]))return!1}return!0}var Hs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Us=/[&<>"']/g,Ms=RegExp(Us.source);function $s(e){var t=e.name,n=e.connector;return["https://www.algolia.com/doc/api-reference/widgets/",t,"/js/",void 0!==n&&n?"#connector":""].join("")}function Qs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map(function(e){return $s(e)}).join(", ");return function(e){return[e,"See documentation: ".concat(r)].filter(Boolean).join("\n\n")}}var Bs=Ns,Ws=function(){function i(e){var t=e.router,n=e.stateMapping,r=e.instantSearchInstance;y(this,i),h(this,"instantSearchInstance",void 0),h(this,"router",void 0),h(this,"stateMapping",void 0),h(this,"isFirstRender",!0),h(this,"currentUiState",void 0),h(this,"initState",void 0),h(this,"renderURLFromState",void 0),this.router=t,this.stateMapping=n,this.instantSearchInstance=r,this.currentUiState=this.stateMapping.routeToState(this.router.read())}return n(i,[{key:"getAllSearchParameters",value:function(e){var t=e.currentSearchParameters,n=e.uiState;return this.instantSearchInstance.widgets.reduce(function(e,t){return t.getWidgetSearchParameters?t.getWidgetSearchParameters(e,{uiState:n}):e},t)}},{key:"getAllUiStates",value:function(e){var n=e.searchParameters,t=this.instantSearchInstance.widgets,r=this.instantSearchInstance.helper;return t.reduce(function(e,t){return t.getWidgetState?t.getWidgetState(e,{helper:r,searchParameters:n}):e},{})}},{key:"setupRouting",value:function(r){var i=this,a=this.instantSearchInstance.helper;this.router.onUpdate(function(e){var t=i.stateMapping.routeToState(e);if(!Ls(t,i.getAllUiStates({searchParameters:a.state}))){i.currentUiState=t;var n=i.getAllSearchParameters({currentSearchParameters:r,uiState:i.currentUiState});a.overrideStateWithoutTriggeringChangeEvent(n).search()}}),this.renderURLFromState=function(e){i.currentUiState=i.getAllUiStates({searchParameters:e});var t=i.stateMapping.stateToRoute(i.currentUiState);i.router.write(t)},a.on("change",this.renderURLFromState);var e=this.getAllUiStates({searchParameters:r});if(!Ls(this.initState,e)){this.currentUiState=e;var t=this.stateMapping.stateToRoute(this.currentUiState);this.router.write(t)}}},{key:"getConfiguration",value:function(e){var t=As.SearchParameters.make(e);return E({},this.getAllSearchParameters({uiState:this.currentUiState,currentSearchParameters:t}))}},{key:"init",value:function(e){var t=e.state;this.initState=this.getAllUiStates({searchParameters:t})}},{key:"render",value:function(e){var t=e.state;this.isFirstRender&&(this.isFirstRender=!1,this.setupRouting(t))}},{key:"dispose",value:function(e){var t=e.helper,n=e.state;this.renderURLFromState&&this.instantSearchInstance.helper.removeListener("change",this.renderURLFromState),this.router.dispose&&this.router.dispose({helper:t,state:n})}},{key:"createURL",value:function(e){var t=this.getAllUiStates({searchParameters:e}),n=this.stateMapping.stateToRoute(t);return this.router.createURL(n)}},{key:"onHistoryChange",value:function(r){var i=this,a=this.instantSearchInstance.helper;this.router.onUpdate(function(e){var t=i.stateMapping.routeToState(e);if(!Ls(t,i.getAllUiStates({searchParameters:a.state}))){i.currentUiState=t;var n=i.getAllSearchParameters({currentSearchParameters:a.state,uiState:i.currentUiState});r(E({},n))}})}}]),i}(),Vs=function(){function e(){y(this,e)}return n(e,[{key:"stateToRoute",value:function(e){return e}},{key:"routeToState",value:function(e){return e}}]),e}();function Ks(){return new Vs}function zs(e){var t=e.qsModule,n=e.routeState,r=e.location,i=r.protocol,a=r.hostname,s=r.port,o=void 0===s?"":s,c=r.pathname,u=r.hash,l=t.stringify(n),h=""===o?"":":".concat(o);return n&&0!==Object.keys(n).length?"".concat(i,"//").concat(a).concat(h).concat(c,"?").concat(l).concat(u):"".concat(i,"//").concat(a).concat(h).concat(c).concat(u)}function Js(e){var t=e.qsModule,n=e.location;return t.parse(n.search.slice(1),{arrayLimit:99})}function Gs(e){e&&(window.document.title=e)}var Xs=function(){function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.windowTitle,n=e.writeDelay,r=void 0===n?400:n,i=e.createURL,a=void 0===i?zs:i,s=e.parseURL,o=void 0===s?Js:s;y(this,c),h(this,"windowTitle",void 0),h(this,"writeDelay",void 0),h(this,"_createURL",void 0),h(this,"parseURL",void 0),h(this,"writeTimer",void 0),this.windowTitle=t,this.writeTimer=void 0,this.writeDelay=r,this._createURL=a,this.parseURL=o,Gs(this.windowTitle&&this.windowTitle(this.read()))}return n(c,[{key:"read",value:function(){return this.parseURL({qsModule:cs,location:window.location})}},{key:"write",value:function(e){var t=this,n=this.createURL(e),r=this.windowTitle&&this.windowTitle(e);this.writeTimer&&window.clearTimeout(this.writeTimer),this.writeTimer=window.setTimeout(function(){Gs(r),window.history.pushState(e,r||"",n),t.writeTimer=void 0},this.writeDelay)}},{key:"onUpdate",value:function(n){var r=this;this._onPopState=function(e){r.writeTimer&&(window.clearTimeout(r.writeTimer),r.writeTimer=void 0);var t=e.state;n(t||r.read())},window.addEventListener("popstate",this._onPopState)}},{key:"createURL",value:function(e){return this._createURL({qsModule:cs,routeState:e,location:window.location})}},{key:"dispose",value:function(){this._onPopState&&window.removeEventListener("popstate",this._onPopState),this.writeTimer&&window.clearTimeout(this.writeTimer),this.write({})}}]),c}();function Ys(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i(Xs,t)}var Zs={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},eo={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function to(n){return Ds(n)&&"string"!=typeof n.value?Object.keys(n).reduce(function(e,t){return E({},e,h({},t,to(n[t])))},{}):Array.isArray(n)?n.map(to):E({},n,{value:(e=n.value,(t=e,t&&Ms.test(t)?t.replace(Us,function(e){return Hs[e]}):t).replace(new RegExp(Zs.highlightPreTag,"g"),eo.highlightPreTag).replace(new RegExp(Zs.highlightPostTag,"g"),eo.highlightPostTag))});var e,t}function no(a){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.descendantName,n=e.modifierName,r=t?"-".concat(t):"",i=n?"--".concat(n):"";return"".concat("ais","-").concat(a).concat(r).concat(i)}}var ro=no("Highlight");function io(e){var t=e.attribute,n=e.highlightedTagName,r=void 0===n?"mark":n,i=ks(e.hit,"_highlightResult.".concat(t,".value"))||"",a=ro({descendantName:"highlighted"});return i.replace(new RegExp(eo.highlightPreTag,"g"),"<".concat(r,' class="').concat(a,'">')).replace(new RegExp(eo.highlightPostTag,"g"),"</".concat(r,">"))}var ao=no("Snippet");function so(e){var t=e.attribute,n=e.highlightedTagName,r=void 0===n?"mark":n,i=ks(e.hit,"_snippetResult.".concat(t,".value"))||"",a=ao({descendantName:"highlighted"});return i.replace(new RegExp(eo.highlightPreTag,"g"),"<".concat(r,' class="').concat(a,'">')).replace(new RegExp(eo.highlightPostTag,"g"),"</".concat(r,">"))}var oo=Qs({name:"instantsearch"}),co={stateMapping:Ks(),router:Ys()};function uo(){return"#"}var lo=function(e){function v(e){var t;y(this,v),t=w(this,b(v).call(this));var n,r=e.indexName,i=void 0===r?null:r,a=e.numberLocale,s=e.searchParameters,o=void 0===s?{}:s,c=e.routing,u=void 0===c?null:c,l=e.searchFunction,h=e.stalledSearchDelay,f=void 0===h?200:h,p=e.searchClient,d=void 0===p?null:p,m=e.insightsClient,g=void 0===m?null:m;if(null===i)throw new Error(oo("The `indexName` option is required."));if(null===d)throw new Error(oo("The `searchClient` option is required."));if(void 0!==e.urlSync)throw new Error(oo("The `urlSync` option was removed in InstantSearch.js 3. You may want to use the `routing` option."));if("function"!=typeof d.search)throw new Error("The `searchClient` must implement a `search` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/");if("function"==typeof d.addAlgoliaAgent&&d.addAlgoliaAgent("instantsearch.js (".concat("3.5.4",")")),g&&"function"!=typeof g)throw new Error("The provided `insightsClient` must be a function.");return t.client=d,t.insightsClient=g,t.helper=null,t.indexName=i,t.searchParameters=E({},o,{index:i}),t.widgets=[],t.templatesConfig={helpers:(n={numberLocale:a}.numberLocale,{formatNumber:function(e,t){return Number(t(e)).toLocaleString(n)},highlight:function(e,t){try{return t(io(E({},JSON.parse(e),{hit:this})))}catch(e){throw new Error('\nThe highlight helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}},snippet:function(e,t){try{return t(so(E({},JSON.parse(e),{hit:this})))}catch(e){throw new Error('\nThe snippet helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}}}),compileOptions:{}},t._stalledSearchDelay=f,l&&(t._searchFunction=l),!0===u?t.routing=co:Ds(u)&&(t.routing=E({},co,u)),t}return a(v,Ca),n(v,[{key:"addWidget",value:function(e){this.addWidgets([e])}},{key:"addWidgets",value:function(e){var t=this;if(!Array.isArray(e))throw new Error(oo("The `addWidgets` method expects an array of widgets. Please use `addWidget`."));var n=this.widgets.pop();e.forEach(function(e){if(void 0===e.render&&void 0===e.init)throw new Error("The widget definition expects a `render` and/or an `init` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/widgets/create-your-own-widgets/js/");t.widgets.push(e)}),n&&this.widgets.push(n),this.started&&Boolean(e.length)&&(this.searchParameters=this.widgets.reduce(ho,E({},this.helper.state)),this.helper.setState(this.searchParameters),e.forEach(function(e){e.init&&e.init({state:t.helper.state,helper:t.helper,templatesConfig:t.templatesConfig,createURL:t._createAbsoluteURL,onHistoryChange:t._onHistoryChange,instantSearchInstance:t})}),this.helper.search())}},{key:"removeWidget",value:function(e){this.removeWidgets([e])}},{key:"removeWidgets",value:function(e){var n=this;if(!Array.isArray(e))throw new Error(oo("The `removeWidgets` method expects an array of widgets. Please use `removeWidget`."));e.forEach(function(t){if(!n.widgets.includes(t)||"function"!=typeof t.dispose)throw new Error("The `dispose` method is required to remove the widget.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/widgets/create-your-own-widgets/js/#the-widget-lifecycle-and-api");n.widgets=n.widgets.filter(function(e){return e!==t});var e=t.dispose({helper:n.helper,state:n.helper.state});e&&(n.searchParameters=n.widgets.reduce(ho,E({},e)),n.helper.setState(n.searchParameters))}),setTimeout(function(){0<n.widgets.length&&n.helper.search()},0)}},{key:"refresh",value:function(){this.helper&&this.helper.clearCache().search()}},{key:"start",value:function(){var t=this;if(this.started)throw new Error(oo("The `start` method has already been called once."));if(this.routing){var e=new Ws(E({},this.routing,{instantSearchInstance:this}));this._onHistoryChange=e.onHistoryChange.bind(e),this._createURL=e.createURL.bind(e),this._createAbsoluteURL=this._createURL,this.widgets.push(e)}else this._createURL=uo,this._createAbsoluteURL=uo,this._onHistoryChange=Ns;this.searchParameters=this.widgets.reduce(ho,this.searchParameters);var n=As(this.client,this.searchParameters.index||this.indexName,this.searchParameters);this._searchFunction&&(this._mainHelperSearch=n.search.bind(n),n.search=function(){var e=As({search:function(){return new Promise(Ns)}},n.state.index,n.state);e.once("search",function(e){n.overrideStateWithoutTriggeringChangeEvent(e),t._mainHelperSearch()}),t._searchFunction(e)}),this.helper=n,this._init(n.state,this.helper),this.helper.on("result",this._render.bind(this,this.helper)),this.helper.on("error",function(e){t.emit("error",e)}),this._searchStalledTimer=null,this._isSearchStalled=!0,this.helper.search(),this.helper.on("search",function(){t._isSearchStalled||t._searchStalledTimer||(t._searchStalledTimer=setTimeout(function(){t._isSearchStalled=!0,t._render(t.helper,t.helper.lastResults,t.helper.lastResults._state)},t._stalledSearchDelay))}),this.started=!0}},{key:"dispose",value:function(){this.removeWidgets(this.widgets),this.started=!1,this.helper.removeAllListeners(),this.helper=null}},{key:"createURL",value:function(e){if(!this._createURL)throw new Error("The `start` method needs to be called before `createURL`.");return this._createURL(this.helper.state.setQueryParameters(e))}},{key:"_render",value:function(t,n,r){var i=this;this.helper.hasPendingRequests()||(clearTimeout(this._searchStalledTimer),this._searchStalledTimer=null,this._isSearchStalled=!1),this.widgets.forEach(function(e){e.render&&e.render({templatesConfig:i.templatesConfig,results:n,state:r,helper:t,createURL:i._createAbsoluteURL,instantSearchInstance:i,searchMetadata:{isSearchStalled:i._isSearchStalled}})}),this.emit("render")}},{key:"_init",value:function(t,n){var r=this;this.widgets.forEach(function(e){e.init&&e.init({state:t,helper:n,templatesConfig:r.templatesConfig,createURL:r._createAbsoluteURL,onHistoryChange:r._onHistoryChange,instantSearchInstance:r})})}}]),v}();function ho(e,t){return t.getConfiguration?function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(r){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(i).forEach(function(e){var t=r[e],n=i[e];Array.isArray(t)&&Array.isArray(n)?r[e]=Ts([].concat(c(t),c(n))):Ds(t)&&Ds(n)?r[e]=a(t,n):r[e]=n}),r},{})}(e,t.getConfiguration(e)):e}var fo=Qs({name:"hits",connector:!0});function po(p,n){return Is(p,fo()),function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=l.escapeHTML,h=void 0===e||e,t=l.transformItems,f=void 0===t?function(e){return e}:t;return{getConfiguration:function(){return h?Zs:void 0},init:function(e){var t=e.instantSearchInstance;p({hits:[],results:void 0,instantSearchInstance:t,widgetParams:l},!0)},render:function(e){var t,n=e.results,r=e.instantSearchInstance;h&&0<n.hits.length&&(n.hits=(void 0===(t=n.hits).__escaped&&((t=t.map(function(e){return e._highlightResult&&(e._highlightResult=to(e._highlightResult)),e._snippetResult&&(e._snippetResult=to(e._snippetResult)),e})).__escaped=!0),t));var i,a,s,o,c,u=n.hits.__escaped;n.hits=(s=n.hits,o=n.page,c=n.hitsPerPage,s.map(function(e,t){return E({},e,{__position:c*o+t+1})})),n.hits=(i=n.hits,(a=n.queryID)?i.map(function(e){return E({},e,{__queryID:a})}):i),n.hits=f(n.hits),n.hits.__escaped=u,p({hits:n.hits,results:n,instantSearchInstance:r,widgetParams:l},!1)},dispose:function(){n()}}}}function mo(e){var i,t=e.method,n=e.results,r=e.hits,a=e.objectIDs,s=n.index,o=(i=r,a.map(function(t){var e,n,r=(e=i,n=function(e){return e.objectID===t},Array.prototype.find?e.find(n,void 0):e.filter(n,void 0)[0]);if(void 0===r)throw new Error('Could not find objectID "'.concat(t,'" passed to `clickedObjectIDsAfterSearch` in the returned hits. This is necessary to infer the absolute position and the query ID.'));return r})),c=function(e){var t=Ts(o.map(function(e){return e.__queryID}));if(1<t.length)throw new Error("Insights currently allows a single `queryID`. The `objectIDs` provided map to multiple `queryID`s.");var n=t[0];if("string"!=typeof n)throw new Error("Could not infer `queryID`. Ensure InstantSearch is configured with `clickAnalytics: true`");return n}();switch(t){case"clickedObjectIDsAfterSearch":return{index:s,queryID:c,objectIDs:a,positions:o.map(function(e){return e.__position})};case"convertedObjectIDsAfterSearch":return{index:s,queryID:c,objectIDs:a};default:throw new Error('Unsupported method passed to insights: "'.concat(t,'".'))}}function go(n){return function(e,t){return n((u=e,function(e,t){var r,i,a,n=e.results,s=e.hits,o=e.instantSearchInstance;if(n&&s&&o&&o.insightsClient){var c=(r=o.insightsClient,i=n,a=s,function(e,t){if(!Array.isArray(t.objectIDs))throw new TypeError("Expected `objectIDs` to be an array.");var n=mo({method:e,results:i,hits:a,objectIDs:t.objectIDs});r(e,E({},n,t))});return u(E({},e,{insights:c}),t)}return u(e,t)}),t);var u}}var vo=f(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116;function g(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case o:case s:case p:return e;default:switch(e=e&&e.$$typeof){case u:case f:case c:return e;default:return t}}case m:case d:case i:return t}}}function v(e){return g(e)===h}t.typeOf=g,t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=m,t.Memo=d,t.Portal=i,t.Profiler=o,t.StrictMode=s,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===h||e===o||e===s||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===d||e.$$typeof===c||e.$$typeof===u||e.$$typeof===f)},t.isAsyncMode=function(e){return v(e)||g(e)===l},t.isConcurrentMode=v,t.isContextConsumer=function(e){return g(e)===u},t.isContextProvider=function(e){return g(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return g(e)===f},t.isFragment=function(e){return g(e)===a},t.isLazy=function(e){return g(e)===m},t.isMemo=function(e){return g(e)===d},t.isPortal=function(e){return g(e)===i},t.isProfiler=function(e){return g(e)===o},t.isStrictMode=function(e){return g(e)===s},t.isSuspense=function(e){return g(e)===p}});t(vo),vo.typeOf,vo.AsyncMode,vo.ConcurrentMode,vo.ContextConsumer,vo.ContextProvider,vo.Element,vo.ForwardRef,vo.Fragment,vo.Lazy,vo.Memo,vo.Portal,vo.Profiler,vo.StrictMode,vo.Suspense,vo.isValidElementType,vo.isAsyncMode,vo.isConcurrentMode,vo.isContextConsumer,vo.isContextProvider,vo.isElement,vo.isForwardRef,vo.isFragment,vo.isLazy,vo.isMemo,vo.isPortal,vo.isProfiler,vo.isStrictMode,vo.isSuspense;var yo=f(function(e,t){});t(yo),yo.typeOf,yo.AsyncMode,yo.ConcurrentMode,yo.ContextConsumer,yo.ContextProvider,yo.Element,yo.ForwardRef,yo.Fragment,yo.Lazy,yo.Memo,yo.Portal,yo.Profiler,yo.StrictMode,yo.Suspense,yo.isValidElementType,yo.isAsyncMode,yo.isConcurrentMode,yo.isContextConsumer,yo.isContextProvider,yo.isElement,yo.isForwardRef,yo.isFragment,yo.isLazy,yo.isMemo,yo.isPortal,yo.isProfiler,yo.isStrictMode,yo.isSuspense,f(function(e){e.exports=vo});Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function bo(){}function wo(){}!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()||Object.assign,Function.call.bind(Object.prototype.hasOwnProperty),wo.resetWarningCache=bo;var _o=f(function(e){e.exports=function(){function e(e,t,n,r,i,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:wo,resetWarningCache:bo};return n.PropTypes=n}()}),xo=function(){},Ro={},So=[],jo=[];function Ao(e,t){var n,r,i,a,s=jo;for(a=arguments.length;2<a--;)So.push(arguments[a]);for(t&&null!=t.children&&(So.length||So.push(t.children),delete t.children);So.length;)if((r=So.pop())&&void 0!==r.pop)for(a=r.length;a--;)So.push(r[a]);else"boolean"==typeof r&&(r=null),(i="function"!=typeof e)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(i=!1)),i&&n?s[s.length-1]+=r:s===jo?s=[r]:s.push(r),n=i;var o=new xo;return o.nodeName=e,o.children=s,o.attributes=null==t?void 0:t,o.key=null==t?void 0:t.key,void 0!==Ro.vnode&&Ro.vnode(o),o}function Co(e,t){for(var n in t)e[n]=t[n];return e}function To(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}var Po="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,Eo=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,Fo=[];function Oo(e){!e._dirty&&(e._dirty=!0)&&1==Fo.push(e)&&Po(Io)}function Io(){for(var e;e=Fo.pop();)e._dirty&&Xo(e)}function ko(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function No(e){var t=Co({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function Do(e){var t=e.parentNode;t&&t.removeChild(e)}function qo(e,t,n,r,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)To(n,null),To(r,e);else if("class"!==t||i)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var a in n)a in r||(e.style[a]="");for(var a in r)e.style[a]="number"==typeof r[a]&&!1===Eo.test(a)?r[a]+"px":r[a]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,Lo,s):e.removeEventListener(t,Lo,s),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!i&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var o=i&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?o?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(o?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function Lo(e){return this._listeners[e.type](Ro.event&&Ro.event(e)||e)}var Ho=[],Uo=0,Mo=!1,$o=!1;function Qo(){for(var e;e=Ho.shift();)e.componentDidMount&&e.componentDidMount()}function Bo(e,t,n,r,i,a){Uo++||(Mo=null!=i&&void 0!==i.ownerSVGElement,$o=null!=e&&!("__preactattr_"in e));var s=function j(e,t,n,r,i){var a=e,s=Mo;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||i)?e.nodeValue!=t&&(e.nodeValue=t):(a=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(a,e),Wo(e,!0))),a.__preactattr_=!0,a;var o=t.nodeName;if("function"==typeof o)return function(e,t,n,r){for(var i=e&&e._component,a=i,s=e,o=i&&e._componentConstructor===t.nodeName,c=o,u=No(t);i&&!c&&(i=i._parentComponent);)c=i.constructor===t.nodeName;return i&&c&&(!r||i._component)?(Go(i,u,3,n,r),e=i.base):(a&&!o&&(Yo(a),e=s=null),i=zo(t.nodeName,u,n),e&&!i.nextBase&&(i.nextBase=e,s=null),Go(i,u,1,n,r),e=i.base,s&&e!==s&&(s._component=null,Wo(s,!1))),e}(e,t,n,r);if(Mo="svg"===o||"foreignObject"!==o&&Mo,o=String(o),(!e||!ko(e,o))&&(c=o,u=Mo,l=u?document.createElementNS("http://www.w3.org/2000/svg",c):document.createElement(c),l.normalizedNodeName=c,a=l,e)){for(;e.firstChild;)a.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(a,e),Wo(e,!0)}var c,u,l;var h=a.firstChild,f=a.__preactattr_,p=t.children;if(null==f){f=a.__preactattr_={};for(var d=a.attributes,m=d.length;m--;)f[d[m].name]=d[m].value}return!$o&&p&&1===p.length&&"string"==typeof p[0]&&null!=h&&void 0!==h.splitText&&null==h.nextSibling?h.nodeValue!=p[0]&&(h.nodeValue=p[0]):(p&&p.length||null!=h)&&function(e,t,n,r,i){var a,s,o,c,u,l,h,f,p=e.childNodes,d=[],m={},g=0,v=0,y=p.length,b=0,w=t?t.length:0;if(0!==y)for(var _=0;_<y;_++){var x=p[_],R=x.__preactattr_;null!=(S=w&&R?x._component?x._component.__key:R.key:null)?(g++,m[S]=x):(R||(void 0!==x.splitText?!i||x.nodeValue.trim():i))&&(d[b++]=x)}if(0!==w)for(_=0;_<w;_++){var S;if(c=t[_],(u=null)!=(S=c.key))g&&void 0!==m[S]&&(u=m[S],m[S]=void 0,g--);else if(v<b)for(a=v;a<b;a++)if(void 0!==d[a]&&(l=s=d[a],f=i,"string"==typeof(h=c)||"number"==typeof h?void 0!==l.splitText:"string"==typeof h.nodeName?!l._componentConstructor&&ko(l,h.nodeName):f||l._componentConstructor===h.nodeName)){u=s,d[a]=void 0,a===b-1&&b--,a===v&&v++;break}u=j(u,c,n,r),o=p[_],u&&u!==e&&u!==o&&(null==o?e.appendChild(u):u===o.nextSibling?Do(o):e.insertBefore(u,o))}if(g)for(var _ in m)void 0!==m[_]&&Wo(m[_],!1);for(;v<=b;)void 0!==(u=d[b--])&&Wo(u,!1)}(a,p,n,r,$o||null!=f.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||qo(e,r,n[r],n[r]=void 0,Mo);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||qo(e,r,n[r],n[r]=t[r],Mo)}(a,t.attributes,f),Mo=s,a}(e,t,n,r,a);return i&&s.parentNode!==i&&i.appendChild(s),--Uo||($o=!1,a||Qo()),s}function Wo(e,t){var n=e._component;n?Yo(n):(null!=e.__preactattr_&&To(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||Do(e),Vo(e))}function Vo(e){for(e=e.lastChild;e;){var t=e.previousSibling;Wo(e,!0),e=t}}var Ko=[];function zo(e,t,n){var r,i=Ko.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),Zo.call(r,t,n)):((r=new Zo(t,n)).constructor=e,r.render=Jo);i--;)if(Ko[i].constructor===e)return r.nextBase=Ko[i].nextBase,Ko.splice(i,1),r;return r}function Jo(e,t,n){return this.constructor(e,n)}function Go(e,t,n,r,i){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===Ro.syncComponentUpdates&&e.base?Oo(e):Xo(e,1,i)),To(e.__ref,e))}function Xo(e,t,n,r){if(!e._disable){var i,a,s,o=e.props,c=e.state,u=e.context,l=e.prevProps||o,h=e.prevState||c,f=e.prevContext||u,p=e.base,d=e.nextBase,m=p||d,g=e._component,v=!1,y=f;if(e.constructor.getDerivedStateFromProps&&(c=Co(Co({},c),e.constructor.getDerivedStateFromProps(o,c)),e.state=c),p&&(e.props=l,e.state=h,e.context=f,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(o,c,u)?v=!0:e.componentWillUpdate&&e.componentWillUpdate(o,c,u),e.props=o,e.state=c,e.context=u),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!v){i=e.render(o,c,u),e.getChildContext&&(u=Co(Co({},u),e.getChildContext())),p&&e.getSnapshotBeforeUpdate&&(y=e.getSnapshotBeforeUpdate(l,h));var b,w,_=i&&i.nodeName;if("function"==typeof _){var x=No(i);(a=g)&&a.constructor===_&&x.key==a.__key?Go(a,x,1,u,!1):(b=a,e._component=a=zo(_,x,u),a.nextBase=a.nextBase||d,a._parentComponent=e,Go(a,x,0,u,!1),Xo(a,1,n,!0)),w=a.base}else s=m,(b=g)&&(s=e._component=null),!m&&1!==t||(s&&(s._component=null),w=Bo(s,i,u,n||!p,m&&m.parentNode,!0));if(m&&w!==m&&a!==g){var R=m.parentNode;R&&w!==R&&(R.replaceChild(w,m),b||(m._component=null,Wo(m,!1)))}if(b&&Yo(b),(e.base=w)&&!r){for(var S=e,j=e;j=j._parentComponent;)(S=j).base=w;w._component=S,w._componentConstructor=S.constructor}}for(!p||n?Ho.push(e):v||e.componentDidUpdate&&e.componentDidUpdate(l,h,y);e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);Uo||r||Qo()}}function Yo(e){var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?Yo(n):t&&(null!=t.__preactattr_&&To(t.__preactattr_.ref,null),Do(e.nextBase=t),Ko.push(e),Vo(t)),To(e.__ref,null)}function Zo(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function ec(e,t,n){return Bo(n,e,{},!1,t,!1)}Co(Zo.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=Co(Co({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),Oo(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),Xo(this,2)},render:function(){}});var tc="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan".split(" "),nc="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,rc="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("__preactCompatWrapper"):"__preactCompatWrapper",ic={constructor:1,render:1,shouldComponentUpdate:1,componentWillReceiveProps:1,componentWillUpdate:1,componentDidUpdate:1,componentWillMount:1,componentDidMount:1,componentWillUnmount:1,componentDidUnmount:1},ac=/^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vector|vert|word|writing|x)[A-Z]/,sc={},oc=!1;try{oc=!1}catch(e){}function cc(){return null}var uc=Ao("a",null).constructor;uc.prototype.$$typeof=nc,uc.prototype.preactCompatUpgraded=!1,uc.prototype.preactCompatNormalized=!1,Object.defineProperty(uc.prototype,"type",{get:function(){return this.nodeName},set:function(e){this.nodeName=e},configurable:!0}),Object.defineProperty(uc.prototype,"props",{get:function(){return this.attributes},set:function(e){this.attributes=e},configurable:!0});var lc=Ro.event;Ro.event=function(e){return lc&&(e=lc(e)),e.persist=Object,e.nativeEvent=e};var hc=Ro.vnode;function fc(e,t,n){var r=t&&t._preactCompatRendered&&t._preactCompatRendered.base;r&&r.parentNode!==t&&(r=null),!r&&t&&(r=t.firstElementChild);for(var i=t.childNodes.length;i--;)t.childNodes[i]!==r&&t.removeChild(t.childNodes[i]);var a=ec(e,t,r);return t&&(t._preactCompatRendered=a&&(a._component||{base:a})),"function"==typeof n&&n(),a&&a._component||a}Ro.vnode=function(e){if(!e.preactCompatUpgraded){e.preactCompatUpgraded=!0;var t=e.nodeName,n=e.attributes=null==e.attributes?{}:Cc({},e.attributes);"function"==typeof t?(!0===t[rc]||t.prototype&&"isReactComponent"in t.prototype)&&(e.children&&""===String(e.children)&&(e.children=void 0),e.children&&(n.children=e.children),e.preactCompatNormalized||Sc(e),i=(r=e).nodeName,a=r.attributes,r.attributes={},i.defaultProps&&Cc(r.attributes,i.defaultProps),a&&Cc(r.attributes,a)):(e.children&&""===String(e.children)&&(e.children=void 0),e.children&&(n.children=e.children),n.defaultValue&&(n.value||0===n.value||(n.value=n.defaultValue),delete n.defaultValue),function(e,t){var n,r,i;if(t){for(i in t)if(n=ac.test(i))break;if(n)for(i in r=e.attributes={},t)t.hasOwnProperty(i)&&(r[ac.test(i)?i.replace(/([A-Z0-9])/,"-$1").toLowerCase():i]=t[i])}}(e,n))}var r,i,a;hc&&hc(e)};var pc=function(){};function dc(e,t,n,r){var i=fc(Ao(pc,{context:e.context},t),n),a=i._component||i.base;return r&&r.call(a,i),a}function mc(e){dc(this,e.vnode,e.container)}function gc(e){var t=e._preactCompatRendered&&e._preactCompatRendered.base;return!(!t||t.parentNode!==e||(ec(Ao(cc),e,t),0))}pc.prototype.getChildContext=function(){return this.props.context},pc.prototype.render=function(e){return e.children[0]};var vc,yc=[],bc={map:function(e,t,n){return null==e?null:(e=bc.toArray(e),n&&n!==e&&(t=t.bind(n)),e.map(t))},forEach:function(e,t,n){if(null==e)return null;e=bc.toArray(e),n&&n!==e&&(t=t.bind(n)),e.forEach(t)},count:function(e){return e&&e.length||0},only:function(e){if(1!==(e=bc.toArray(e)).length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:function(e){return null==e?[]:yc.concat(e)}};function wc(e){return Rc.bind(null,e)}for(var _c={},xc=tc.length;xc--;)_c[tc[xc]]=wc(tc[xc]);function Rc(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function e(t,n){for(var r=n||0;r<t.length;r++){var i=t[r];Array.isArray(i)?e(i):i&&"object"==typeof i&&!jc(i)&&(i.props&&i.type||i.attributes&&i.nodeName||i.children)&&(t[r]=Rc(i.type||i.nodeName,i.props||i.attributes,i.children))}}(e,2),Sc(Ao.apply(void 0,e))}function Sc(e){var t,n,r,i,a,s;e.preactCompatNormalized=!0,s=(a=e).attributes||(a.attributes={}),Ac.enumerable="className"in s,s.className&&(s.class=s.className),Object.defineProperty(s,"className",Ac),!("function"!=typeof(i=e.nodeName)||i.prototype&&i.prototype.render)&&(e.nodeName=(t=e.nodeName,(r=t[rc])?!0===r?t:r:(r=Ec({displayName:(n=t).displayName||n.name,render:function(){return n(this.props,this.context)}}),Object.defineProperty(r,rc,{configurable:!0,value:!0}),r.displayName=t.displayName,r.propTypes=t.propTypes,r.defaultProps=t.defaultProps,Object.defineProperty(t,rc,{configurable:!0,value:r}),r)));var o,c,u=e.attributes.ref,l=u&&typeof u;return!vc||"string"!==l&&"number"!==l||(e.attributes.ref=(o=u,(c=vc)._refProxies[o]||(c._refProxies[o]=function(e){c&&c.refs&&null===(c.refs[o]=e)&&(delete c._refProxies[o],c=null)}))),function(e){var t=e.nodeName,n=e.attributes;if(n&&"string"==typeof t){var r={};for(var i in n)r[i.toLowerCase()]=i;if(r.ondoubleclick&&(n.ondblclick=n[r.ondoubleclick],delete n[r.ondoubleclick]),r.onchange&&("textarea"===t||"input"===t.toLowerCase()&&!/^fil|che|rad/i.test(n.type))){var a=r.oninput||"oninput";n[a]||(n[a]=Oc([n[a],n[r.onchange]]),delete n[r.onchange])}}}(e),e}function jc(e){return e&&(e instanceof uc||e.$$typeof===nc)}var Ac={configurable:!0,get:function(){return this.class},set:function(e){this.class=e}};function Cc(e,t){for(var n=arguments,r=1,i=void 0;r<arguments.length;r++)if(i=n[r])for(var a in i)i.hasOwnProperty(a)&&(e[a]=i[a]);return e}function Tc(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function Pc(){}function Ec(e){function t(e,t){!function(e){for(var t in e){var n=e[t];"function"!=typeof n||n.__bound||ic.hasOwnProperty(t)||((e[t]=n.bind(e)).__bound=!0)}}(this),qc.call(this,e,t,sc),Ic.call(this,e,t)}return(e=Cc({constructor:t},e)).mixins&&function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=Oc(t[n].concat(e[n]||yc),"getDefaultProps"===n||"getInitialState"===n||"getChildContext"===n))}(e,function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];for(var i in r)r.hasOwnProperty(i)&&"function"==typeof r[i]&&(t[i]||(t[i]=[])).push(r[i])}return t}(e.mixins)),e.statics&&Cc(t,e.statics),e.propTypes&&(t.propTypes=e.propTypes),e.defaultProps&&(t.defaultProps=e.defaultProps),e.getDefaultProps&&(t.defaultProps=e.getDefaultProps.call(t)),Pc.prototype=qc.prototype,t.prototype=Cc(new Pc,e),t.displayName=e.displayName||"Component",t}function Fc(e,t,n){if("string"==typeof t&&(t=e.constructor.prototype[t]),"function"==typeof t)return t.apply(e,n)}function Oc(a,s){return function(){for(var e,t=arguments,n=0;n<a.length;n++){var r=Fc(this,a[n],t);if(s&&null!=r)for(var i in e||(e={}),r)r.hasOwnProperty(i)&&(e[i]=r[i]);else void 0!==r&&(e=r)}return e}}function Ic(e,t){kc.call(this,e,t),this.componentWillReceiveProps=Oc([kc,this.componentWillReceiveProps||"componentWillReceiveProps"]),this.render=Oc([kc,Nc,this.render||"render",Dc])}function kc(e,t){if(e){var n=e.children;if(n&&Array.isArray(n)&&1===n.length&&("string"==typeof n[0]||"function"==typeof n[0]||n[0]instanceof uc)&&(e.children=n[0],e.children&&"object"==typeof e.children&&(e.children.length=1,e.children[0]=e.children)),oc){var r="function"==typeof this?this:this.constructor,i=this.propTypes||r.propTypes,a=this.displayName||r.name;i&&_o.checkPropTypes(i,e,"prop",a)}}}function Nc(e){vc=this}function Dc(){vc===this&&(vc=null)}function qc(e,t,n){Zo.call(this,e,t),this.state=this.getInitialState?this.getInitialState():{},this.refs={},this._refProxies={},n!==sc&&Ic.call(this,e,t)}function Lc(e,t){qc.call(this,e,t)}Cc(qc.prototype=new Zo,{constructor:qc,isReactComponent:{},replaceState:function(e,t){for(var n in this.setState(e,t),this.state)n in e||delete this.state[n]},getDOMNode:function(){return this.base},isMounted:function(){return!!this.base}}),Pc.prototype=qc.prototype,(Lc.prototype=new Pc).isPureReactComponent=!0,Lc.prototype.shouldComponentUpdate=function(e,t){return Tc(this.props,e)||Tc(this.state,t)};var Hc={version:"15.1.0",DOM:_c,PropTypes:_o,Children:bc,render:fc,hydrate:fc,createClass:Ec,createPortal:function(e,t){return Ao(mc,{vnode:e,container:t})},createFactory:wc,createElement:Rc,cloneElement:function(e,t){for(var n=[],r=arguments.length-2;0<r--;)n[r]=arguments[r+2];if(!jc(e))return e;var i=e.attributes||e.props,a=[Ao(e.nodeName||e.type,Cc({},i),e.children||i&&i.children),t];return n&&n.length?a.push(n):t&&t.children&&a.push(t.children),Sc(function(e,t){return Ao(e.nodeName,Co(Co({},e.attributes),t),2<arguments.length?[].slice.call(arguments,2):e.children)}.apply(void 0,a))},createRef:function(){return{}},isValidElement:jc,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},unmountComponentAtNode:gc,Component:qc,PureComponent:Lc,unstable_renderSubtreeIntoContainer:dc,unstable_batchedUpdates:function(e){e()},__spread:Cc},Uc=Qs({name:"search-box",connector:!0});function Mc(c,n){return Is(c,Uc()),function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},s=a.queryHook;function o(e){return function(){e.setQuery(""),e.search()}}return{_clear:function(){},_cachedClear:function(){this._clear()},init:function(e){var n,r=e.helper,t=e.instantSearchInstance;function i(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e!==r.state.query&&(n=r.state.query,r.setQuery(e)),t&&void 0!==n&&n!==e&&r.search()}this._cachedClear=this._cachedClear.bind(this),this._clear=o(r),this._refine=s?function(e){return s(e,i)}:i,c({query:r.state.query,refine:this._refine,clear:this._cachedClear,widgetParams:a,instantSearchInstance:t},!0)},render:function(e){var t=e.helper,n=e.instantSearchInstance,r=e.searchMetadata;this._clear=o(t),c({query:t.state.query,refine:this._refine,clear:this._cachedClear,widgetParams:a,instantSearchInstance:n,isSearchStalled:r.isSearchStalled},!1)},dispose:function(e){var t=e.state;return n(),t.setQuery("")},getWidgetState:function(e,t){var n=t.searchParameters.query;return""===n||e&&e.query===n?e:E({},e,{query:n})},getWidgetSearchParameters:function(e,t){var n=t.uiState;return e.setQuery(n.query||"")}}}}var $c=Qs({name:"stats",connector:!0});function Qc(i,e){return Is(i,$c()),function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{init:function(e){var t=e.helper,n=e.instantSearchInstance;i({instantSearchInstance:n,hitsPerPage:t.state.hitsPerPage,nbHits:0,nbPages:0,page:t.state.page,processingTimeMS:-1,query:t.state.query,widgetParams:r},!0)},render:function(e){var t=e.results,n=e.instantSearchInstance;i({instantSearchInstance:n,hitsPerPage:t.hitsPerPage,nbHits:t.nbHits,nbPages:t.nbPages,page:t.page,processingTimeMS:t.processingTimeMS,query:t.query,widgetParams:r},!1)},dispose:function(){e()}}}}var Bc=f(function(e){function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"==r||"number"==r)e.push(n);else if(Array.isArray(n)&&n.length){var i=s.apply(null,n);i&&e.push(i)}else if("object"==r)for(var a in n)o.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}var o;o={}.hasOwnProperty,e.exports?(s.default=s,e.exports=s):window.classNames=s}),Wc=function(e){function t(){return y(this,t),w(this,b(t).apply(this,arguments))}return a(t,qc),n(t,[{key:"shouldComponentUpdate",value:function(e){return!Ls(this.props.data,e.data)||this.props.templateKey!==e.templateKey||!Ls(this.props.rootProps,e.rootProps)}},{key:"render",value:function(){var e=this.props.rootTagName,t=this.props.useCustomCompileOptions[this.props.templateKey]?this.props.templatesConfig.compileOptions:{},n=function(e){var t=e.templates,n=e.templateKey,r=e.compileOptions,i=e.helpers,a=e.data,s=t[n],o=l(s),c="function"===o;if("string"!==o&&!c)throw new Error("Template must be 'string' or 'function', was '".concat(o,"' (key: ").concat(n,")"));if(c)return s(a);var u=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length?arguments[1]:void 0,a=2<arguments.length?arguments[2]:void 0;return Object.keys(r).reduce(function(e,n){return E({},e,h({},n,function(){var t=this;return function(e){return r[n].call(a,e,function(e){return Os.compile(e,i).render(t)})}}))},{})}(i,r,a);return Os.compile(s,r).render(E({},a,{helpers:u})).replace(/[ \n\r\t\f\xA0]+/g,function(e){return e.replace(/(^|\xA0+)[^\xA0]+/g,"$1 ")}).trim()}({templates:this.props.templates,templateKey:this.props.templateKey,compileOptions:t,helpers:this.props.templatesConfig.helpers,data:this.props.data});return null===n?null:Hc.createElement(e,u({},this.props.rootProps,{dangerouslySetInnerHTML:{__html:n}}))}}]),t}();Wc.defaultProps={data:{},rootTagName:"div",useCustomCompileOptions:{},templates:{},templatesConfig:{}};var Vc=function(e){function i(){var e,s;y(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return h(o(s=w(this,(e=b(i)).call.apply(e,[this].concat(n)))),"state",{query:s.props.searchAsYouType?"":s.props.query}),h(o(s),"onChange",function(e){var t=s.props,n=t.searchAsYouType,r=t.refine,i=t.onChange,a=e.target.value;n?r(a):s.setState({query:a}),i(e)}),h(o(s),"onSubmit",function(e){var t=s.props,n=t.searchAsYouType,r=t.refine,i=t.onSubmit;return e.preventDefault(),e.stopPropagation(),s.input.blur(),n||r(s.state.query),i(e),!1}),h(o(s),"onReset",function(e){var t=s.props,n=t.searchAsYouType,r=t.refine,i=t.onReset;s.input.focus(),r(""),n||s.setState({query:""}),i(e)}),s}return a(i,qc),n(i,[{key:"resetInput",value:function(){this.setState({query:""})}},{key:"render",value:function(){var t=this,e=this.props,n=e.cssClasses,r=e.placeholder,i=e.autofocus,a=e.showSubmit,s=e.showReset,o=e.showLoadingIndicator,c=e.templates,u=e.isSearchStalled,l=e.searchAsYouType?this.props.query:this.state.query;return Hc.createElement("div",{className:n.root},Hc.createElement("form",{action:"",role:"search",className:n.form,noValidate:!0,onSubmit:this.onSubmit,onReset:this.onReset},Hc.createElement("input",{ref:function(e){return t.input=e},value:l,disabled:this.props.disabled,className:n.input,type:"search",placeholder:r,autoFocus:i,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,maxLength:512,onChange:this.onChange}),Hc.createElement(Wc,{templateKey:"submit",rootTagName:"button",rootProps:{className:n.submit,type:"submit",title:"Submit the search query.",hidden:!a},templates:c,data:{cssClasses:n}}),Hc.createElement(Wc,{templateKey:"reset",rootTagName:"button",rootProps:{className:n.reset,type:"reset",title:"Clear the search query.",hidden:!(s&&l.trim()&&!u)},templates:c,data:{cssClasses:n}}),o&&Hc.createElement(Wc,{templateKey:"loadingIndicator",rootTagName:"span",rootProps:{className:n.loadingIndicator,hidden:!u},templates:c,data:{cssClasses:n}})))}}]),i}();function Kc(e){var t=e.results,n=e.hits,r=e.cssClasses,i=e.templateProps;return 0===t.hits.length?Hc.createElement(Wc,u({},i,{templateKey:"empty",rootProps:{className:Bc(r.root,r.emptyRoot)},data:t})):Hc.createElement("div",{className:r.root},Hc.createElement("ol",{className:r.list},n.map(function(e,t){return Hc.createElement(Wc,u({},i,{templateKey:"item",rootTagName:"li",rootProps:{className:r.item},key:e.objectID,data:E({},e,{__hitIndex:t})}))})))}h(Vc,"defaultProps",{query:"",showSubmit:!0,showReset:!0,showLoadingIndicator:!0,autofocus:!1,searchAsYouType:!0,isSearchStalled:!1,disabled:!1,onChange:Ns,onSubmit:Ns,onReset:Ns,refine:Ns}),Kc.defaultProps={results:{hits:[]},hits:[]};var zc,Jc={empty:"No results",item:function(e){return JSON.stringify(e,null,2)}},Gc=Qs({name:"hits"}),Xc=no("Hits"),Yc=(zc=Kc,function(i){return Hc.createElement("div",{onClick:function(e){if(e.target.hasAttribute("data-insights-method")){if(!i.insights)throw new Error("The `insightsClient` option has not been provided to `instantsearch`.");var t=function(e){var t=e.getAttribute("data-insights-method"),n=e.getAttribute("data-insights-payload");if("string"!=typeof n)throw new Error("The insights helper expects `data-insights-payload` to be a base64-encoded JSON string.");try{return{method:t,payload:JSON.parse(atob(n))}}catch(e){throw new Error("The insights helper was unable to parse `data-insights-payload`.")}}(e.target),n=t.method,r=t.payload;i.insights(n,r)}}},Hc.createElement(zc,i))}),Zc={reset:'\n<svg class="{{cssClasses.resetIcon}}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="10" height="10">\n  <path d="M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z"></path>\n</svg>\n  ',submit:'\n<svg class="{{cssClasses.submitIcon}}" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 40 40">\n  <path d="M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"></path>\n</svg>\n  ',loadingIndicator:'\n<svg class="{{cssClasses.loadingIcon}}" width="16" height="16" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" stroke="#444">\n  <g fill="none" fillRule="evenodd">\n    <g transform="translate(1 1)" strokeWidth="2">\n      <circle strokeOpacity=".5" cx="18" cy="18" r="18" />\n      <path d="M36 18c0-9.94-8.06-18-18-18">\n        <animateTransform\n          attributeName="transform"\n          type="rotate"\n          from="0 18 18"\n          to="360 18 18"\n          dur="1s"\n          repeatCount="indefinite"\n        />\n      </path>\n    </g>\n  </g>\n</svg>\n  '},eu=Qs({name:"search-box"}),tu=no("SearchBox");function nu(e){var t=e.nbHits,n=e.hitsPerPage,r=e.nbPages,i=e.page,a=e.processingTimeMS,s=e.query,o=e.templateProps,c=e.cssClasses;return Hc.createElement("div",{className:c.root},Hc.createElement(Wc,u({},o,{templateKey:"text",rootTagName:"span",rootProps:{className:c.text},data:{hasManyResults:1<t,hasNoResults:0===t,hasOneResult:1===t,hitsPerPage:n,nbHits:t,nbPages:r,page:i,processingTimeMS:a,query:s,cssClasses:c}})))}var ru={text:"{{#hasNoResults}}No results{{/hasNoResults}}\n    {{#hasOneResult}}1 result{{/hasOneResult}}\n    {{#hasManyResults}}{{#helpers.formatNumber}}{{nbHits}}{{/helpers.formatNumber}} results{{/hasManyResults}} found in {{processingTimeMS}}ms"},iu=Qs({name:"stats"}),au=no("Stats");function su(e){return new lo(e)}var ou=Object.freeze({history:Ys}),cu=Object.freeze({simple:Ks}),uu={connectSearchBox:Mc,connectHits:po,connectStats:Qc},lu={searchBox:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.container,n=e.placeholder,r=void 0===n?"":n,i=e.cssClasses,a=void 0===i?{}:i,s=e.autofocus,o=void 0!==s&&s,c=e.searchAsYouType,u=void 0===c||c,l=e.showReset,h=void 0===l||l,f=e.showSubmit,p=void 0===f||f,d=e.showLoadingIndicator,m=void 0===d||d,g=e.queryHook,v=e.templates;if(!t)throw new Error(eu("The `container` option is required."));var y=Cs(t);if("INPUT"===y.tagName)throw new Error("The `container` option doesn't accept `input` elements since InstantSearch.js 3.\n\nYou may want to migrate using `connectSearchBox`: ".concat($s({name:"searchbox",connector:!0}),"."));Bs("boolean"==typeof o,"The `autofocus` option only supports boolean values since InstantSearch.js 3.");var b,w,_,x,R,S,j,A,C,T,P={root:Bc(tu(),a.root),form:Bc(tu({descendantName:"form"}),a.form),input:Bc(tu({descendantName:"input"}),a.input),submit:Bc(tu({descendantName:"submit"}),a.submit),submitIcon:Bc(tu({descendantName:"submitIcon"}),a.submitIcon),reset:Bc(tu({descendantName:"reset"}),a.reset),resetIcon:Bc(tu({descendantName:"resetIcon"}),a.resetIcon),loadingIndicator:Bc(tu({descendantName:"loadingIndicator"}),a.loadingIndicator),loadingIcon:Bc(tu({descendantName:"loadingIcon"}),a.loadingIcon)};return Mc((b={containerNode:y,cssClasses:P,placeholder:r,templates:E({},Zc,v),autofocus:o,searchAsYouType:u,showReset:h,showSubmit:p,showLoadingIndicator:m},w=b.containerNode,_=b.cssClasses,x=b.placeholder,R=b.templates,S=b.autofocus,j=b.searchAsYouType,A=b.showReset,C=b.showSubmit,T=b.showLoadingIndicator,function(e){var t=e.refine,n=e.query,r=e.isSearchStalled;fc(Hc.createElement(Vc,{query:n,placeholder:x,autofocus:S,refine:t,searchAsYouType:j,templates:R,showSubmit:C,showReset:A,showLoadingIndicator:T,isSearchStalled:r,cssClasses:_}),w)}),function(){return gc(y)})({queryHook:g})},hits:function(e){var t=e.container,n=e.escapeHTML,r=e.transformItems,i=e.templates,a=void 0===i?Jc:i,s=e.cssClasses,o=void 0===s?{}:s;if(!t)throw new Error(Gc("The `container` option is required."));Bs(void 0===a.allItems,"The template `allItems` does not exist since InstantSearch.js 3.\n\nYou may want to migrate using `connectHits`: ".concat($s({name:"hits",connector:!0}),"."));var c,u,l,h,f,p=Cs(t),d={root:Bc(Xc(),o.root),emptyRoot:Bc(Xc({modifierName:"empty"}),o.emptyRoot),list:Bc(Xc({descendantName:"list"}),o.list),item:Bc(Xc({descendantName:"item"}),o.item)},m=(u=(c={containerNode:p,cssClasses:d,renderState:{},templates:a}).renderState,l=c.cssClasses,h=c.containerNode,f=c.templates,function(e,t){var n=e.hits,r=e.results,i=e.instantSearchInstance,a=e.insights;t?u.templateProps=Ps({defaultTemplates:Jc,templatesConfig:i.templatesConfig,templates:f}):fc(Hc.createElement(Yc,{cssClasses:l,hits:n,results:r,templateProps:u.templateProps,insights:a}),h)});return go(po)(m,function(){return gc(p)})({escapeHTML:n,transformItems:r})},stats:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.container,n=e.cssClasses,r=void 0===n?{}:n,i=e.templates,a=void 0===i?ru:i;if(!t)throw new Error(iu("The `container` option is required."));var s,u,l,h,f,o=Cs(t),c={root:Bc(au(),r.root),text:Bc(au({descendantName:"text"}),r.text)};return Qc((u=(s={containerNode:o,cssClasses:c,renderState:{},templates:a}).containerNode,l=s.cssClasses,h=s.renderState,f=s.templates,function(e,t){var n=e.hitsPerPage,r=e.nbHits,i=e.nbPages,a=e.page,s=e.processingTimeMS,o=e.query,c=e.instantSearchInstance;t?h.templateProps=Ps({defaultTemplates:ru,templatesConfig:c.templatesConfig,templates:f}):fc(Hc.createElement(nu,{cssClasses:l,hitsPerPage:n,nbHits:r,nbPages:i,page:a,processingTimeMS:s,query:o,templateProps:h.templateProps}),u)}),function(){return gc(o)})()}};return su.routers=ou,su.stateMappings=cu,su.connectors=uu,su.widgets=lu,su.version="3.5.4",su.highlight=io,su.snippet=so,su.insights=function(e,t){return function(e){var t,n=e.method,r=e.payload;if("object"!==l(r))throw new Error("The insights helper expects the payload to be an object.");try{t=btoa(JSON.stringify(r))}catch(e){throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(n,'" data-insights-payload="').concat(t,'"')}({method:e,payload:t})},su},"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(n=n||self).instantsearch=r(),a=this,s=function(_){var t=Object.prototype.toString,x=Array.isArray||function(e){return"[object Array]"===t.call(e)};function l(e){return"function"==typeof e}function R(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function h(e,t){return null!=e&&"object"==typeof e&&t in e}var r=RegExp.prototype.test;var i=/\S/;function S(e){return t=i,n=e,!r.call(t,n);var t,n}var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var j=/\s*/,A=/\s+/,C=/\s*=/,T=/\s*\}/,P=/#|\^|\/|>|\{|&|=|!/;function E(e){this.string=e,this.tail=e,this.pos=0}function s(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function e(){this.cache={}}E.prototype.eos=function(){return""===this.tail},E.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},E.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},s.prototype.push=function(e){return new s(e,this)},s.prototype.lookup=function(e){var t,n,r,i=this.cache;if(i.hasOwnProperty(e))t=i[e];else{for(var a,s,o,c=this,u=!1;c;){if(0<e.indexOf("."))for(a=c.view,s=e.split("."),o=0;null!=a&&o<s.length;)o===s.length-1&&(u=h(a,s[o])||(n=a,r=s[o],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(r))),a=a[s[o++]];else a=c.view[e],u=h(c.view,e);if(u){t=a;break}c=c.parent}i[e]=t}return l(t)&&(t=t.call(this.view)),t},e.prototype.clearCache=function(){this.cache={}},e.prototype.parse=function(e,t){var n=this.cache,r=e+":"+(t||_.tags).join(":"),i=n[r];return null==i&&(i=n[r]=function(e,t){if(!e)return[];var n,r,i,a=[],s=[],o=[],c=!1,u=!1;function l(){if(c&&!u)for(;o.length;)delete s[o.pop()];else o=[];u=c=!1}function h(e){if("string"==typeof e&&(e=e.split(A,2)),!x(e)||2!==e.length)throw new Error("Invalid tags: "+e);n=new RegExp(R(e[0])+"\\s*"),r=new RegExp("\\s*"+R(e[1])),i=new RegExp("\\s*"+R("}"+e[1]))}h(t||_.tags);for(var f,p,d,m,g,v,y=new E(e);!y.eos();){if(f=y.pos,d=y.scanUntil(n))for(var b=0,w=d.length;b<w;++b)S(m=d.charAt(b))?o.push(s.length):u=!0,s.push(["text",m,f,f+1]),f+=1,"\n"===m&&l();if(!y.scan(n))break;if(c=!0,p=y.scan(P)||"name",y.scan(j),"="===p?(d=y.scanUntil(C),y.scan(C),y.scanUntil(r)):"{"===p?(d=y.scanUntil(i),y.scan(T),y.scanUntil(r),p="&"):d=y.scanUntil(r),!y.scan(r))throw new Error("Unclosed tag at "+y.pos);if(g=[p,d,f,y.pos],s.push(g),"#"===p||"^"===p)a.push(g);else if("/"===p){if(!(v=a.pop()))throw new Error('Unopened section "'+d+'" at '+f);if(v[1]!==d)throw new Error('Unclosed section "'+v[1]+'" at '+f)}else"name"===p||"{"===p||"&"===p?u=!0:"="===p&&h(d)}if(v=a.pop())throw new Error('Unclosed section "'+v[1]+'" at '+y.pos);return function(e){for(var t,n=[],r=n,i=[],a=0,s=e.length;a<s;++a)switch((t=e[a])[0]){case"#":case"^":r.push(t),i.push(t),r=t[4]=[];break;case"/":i.pop()[5]=t[2],r=0<i.length?i[i.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],i=0,a=e.length;i<a;++i)(t=e[i])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(s))}(e,t)),i},e.prototype.render=function(e,t,n,r){var i=this.parse(e,r),a=t instanceof s?t:new s(t);return this.renderTokens(i,a,n,e,r)},e.prototype.renderTokens=function(e,t,n,r,i){for(var a,s,o,c="",u=0,l=e.length;u<l;++u)o=void 0,"#"===(s=(a=e[u])[0])?o=this.renderSection(a,t,n,r):"^"===s?o=this.renderInverted(a,t,n,r):">"===s?o=this.renderPartial(a,t,n,i):"&"===s?o=this.unescapedValue(a,t):"name"===s?o=this.escapedValue(a,t):"text"===s&&(o=this.rawValue(a)),void 0!==o&&(c+=o);return c},e.prototype.renderSection=function(e,t,n,r){var i=this,a="",s=t.lookup(e[1]);if(s){if(x(s))for(var o=0,c=s.length;o<c;++o)a+=this.renderTokens(e[4],t.push(s[o]),n,r);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)a+=this.renderTokens(e[4],t.push(s),n,r);else if(l(s)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(t.view,r.slice(e[3],e[5]),function(e){return i.render(e,t,n)}))&&(a+=s)}else a+=this.renderTokens(e[4],t,n,r);return a}},e.prototype.renderInverted=function(e,t,n,r){var i=t.lookup(e[1]);if(!i||x(i)&&0===i.length)return this.renderTokens(e[4],t,n,r)},e.prototype.renderPartial=function(e,t,n,r){if(n){var i=l(n)?n(e[1]):n[e[1]];return null!=i?this.renderTokens(this.parse(i,r),t,n,i):void 0}},e.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},e.prototype.escapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return _.escape(n)},e.prototype.rawValue=function(e){return e[1]},_.name="mustache.js",_.version="3.0.1",_.tags=["{{","}}"];var a=new e;return _.clearCache=function(){return a.clearCache()},_.parse=function(e,t){return a.parse(e,t)},_.render=function(e,t,n,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(x(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return a.render(e,t,n,r)},_.to_html=function(e,t,n,r){var i=_.render(e,t,n);if(!l(r))return i;r(i)},_.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return n[e]})},_.Scanner=E,_.Context=s,_.Writer=e,_},"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?s(exports):"function"==typeof define&&define.amd?define(["exports"],s):(a.Mustache={},s(a.Mustache));var O="C8KP7JV01T",I="https://citations.ouest-france.fr",k="https://infolocale.ouest-france.fr",N="ZFBAD2CIJX",D="K855I7XYAY",q=function(){var e=window.localStorage.getItem("bp-algolia-uuid");if(e)return e;var n=(new Date).getTime();return e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===e?t:3&t|8).toString(16)}),window.localStorage.setItem("bp-algolia-uuid",e),e}(),L="articles",o="query",H="tags-suggestions",U="title",M="url",Q="insee",B="isLocal",W="wp_searchable_posts",V="chats_chiens_animaux_articles",K="infolocale_events",z="citations",J="culture_tops",G="espace_defunts";window.thirdparty.push({family:"functionning",name:"algolia",fn:function(){var e,_=!(window.bp_algolia=!0),x="https://www.ouest-france.fr/recherche/#!r/query/inputedQuery",R=window.bp_algolia_articles,S=window.bp_algolia_suggestion,j=window.bp_algolia_citations,n=window.bp_algolia_videos,A=window.bp_algolia_infolocale_events,C=window.bp_algolia_culture_tops,T=window.bp_algolia_wp_searchable_posts,P=window.bp_algolia_chats_chiens_animaux_articles,E=window.bp_algolia_espace_defunts,F=window.bp_algolia_subscribed;!function(){window.jQuery=$=of.$;var w=setInterval(function(){if("undefined"!=typeof instantsearch){if(clearInterval(w),768<=document.documentElement.clientWidth){var t=!0,e=algoliasearch(O,A);e.setExtraHeader("X-Algolia-UserToken",q),searchEvents=instantsearch({searchClient:e,indexName:K,insightsClient:window.aa,searchParameters:{hitsPerPage:1,clickAnalytics:!0,analyticsTags:["suggest_desktop"]},searchFunction:function(e){t?t=!1:e.search()}});var n=algoliasearch(N,T);n.setExtraHeader("X-Algolia-UserToken",q);var r=!0;searchRecettes=instantsearch({searchClient:n,indexName:W,insightsClient:window.aa,searchParameters:{hitsPerPage:1,clickAnalytics:!0,facetFilters:["post_type_label:Recettes"],analyticsTags:["suggest_desktop"]},searchFunction:function(e){r?r=!1:e.search()}});var a=algoliasearch(N,P);a.setExtraHeader("X-Algolia-UserToken",q);var s=!0;searchAnimaux=instantsearch({searchClient:a,indexName:V,insightsClient:window.aa,searchParameters:{hitsPerPage:1,clickAnalytics:!0,analyticsTags:["suggest_desktop"]},searchFunction:function(e){s?s=!1:e.search()}});var o=algoliasearch(O,C);o.setExtraHeader("X-Algolia-UserToken",q);var c=!0;searchCulture=instantsearch({searchClient:o,indexName:J,insightsClient:window.aa,searchParameters:{hitsPerPage:1,clickAnalytics:!0,analyticsTags:["suggest_desktop"]},searchFunction:function(e){c?c=!1:e.search()}});var u=algoliasearch(O,j);u.setExtraHeader("X-Algolia-UserToken",q);var l=!0;searchCitations=instantsearch({searchClient:u,indexName:z,insightsClient:window.aa,searchParameters:{hitsPerPage:1,clickAnalytics:!0,analyticsTags:["suggest_desktop"]},searchFunction:function(e){l?l=!1:e.search()}});var h=algoliasearch(D,E);h.setExtraHeader("X-Algolia-UserToken",q);var f=!0;function p(e,t){var n=document.querySelector(e);t&&t.hits&&0<t.hits.length?(n.style.display="block",$(e).prev()[0].style.display="block"):(n.style.display="none",$(e).prev()[0].style.display="none")}function d(e){var t=e.split("&"),n=null,r=null;for(i=0;i<t.length;i++)if(split=t[i].split("="),"facetFilters"===split[0]){var a=split[1].replace("%5B%22","").replace("%22%5D","").split("%3A");n=a[0],r=a[1]}return{facetLabel:n,facetResult:r}}searchObseques=instantsearch({searchClient:h,indexName:G,insightsClient:window.aa,searchParameters:{hitsPerPage:1,clickAnalytics:!0,analyticsTags:["suggest_desktop"]},searchFunction:function(e){f?f=!1:e.search()}}),searchEvents.addWidget({render:function(e){var c=[];if(0===e.results.hits.length){var t={query:e.results.query};c.push($(Mustache.render("",t)))}else{e.results.hits.forEach(function(e,t,n){var r=b("infolocale"),i={},a=searchEvents.helper.lastResults;i.objectID=e.objectID,i.hitPosition=t+1,i.queryID=a.queryID;var s=e.url.split("/");i.urlAgenda=s.slice(0,s.length-1).join("/"),i.urlVignette=e["photo-square"],i.titre=e._highlightResult.titre.value,i.url=e.url+"?int_emplacement=of_recherche&int_medium=lien&int_campaign=infolocale&int_content=evenement&int_term="+e.objectID,i.tag="Autre"!==e.genre?e._highlightResult.genre.value:e._highlightResult.categorie.value,i.lieudate=e.dateString?e._highlightResult.commune.value+", "+e._highlightResult.dateString.value:e._highlightResult.commune.value;var o=Mustache.render(r,i);c.push($('<div class="infolocale">'+o+"</div>"))});var n=d(e.results._rawResults[0].params),r=e.results.hits[0],i=null;i=n.facetResult&&"commune"===n.facetLabel?k+"/"+r.communeSlug+"-"+r.insee:k;i+="/agenda?int_emplacement=of_recherche&int_medium=lien&int_campaign=infolocale&int_content=agenda",document.getElementById("infolocale-button").setAttribute("href",i)}$("#infolocale-hits").html(c)}}),searchRecettes.addWidget(instantsearch.widgets.hits({container:"#recette-hits",cssClasses:{item:"recette"},templates:{empty:"",item:b("recette")},transformItems:function(e){return e.map(function(e){var t=searchRecettes.helper.lastResults;return e.objectID=e.objectID,e.hitPosition=e.__position,e.queryID=t.queryID,""==e.urlVignette?e.urlVignette="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJCAYAAAA7KqwyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABhJREFUeNpi/P//PwMlgHHUgFEDgAAgwAD+lBrvy+NcxAAAAABJRU5ErkJggg==":e.urlVignette=e.images.thumbnail.url,e.titre=e._highlightResult.post_title.value,e.url=e.permalink+"?int_emplacement=of_recherche&int_medium=lien&int_campaign=odelices&int_content=recette&int_term="+e.objectID,e})}})),searchAnimaux.addWidget(instantsearch.widgets.hits({container:"#animaux-hits",cssClasses:{item:"animaux"},templates:{empty:"",item:b("animaux")},transformItems:function(e){return e.map(function(e){var t=searchAnimaux.helper.lastResults;return e.objectID=e.objectID,e.hitPosition=e.__position,e.queryID=t.queryID,e.imageUrl&&""!=e.imageUrl?e.urlVignette=e.imageUrl:e.urlVignette="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJCAYAAAA7KqwyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABhJREFUeNpi/P//PwMlgHHUgFEDgAAgwAD+lBrvy+NcxAAAAABJRU5ErkJggg==",e.titre=e._highlightResult.titre.value,"Le Mag du Chien"===e.source?e.url=e.url+"?int_emplacement=of_recherche&int_medium=lien&int_campaign=magchien&int_content=chien&int_term="+e.objectID:"Le Mag du Chat"===e.source?e.url=e.url+"?int_emplacement=of_recherche&int_medium=lien&int_campaign=magchat&int_content=chat&int_term="+e.objectID:e.url=e.url+"?int_emplacement=of_recherche&int_medium=lien&int_campaign=maganimaux&int_content=animaux&int_term="+e.objectID,e})}})),searchCulture.addWidget(instantsearch.widgets.hits({container:"#culture-hits",cssClasses:{item:"culture"},templates:{empty:"",item:b("culture")},transformItems:function(e){return e.map(function(e){var t=searchCulture.helper.lastResults;if(e.objectID=e.objectID,e.hitPosition=e.__position,e.queryID=t.queryID,""==e.urlVignette?e.urlVignette="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJCAYAAAA7KqwyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABhJREFUeNpi/P//PwMlgHHUgFEDgAAgwAD+lBrvy+NcxAAAAABJRU5ErkJggg==":e.urlVignette=e.imageUrl,e.withCategorie=!1,e.categorie&&(e.withCategorie=!0,e.tag=e.categorie),e.titre=e._highlightResult.titre.value,e.url=e.url+"?int_emplacement=of_recherche&int_medium=lien&int_campaign=culture-tops&int_content=critique&int_term="+e.objectID,e.ratingNote){var n,r="";for(n=0;n<e.ratingNote;n++)r+='<span class="star">&#9733;</span>';e.ratingNote=r}return e.ratingMot=e.ratingMot,e})}})),searchCitations.addWidget({render:function(e){var o=[];if(0===e.results.hits.length){var t={query:e.results.query};o.push($(Mustache.render("",t)))}else{e.results.hits.forEach(function(e,t,n){var r=b("citation"),i={},a=searchCitations.helper.lastResults;i.objectID=e.objectID,i.hitPosition=t+1,i.queryID=a.queryID,i.titre=e._highlightResult.quote.value,i.url=e.url+"?int_emplacement=of_recherche&int_medium=lien&int_campaign=citations&int_content=citation&int_term="+e.objectID,e.name&&(i.name="- "+e._highlightResult.name.value);var s=Mustache.render(r,i);o.push($('<div class="citation">'+s+"</div>"))});var n=d(e.results._rawResults[0].params),r=n.facetResult?I+"/theme/"+n.facetResult:I;r+="?int_emplacement=of_recherche&int_medium=lien&int_campaign=citations&int_content=citations",document.getElementById("citations-button").setAttribute("href",r)}$("#citation-hits").html(o)}}),searchObseques.addWidget({render:function(e){var c=[];if(0===e.results.hits.length){var t={query:e.results.query};c.push($(Mustache.render("",t)))}else e.results.hits.forEach(function(e,t,n){var r=b("obseque"),i={},a=searchObseques.helper.lastResults;i.objectID=e.objectID,i.hitPosition=t+1,i.queryID=a.queryID,i.titre=e.titre+" "+e.prenom+" "+e._highlightResult.nom.value+(e.nomNaissance?" ne "+e._highlightResult.nomNaissance.value:"");var s=e._highlightResult.avis[0];i.withCeremonie=!1,s.ceremonie&&(i.withCeremonie=!0,i.ceremonie=s.ceremonie.ville.value+(e.avis[0].ceremonie.codeDepartement?" ("+e.avis[0].ceremonie.codeDepartement+")":"")),i.url=e.url+"?int_emplacement=of_recherche&int_medium=lien&int_campaign=obseques&int_content=avis&int_term="+e.objectID;var o=Mustache.render(r,i);c.push($('<div class="obseque">'+o+"</div>"))});$("#obseque-hits").html(c)}}),searchObseques.start(),searchEvents.start(),searchRecettes.start(),searchAnimaux.start(),searchCulture.start(),searchCitations.start(),$(window).on("resize",function(){$(window).width()<990&&970<$(window).width()&&location.reload(),$(window).width()<1e3&&990<$(window).width()&&location.reload()}),$(document).ready(function(){$("div.scrolling-wrapper").removeClass("hidden-loading"),$("div.col-right").removeClass("hidden-loading")}),768<=document.documentElement.clientWidth&&(searchObseques.helper.on("result",function(e){p("#obseque-block",e)}),searchEvents.helper.on("result",function(e){p("#infolocale-block",e)}),searchCulture.helper.on("result",function(e){p("#culture-block",e)}),searchRecettes.helper.on("result",function(e){p("#recette-block",e)}),searchAnimaux.helper.on("result",function(e){p("#animaux-block",e)}),searchCitations.helper.on("result",function(e){p("#citation-block",e)})),document.getElementById("obseques-button").setAttribute("href","https://avis-de-deces.ouest-france.fr?int_emplacement=of_recherche&int_medium=lien&int_campaign=obseques&int_content=avis"),document.getElementById("culture-button").setAttribute("href","https://culture-tops.ouest-france.fr?int_emplacement=of_recherche&int_medium=lien&int_campaign=culture-tops&int_content=critiques"),document.getElementById("recettes-button").setAttribute("href","https://odelices.ouest-france.fr?int_emplacement=of_recherche&int_medium=lien&int_campaign=odelices&int_content=recettes"),document.getElementById("animaux-button").setAttribute("href","https://lemagdesanimaux.ouest-france.fr")}var m=algoliasearch(O,R),g=algoliasearch(O,S);m.setExtraHeader("X-Algolia-UserToken",q),g.setExtraHeader("X-Algolia-UserToken",q),search=instantsearch({indexName:L,searchClient:m,insightsClient:window.aa,routing:!1,searchParameters:{snippetEllipsisText:"",hitsPerPage:4,clickAnalytics:!0,analyticsTags:[768<=document.documentElement.clientWidth?"suggest_desktop":"suggest_mobile"]},searchFunction:function(e){var t=768<=document.documentElement.clientWidth,n=e.state.query;n&&""!=n&&(t&&(_=!0),_&&e.search(),768<=document.documentElement.clientWidth&&(null!=searchRecettes.helper&&(searchRecettes.helper.setQuery(n),searchRecettes.helper.search()),null!=searchAnimaux.helper&&(searchAnimaux.helper.setQuery(n),searchAnimaux.helper.search()),null!=searchEvents.helper&&(searchEvents.helper.setQuery(n),searchEvents.helper.setQueryParameter("aroundLatLngViaIP",!n),searchEvents.helper.search()),null!=searchCitations.helper&&(searchCitations.helper.setQuery(n),searchCitations.helper.search()),null!=searchCulture.helper&&(searchCulture.helper.setQuery(n),searchCulture.helper.search()),null!=searchObseques.helper&&(searchObseques.helper.setQuery(n),searchObseques.helper.search())))}}),search.addWidget(instantsearch.widgets.searchBox({container:"#moteur-search-box",placeholder:768<=document.documentElement.clientWidth?"Que recherchez-vous ?":"Recherche",wrapInput:!1,magnifier:!1,showReset:!0,showSubmit:!0,templates:{reset:'<div class="icon-vider"><span class="su-icon">vider</span></div>',submit:'<span class="icon-recherche"></span>'},cssClasses:{form:["form"],input:["moteur-input","consistant"]}})),768<=document.documentElement.clientWidth&&search.addWidget(instantsearch.connectors.connectSearchBox(function(e,t){if(!t){var n=document.querySelector(".bp-algolia .moteur-input"),r=g.initIndex(H),s=document.querySelector(".bp-algolia .actualite-communes"),i={hitsPerPage:8,clickAnalytics:!0,analyticsTags:["suggest_desktop"]},a=e.instantSearchInstance.helper.state.disjunctiveFacetsRefinements;a&&a.source&&(i.filters="editors:"+a.source),r.search(n.value,i,function(e,t){var n,r,i,a="";t.hits.find(function(e){return"full"==e._highlightResult[U].matchLevel})&&(a+=(n=t,r=!1,i=document.querySelector(".bp-algolia .moteur-input"),ahtml="",ahtml+="<ul>",n.hits.forEach(function(e){var t="<em>"+i.value.toLowerCase().trim()+"</em>"===e._highlightResult[U].value.toLowerCase().trim();!e[M]&&t?r=!1:(r=!0,ahtml+="<li>",e[M]?ahtml+='<a class="hit-tag" href="'+e[M]+'">':ahtml+='<a class="hit-tag" href="'+x.replace("inputedQuery",e[U])+'">',ahtml+='<span class="'+(e[M]?e[B]?"icon-localisation":"icon-hashtag":"icon-recherche")+'"></span>',ahtml+=e._highlightResult[U].value+(e[Q]&&4<e[Q].length?" ("+(""+e[Q]).substr(0,2)+")":""),e[M]?ahtml+="</a>":ahtml+="</span>",ahtml+="</li>")}),ahtml+="</ul>",ahtml+="\n",r?ahtml:"")),s.innerHTML=a})}})({})),768<=document.documentElement.clientWidth&&search.addWidget(instantsearch.widgets.stats({container:".bp-algolia .stats",escapeHTML:!0,templates:{text:'<div class="ais-root ais-stats"><div class="ais-body ais-stats--body"><input type="hidden" id="stats-query" value="{{query}}"/><div class="btn btn-n3 btn-petit button-article" id="button-show-more">{{#hasOneResult}}Voir l&#39;rponse{{/hasOneResult}}{{#hasManyResults}}Voir les <B>{{#helpers.formatNumber}}{{nbHits}}{{/helpers.formatNumber}}</B> rponses{{/hasManyResults}}<span class="hidden ais-stats--time">obtenus en {{processingTimeMS}}ms</span></div></div></div>'}})),768<=document.documentElement.clientWidth&&search.addWidget(instantsearch.widgets.hits({container:".bp-algolia .liste-resultats",hitsPerPage:5,templates:{empty:"",item:b("hit")},cssClasses:{item:"hit"},transformItems:function(e){return e.map(function(e){var t,i,n=search.helper.lastResults;return e.objectID=e.objectID,e.queryID=n.queryID,e.hitPosition=e.__position,e.titre=e._highlightResult.titre.value,e.url=-1===e.url.indexOf("http")?"https://www.ouest-france.fr"+e.url:e.url,e.payant=e.payant,e.issubscribed=F,e.bestMatchingLongAttr=(t=e._snippetResult,i=["none","partial","full"],Object.values(t).sort(function(e,t){var n=i.indexOf(e.matchLevel),r=i.indexOf(t.matchLevel);return r-n}).sort(function(e,t){return t.value.length-e.value.length})[0].value),e.source&&(e.iconTextSource=!0,"vv"==e.source?(e.textSource="Voiles et Voiliers",e.iconSource="su-cockade-vv"):"im"==e.source||("ml"==e.source?(e.textSource="Le Maine libre",e.iconSource="su-cockade-ml"):"co"==e.source?(e.textSource="Le Courrier de l'Ouest",e.iconSource="su-cockade-co"):"po"==e.source?(e.textSource="Presse Ocan",e.iconSource="su-cockade-po"):(e.textSource="Ouest-France",e.iconSource="su-cockade-of"))),e.photos&&e.photos[0]&&e.photos[0].id&&(e.image=new URL("https://media.ouest-france.fr/v1/pictures/"+e.photos[0].id),e.image.searchParams.append("width",220),e.image.searchParams.append("height",220),e.image.searchParams.append("fill",0),e.image.searchParams.append("focuspoint","50,50"),e.image.searchParams.append("cropresize",1)),e.lazyload=2<e.__position+1,e.alt=!!(e.photos&&e.photos[0]&&e.photos[0].legende)&&e.photos[0].legende,e})}})),search.start(),768<=document.documentElement.clientWidth&&(search.helper.on("result",function(e){var t=document.querySelector("#button-show-more"),n=document.querySelector("#stats-query");t.onclick=function(){window.location.href=x.replace("inputedQuery",n.value)},e&&e.hits&&0<e.hits.length||setTimeout(function(){v()},100);var r=document.querySelector(".bp-algolia .moteur-input");r.value&&""!=r.value&&0===e.hits.length&&setTimeout(function(){r.focus(),$(".ais-SearchBox-reset").css("display","block")},100)}),$(".bp-algolia .moteur-recherche form").keypress(function(e){"13"==(e.keyCode?e.keyCode:e.which)&&(window.location.href=x.replace("inputedQuery",search.helper.state.query))})),document.documentElement.clientWidth<768&&($(".bp-algolia .moteur-input").on("focus",function(){$(".icon-chevron-gauche").removeClass("hidden"),$(".pre-search-hall").addClass("is-displayed"),$(".header-algolia").addClass("is-displayed"),$(".dropdown-header").addClass("is-displayed"),$("body").addClass("no-scroll")}),$(".bp-algolia .icon-chevron-gauche").on("click",function(){setTimeout(function(){y()},150)})),$(".bp-algolia .moteur-input").on("input",function(){""!==$(this).val()?function(){768<=document.documentElement.clientWidth&&($(".dropdown-content").addClass("is-displayed"),$(".dropdown-content").parent().addClass("is-displayed"),$(".dropdown-content").css("display","block"));document.documentElement.clientWidth<768&&$(".pre-search-hall").removeClass("is-displayed");$(".icon-chevron-gauche").removeClass("hidden"),$(".header-algolia").addClass("is-displayed"),$(".dropdown-header").addClass("is-displayed"),$(".bp-algolia .moteur-recherche .ais-SearchBox-reset").css("display","block")}():y()}),document.querySelector(".bp-algolia .moteur-recherche .ais-SearchBox-reset").addEventListener("click",function(){setTimeout(function(){y()},150)})}function v(){768<=document.documentElement.clientWidth&&($(".dropdown-content").removeClass("is-displayed"),$(".dropdown-content").parent().removeClass("is-displayed"),$(".dropdown-content").css("display","none")),$(".header-algolia").removeClass("is-displayed"),$(".dropdown-header").removeClass("is-displayed"),$(".bp-algolia .moteur-recherche .ais-SearchBox-reset").css("display","none"),$(".bp-algolia .moteur-input").blur(),document.documentElement.clientWidth<768&&($("body").removeClass("no-scroll"),$(".pre-search-hall").removeClass("is-displayed"),$(".icon-chevron-gauche").addClass("hidden"),$(".algolia-autocomplete").css("display","none"))}function y(){var e=document.querySelector(".bp-algolia .moteur-input");v(),e.innerHTML="",e.value=""}function b(e){return document.querySelector("#"+e+"-template").innerHTML}},50)}(),function(){if(!(768<=document.documentElement.clientWidth))var a=setInterval(function(){if(void 0!==window.of){clearInterval(a),function(n){function r(e){if(i[e])return i[e].exports;var t=i[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var i={};r.m=n,r.c=i,r.p="",r(0)}([function(e,t,n){"use strict";e.exports=n(1)},function(e,t,n){"use strict";var r=n(2),a=n(3);r.element=a;var s=n(4);s.isArray=a.isArray,s.isFunction=a.isFunction,s.isObject=a.isPlainObject,s.bind=a.proxy,s.each=function(e,n){a.each(e,function(e,t){return n(t,e)})},s.map=a.map,s.mixin=a.extend,s.Event=a.Event;var i,o,c,u=n(5),l=n(6);i=a.fn.autocomplete,o="aaAutocomplete",c={initialize:function(r,i){return i=s.isArray(i)?i:[].slice.call(arguments,1),r=r||{},this.each(function(){var e,t=a(this),n=new l({el:t});e=new u({input:t,eventBus:n,dropdownMenuContainer:r.dropdownMenuContainer,hint:void 0===r.hint||!!r.hint,minLength:r.minLength,autoselect:r.autoselect,autoselectOnBlur:r.autoselectOnBlur,tabAutocomplete:r.tabAutocomplete,openOnFocus:r.openOnFocus,templates:r.templates,debug:r.debug,clearOnSelected:r.clearOnSelected,cssClasses:r.cssClasses,datasets:i,keyboardShortcuts:r.keyboardShortcuts,appendTo:r.appendTo,autoWidth:r.autoWidth}),t.data(o,e)})},open:function(){return this.each(function(){var e;(e=a(this).data(o))&&e.open()})},close:function(){return this.each(function(){var e;(e=a(this).data(o))&&e.close()})},val:function(t){return arguments.length?this.each(function(){var e;(e=a(this).data(o))&&e.setVal(t)}):(e=this.first(),(n=e.data(o))&&(r=n.getVal()),r);var e,n,r},destroy:function(){return this.each(function(){var e,t=a(this);(e=t.data(o))&&(e.destroy(),t.removeData(o))})}},a.fn.autocomplete=function(e){var t;return c[e]&&"initialize"!==e?(t=this.filter(function(){return!!a(this).data(o)}),c[e].apply(t,[].slice.call(arguments,1))):c.initialize.apply(this,arguments)},a.fn.autocomplete.noConflict=function(){return a.fn.autocomplete=i,this},a.fn.autocomplete.sources=u.sources,a.fn.autocomplete.escapeHighlightedString=s.escapeHighlightedString,e.exports=a.fn.autocomplete},function(e,t){"use strict";e.exports={element:null}},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";function s(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var r,i=n(2);e.exports={isArray:null,isFunction:null,isObject:null,bind:null,each:null,map:null,mixin:null,isMsie:function(e){if(void 0===e&&(e=navigator.userAgent),/(msie|trident)/i.test(e)){var t=e.match(/(msie |rv:)(\d+(.\d+)?)/i);if(t)return t[2]}return!1},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isNumber:function(e){return"number"==typeof e},toStr:function(e){return null==e?"":e+""},cloneDeep:function(e){var n=this.mixin({},e),r=this;return this.each(n,function(e,t){e&&(r.isArray(e)?n[t]=[].concat(e):r.isObject(e)&&(n[t]=r.cloneDeep(e)))}),n},error:function(e){throw new Error(e)},every:function(n,r){var i=!0;return n?(this.each(n,function(e,t){if(!(i=r.call(null,e,t,n)))return!1}),!!i):i},any:function(n,r){var i=!1;return n&&this.each(n,function(e,t){if(r.call(null,e,t,n))return!(i=!0)}),i},getUniqueId:(r=0,function(){return r++}),templatify:function(e){if(this.isFunction(e))return e;var t=i.element(e);return"SCRIPT"===t.prop("tagName")?function(){return t.text()}:function(){return String(e)}},defer:function(e){setTimeout(e,0)},noop:function(){},formatPrefix:function(e,t){return t?"":e+"-"},className:function(e,t,n){return(n?"":".")+e+t},escapeHighlightedString:function(e,t,n){t=t||"<em>";var r=document.createElement("div");r.appendChild(document.createTextNode(t)),n=n||"</em>";var i=document.createElement("div");i.appendChild(document.createTextNode(n));var a=document.createElement("div");return a.appendChild(document.createTextNode(e)),a.innerHTML.replace(RegExp(s(r.innerHTML),"g"),t).replace(RegExp(s(i.innerHTML),"g"),n)}}},function(e,t,n){"use strict";function a(e){var n,t;if((e=e||{}).input||c.error("missing input"),this.isActivated=!1,this.debug=!!e.debug,this.autoselect=!!e.autoselect,this.autoselectOnBlur=!!e.autoselectOnBlur,this.openOnFocus=!!e.openOnFocus,this.minLength=c.isNumber(e.minLength)?e.minLength:1,this.autoWidth=void 0===e.autoWidth||!!e.autoWidth,this.clearOnSelected=!!e.clearOnSelected,this.tabAutocomplete=void 0===e.tabAutocomplete||!!e.tabAutocomplete,e.hint=!!e.hint,e.hint&&e.appendTo)throw new Error("[autocomplete.js] hint and appendTo options can't be used at the same time");this.css=e.css=c.mixin({},f,e.appendTo?f.appendTo:{}),this.cssClasses=e.cssClasses=c.mixin({},f.defaultClasses,e.cssClasses||{}),this.cssClasses.prefix=e.cssClasses.formattedPrefix=c.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),this.listboxId=e.listboxId=[this.cssClasses.root,"listbox",c.getUniqueId()].join("-");var r=function(e){var t,n,r,i;t=u.element(e.input),n=u.element(h.wrapper.replace("%ROOT%",e.cssClasses.root)).css(e.css.wrapper),e.appendTo||"block"!==t.css("display")||"table"!==t.parent().css("display")||n.css("display","table-cell");var a=h.dropdown.replace("%PREFIX%",e.cssClasses.prefix).replace("%DROPDOWN_MENU%",e.cssClasses.dropdownMenu);r=u.element(a).css(e.css.dropdown).attr({role:"listbox",id:e.listboxId}),e.templates&&e.templates.dropdownMenu&&r.html(c.templatify(e.templates.dropdownMenu)()),(i=t.clone().css(e.css.hint).css((s=t,{backgroundAttachment:s.css("background-attachment"),backgroundClip:s.css("background-clip"),backgroundColor:s.css("background-color"),backgroundImage:s.css("background-image"),backgroundOrigin:s.css("background-origin"),backgroundPosition:s.css("background-position"),backgroundRepeat:s.css("background-repeat"),backgroundSize:s.css("background-size")}))).val("").addClass(c.className(e.cssClasses.prefix,e.cssClasses.hint,!0)).removeAttr("id name placeholder required").prop("readonly",!0).attr({"aria-hidden":"true",autocomplete:"off",spellcheck:"false",tabindex:-1}),i.removeData&&i.removeData(),t.data(o,{"aria-autocomplete":t.attr("aria-autocomplete"),"aria-expanded":t.attr("aria-expanded"),"aria-owns":t.attr("aria-owns"),autocomplete:t.attr("autocomplete"),dir:t.attr("dir"),role:t.attr("role"),spellcheck:t.attr("spellcheck"),style:t.attr("style"),type:t.attr("type")}),t.addClass(c.className(e.cssClasses.prefix,e.cssClasses.input,!0)).attr({autocomplete:"off",spellcheck:!1,role:"combobox","aria-autocomplete":e.datasets&&e.datasets[0]&&e.datasets[0].displayKey?"both":"list","aria-expanded":"false","aria-label":e.ariaLabel,"aria-owns":e.listboxId}).css(e.hint?e.css.input:e.css.inputWithNoHint);var s;try{t.attr("dir")||t.attr("dir","auto")}catch(e){}return(n=e.appendTo?n.appendTo(u.element(e.appendTo).eq(0)).eq(0):t.wrap(n).parent()).prepend(e.hint?i:null).append(r),{wrapper:n,input:t,hint:i,menu:r}}(e);this.$node=r.wrapper;var i=this.$input=r.input;n=r.menu,t=r.hint,e.dropdownMenuContainer&&u.element(e.dropdownMenuContainer).css("position","relative").append(n.css("top","0")),i.on("blur.aa",function(e){var t=document.activeElement;c.isMsie()&&(n[0]===t||n[0].contains(t))&&(e.preventDefault(),e.stopImmediatePropagation(),c.defer(function(){i.focus()}))}),n.on("mousedown.aa",function(e){e.preventDefault()}),this.eventBus=e.eventBus||new s({el:i}),this.dropdown=new a.Dropdown({appendTo:e.appendTo,wrapper:this.$node,menu:n,datasets:e.datasets,templates:e.templates,cssClasses:e.cssClasses,minLength:this.minLength}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onSync("shown",this._onShown,this).onSync("empty",this._onEmpty,this).onSync("redrawn",this._onRedrawn,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new a.Input({input:i,hint:t}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._bindKeyboardShortcuts(e),this._setLanguageDirection()}var o="aaAttrs",c=n(4),u=n(2),s=n(6),l=n(7),r=n(16),h=n(18),f=n(19);c.mixin(a.prototype,{_bindKeyboardShortcuts:function(e){if(e.keyboardShortcuts){var i=this.$input,a=[];c.each(e.keyboardShortcuts,function(e){"string"==typeof e&&(e=e.toUpperCase().charCodeAt(0)),a.push(e)}),u.element(document).keydown(function(e){var t=e.target||e.srcElement,n=t.tagName;if(!t.isContentEditable&&"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n){var r=e.which||e.keyCode;-1!==a.indexOf(r)&&(i.focus(),e.stopPropagation(),e.preventDefault())}})}},_onSuggestionClicked:function(e,t){var n;(n=this.dropdown.getDatumForSuggestion(t))&&this._select(n,{selectionMethod:"click"})},_onCursorMoved:function(e,t){var n=this.dropdown.getDatumForCursor(),r=this.dropdown.getCurrentCursor().attr("id");this.input.setActiveDescendant(r),n&&(t&&this.input.setInputValue(n.value,!0),this.eventBus.trigger("cursorchanged",n.raw,n.datasetName))},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint(),this.eventBus.trigger("cursorremoved")},_onDatasetRendered:function(){this._updateHint(),this.eventBus.trigger("updated")},_onOpened:function(){this._updateHint(),this.input.expand(),this.eventBus.trigger("opened")},_onEmpty:function(){this.eventBus.trigger("empty")},_onRedrawn:function(){this.$node.css("top","0px"),this.$node.css("left","0px");var e=this.$input[0].getBoundingClientRect();this.autoWidth&&this.$node.css("width",e.width+"px");var t=this.$node[0].getBoundingClientRect(),n=e.bottom-t.top;this.$node.css("top",n+"px");var r=e.left-t.left;this.$node.css("left",r+"px"),this.eventBus.trigger("redrawn")},_onShown:function(){this.eventBus.trigger("shown"),this.autoselect&&this.dropdown.cursorTopSuggestion()},_onClosed:function(){this.input.clearHint(),this.input.removeActiveDescendant(),this.input.collapse(),this.eventBus.trigger("closed")},_onFocused:function(){if(this.isActivated=!0,this.openOnFocus){var e=this.input.getQuery();e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open()}},_onBlurred:function(){var e,t;e=this.dropdown.getDatumForCursor(),t=this.dropdown.getDatumForTopSuggestion();var n={selectionMethod:"blur"};this.debug||(this.autoselectOnBlur&&e?this._select(e,n):this.autoselectOnBlur&&t?this._select(t,n):(this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()))},_onEnterKeyed:function(e,t){var n,r;n=this.dropdown.getDatumForCursor(),r=this.dropdown.getDatumForTopSuggestion();var i={selectionMethod:"enterKey"};n?(this._select(n,i),t.preventDefault()):this.autoselect&&r&&(this._select(r,i),t.preventDefault())},_onTabKeyed:function(e,t){if(this.tabAutocomplete){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n,{selectionMethod:"tabKey"}),t.preventDefault()):this._autocomplete(!0)}else this.dropdown.close()},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,t){this.input.clearHintIfInvalid(),t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var e=this.input.getLanguageDirection();this.dir!==e&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function(){var e,t,n,r,i;(e=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(t=this.input.getInputValue(),n=l.normalizeQuery(t),r=c.escapeRegExChars(n),(i=new RegExp("^(?:"+r+")(.+$)","i").exec(e.value))?this.input.setHint(t+i[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(e){var t,n,r,i;t=this.input.getHint(),n=this.input.getQuery(),r=e||this.input.isCursorAtEnd(),t&&n!==t&&r&&((i=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(i.value),this.eventBus.trigger("autocompleted",i.raw,i.datasetName))},_select:function(e,t){void 0!==e.value&&this.input.setQuery(e.value),this.clearOnSelected?this.setVal(""):this.input.setInputValue(e.value,!0),this._setLanguageDirection(),!1===this.eventBus.trigger("selected",e.raw,e.datasetName,t).isDefaultPrevented()&&(this.dropdown.close(),c.defer(c.bind(this.dropdown.empty,this.dropdown)))},open:function(){if(!this.isActivated){var e=this.input.getInputValue();e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty()}this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(e){e=c.toStr(e),this.isActivated?this.input.setInputValue(e):(this.input.setQuery(e),this.input.setInputValue(e,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){var e,t,n;this.input.destroy(),this.dropdown.destroy(),e=this.$node,t=this.cssClasses,n=e.find(c.className(t.prefix,t.input)),c.each(n.data(o),function(e,t){void 0===e?n.removeAttr(t):n.attr(t,e)}),n.detach().removeClass(c.className(t.prefix,t.input,!0)).insertAfter(e),n.removeData&&n.removeData(o),e.remove(),this.$node=null},getWrapper:function(){return this.dropdown.$container[0]}}),a.Dropdown=r,a.Input=l,a.sources=n(20),e.exports=a},function(e,t,n){"use strict";function r(e){e&&e.el||a.error("EventBus initialized without el"),this.$el=i.element(e.el)}var a=n(4),i=n(2);a.mixin(r.prototype,{trigger:function(e,t,n,r){var i=a.Event("autocomplete:"+e);return this.$el.trigger(i,[t,n,r]),i}}),e.exports=r},function(e,t,n){"use strict";function a(e){var t,n,r,i,a,s=this;(e=e||{}).input||c.error("input is missing"),t=c.bind(this._onBlur,this),n=c.bind(this._onFocus,this),r=c.bind(this._onKeydown,this),i=c.bind(this._onInput,this),this.$hint=u.element(e.hint),this.$input=u.element(e.input).on("blur.aa",t).on("focus.aa",n).on("keydown.aa",r),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=c.noop),c.isMsie()?this.$input.on("keydown.aa keypress.aa cut.aa paste.aa",function(e){o[e.which||e.keyCode]||c.defer(c.bind(s._onInput,s,e))}):this.$input.on("input.aa",i),this.query=this.$input.val(),this.$overflowHelper=(a=this.$input,u.element('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:a.css("font-family"),fontSize:a.css("font-size"),fontStyle:a.css("font-style"),fontVariant:a.css("font-variant"),fontWeight:a.css("font-weight"),wordSpacing:a.css("word-spacing"),letterSpacing:a.css("letter-spacing"),textIndent:a.css("text-indent"),textRendering:a.css("text-rendering"),textTransform:a.css("text-transform")}).insertAfter(a))}function s(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var o;o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};var c=n(4),u=n(2),r=n(8);a.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},c.mixin(a.prototype,r,{_onBlur:function(){this.resetInputValue(),this.$input.removeAttr("aria-activedescendant"),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(e){var t=o[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(e,t){var n,r,i;switch(e){case"tab":r=this.getHint(),i=this.getInputValue(),n=r&&r!==i&&!s(t);break;case"up":case"down":n=!s(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!s(t);break;default:n=!0}return n},_checkInputValue:function(){var e,t,n,r,i;e=this.getInputValue(),r=e,i=this.query,n=!(!(t=a.normalizeQuery(r)===a.normalizeQuery(i))||!this.query)&&this.query.length!==e.length,this.query=e,t?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){void 0===e&&(e=this.query),this.$input.val(e),t?this.clearHint():this._checkInputValue()},expand:function(){this.$input.attr("aria-expanded","true")},collapse:function(){this.$input.attr("aria-expanded","false")},setActiveDescendant:function(e){this.$input.attr("aria-activedescendant",e)},removeActiveDescendant:function(){this.$input.removeAttr("aria-activedescendant")},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n;n=(e=this.getInputValue())!==(t=this.getHint())&&0===t.indexOf(e),""!==e&&n&&!this.hasOverflow()||this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,t,n;return e=this.$input.val().length,t=this.$input[0].selectionStart,c.isNumber(t)?t===e:!document.selection||((n=document.selection.createRange()).moveStart("character",-e),e===n.text.length)},destroy:function(){this.$hint.off(".aa"),this.$input.off(".aa"),this.$hint=this.$input=this.$overflowHelper=null}}),e.exports=a},function(e,t,n){"use strict";function r(e,t,n,r){var i;if(!n)return this;for(t=t.split(c),n=r?function(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}(n,r):n,this._callbacks=this._callbacks||{};i=t.shift();)this._callbacks[i]=this._callbacks[i]||{sync:[],async:[]},this._callbacks[i][e].push(n);return this}function s(r,i,a){return function(){for(var e,t=0,n=r.length;!e&&t<n;t+=1)e=!1===r[t].apply(i,a);return!e}}var o=n(9),c=/\s+/;e.exports={onSync:function(e,t,n){return r.call(this,"sync",e,t,n)},onAsync:function(e,t,n){return r.call(this,"async",e,t,n)},off:function(e){var t;if(!this._callbacks)return this;for(e=e.split(c);t=e.shift();)delete this._callbacks[t];return this},trigger:function(e){var t,n,r,i,a;if(!this._callbacks)return this;for(e=e.split(c),r=[].slice.call(arguments,1);(t=e.shift())&&(n=this._callbacks[t]);)i=s(n.sync,this,[t].concat(r)),a=s(n.async,this,[t].concat(r)),i()&&o(a);return this}}},function(e,t,n){"use strict";function r(){s&&o&&(s=!1,o.length?h=o.concat(h):l=-1,h.length&&i())}function i(){if(!s){s=!(f=!1);for(var e=h.length,t=setTimeout(r);e;){for(o=h,h=[];o&&++l<e;)o[l].run();l=-1,e=h.length}o=null,s=!(l=-1),clearTimeout(t)}}function a(e,t){this.fun=e,this.array=t}for(var s,o,c,u=[n(10),n(12),n(13),n(14),n(15)],l=-1,h=[],f=!1,p=-1,d=u.length;++p<d;)if(u[p]&&u[p].test&&u[p].test()){c=u[p].install(i);break}a.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},e.exports=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new a(e,t)),f||s||(f=!0,c())}},function(e,n,t){(function(t){"use strict";n.test=function(){return void 0!==t&&!t.browser},n.install=function(e){return function(){t.nextTick(e)}}}).call(n,t(11))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function a(){d&&f&&(d=!1,f.length?p=f.concat(p):m=-1,p.length&&s())}function s(){if(!d){var e=i(a);d=!0;for(var t=p.length;t;){for(f=p,p=[];++m<t;)f&&f[m].run();m=-1,t=p.length}f=null,d=!1,function(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}(e)}}function o(e,t){this.fun=e,this.array=t}function c(){}var u,l,h=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var f,p=[],d=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new o(e,t)),1!==p.length||d||i(s)},o.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){(function(i){"use strict";var a=i.MutationObserver||i.WebKitMutationObserver;t.test=function(){return a},t.install=function(e){var t=0,n=new a(e),r=i.document.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}}).call(t,function(){return this}())},function(e,t){(function(n){"use strict";t.test=function(){return!n.setImmediate&&void 0!==n.MessageChannel},t.install=function(e){var t=new n.MessageChannel;return t.port1.onmessage=e,function(){t.port2.postMessage(0)}}}).call(t,function(){return this}())},function(e,t){(function(n){"use strict";t.test=function(){return"document"in n&&"onreadystatechange"in n.document.createElement("script")},t.install=function(t){return function(){var e=n.document.createElement("script");return e.onreadystatechange=function(){t(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},n.document.documentElement.appendChild(e),t}}}).call(t,function(){return this}())},function(e,t){"use strict";t.test=function(){return!0},t.install=function(e){return function(){setTimeout(e,0)}}},function(e,t,n){"use strict";function o(i){var e,t,n,a=this;(i=i||{}).menu||c.error("menu is required"),c.isArray(i.datasets)||c.isObject(i.datasets)||c.error("1 or more datasets required"),i.datasets||c.error("datasets is required"),this.isOpen=!1,this.isEmpty=!0,this.minLength=i.minLength||0,this.templates={},this.appendTo=i.appendTo||!1,this.css=c.mixin({},l,i.appendTo?l.appendTo:{}),this.cssClasses=i.cssClasses=c.mixin({},l.defaultClasses,i.cssClasses||{}),this.cssClasses.prefix=i.cssClasses.formattedPrefix||c.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),e=c.bind(this._onSuggestionClick,this),t=c.bind(this._onSuggestionMouseEnter,this),n=c.bind(this._onSuggestionMouseLeave,this);var r=c.className(this.cssClasses.prefix,this.cssClasses.suggestion);this.$menu=u.element(i.menu).on("mouseenter.aa",r,t).on("mouseleave.aa",r,n).on("click.aa",r,e),this.$container=i.appendTo?i.wrapper:this.$menu,i.templates&&i.templates.header&&(this.templates.header=c.templatify(i.templates.header),this.$menu.prepend(this.templates.header())),i.templates&&i.templates.empty&&(this.templates.empty=c.templatify(i.templates.empty),this.$empty=u.element('<div class="'+c.className(this.cssClasses.prefix,this.cssClasses.empty,!0)+'"></div>'),this.$menu.append(this.$empty),this.$empty.hide()),this.datasets=c.map(i.datasets,function(e){return t=a.$menu,n=e,r=i.cssClasses,new o.Dataset(c.mixin({$menu:t,cssClasses:r},n));var t,n,r}),c.each(this.datasets,function(e){var t=e.getRoot();t&&0===t.parent().length&&a.$menu.append(t),e.onSync("rendered",a._onRendered,a)}),i.templates&&i.templates.footer&&(this.templates.footer=c.templatify(i.templates.footer),this.$menu.append(this.templates.footer()));var s=this;u.element(window).resize(function(){s._redraw()})}var c=n(4),u=n(2),r=n(8),i=n(17),l=n(19);c.mixin(o.prototype,r,{_onSuggestionClick:function(e){this.trigger("suggestionClicked",u.element(e.currentTarget))},_onSuggestionMouseEnter:function(e){var t=u.element(e.currentTarget);if(!t.hasClass(c.className(this.cssClasses.prefix,this.cssClasses.cursor,!0))){this._removeCursor();var n=this;setTimeout(function(){n._setCursor(t,!1)},0)}},_onSuggestionMouseLeave:function(e){e.relatedTarget&&0<u.element(e.relatedTarget).closest("."+c.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).length||(this._removeCursor(),this.trigger("cursorRemoved"))},_onRendered:function(e,t){if(this.isEmpty=c.every(this.datasets,function(e){return e.isEmpty()}),this.isEmpty)if(t.length>=this.minLength&&this.trigger("empty"),this.$empty)if(t.length<this.minLength)this._hide();else{var n=this.templates.empty({query:this.datasets[0]&&this.datasets[0].query});this.$empty.html(n),this.$empty.show(),this._show()}else c.any(this.datasets,function(e){return e.templates&&e.templates.empty})?t.length<this.minLength?this._hide():this._show():this._hide();else this.isOpen&&(this.$empty&&(this.$empty.empty(),this.$empty.hide()),t.length>=this.minLength?this._show():this._hide());this.trigger("datasetRendered")},_hide:function(){this.$container.hide()},_show:function(){this.$container.css("display","block"),this._redraw(),this.trigger("shown")},_redraw:function(){this.isOpen&&this.appendTo&&this.trigger("redrawn")},_getSuggestions:function(){return this.$menu.find(c.className(this.cssClasses.prefix,this.cssClasses.suggestion))},_getCursor:function(){return this.$menu.find(c.className(this.cssClasses.prefix,this.cssClasses.cursor)).first()},_setCursor:function(e,t){e.first().addClass(c.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).attr("aria-selected","true"),this.trigger("cursorMoved",t)},_removeCursor:function(){this._getCursor().removeClass(c.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).removeAttr("aria-selected")},_moveCursor:function(e){var t,n,r,i;if(this.isOpen){if(n=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),-1==(r=((r=t.index(n)+e)+1)%(t.length+1)-1))return void this.trigger("cursorRemoved");r<-1&&(r=t.length-1),this._setCursor(i=t.eq(r),!0),this._ensureVisible(i)}},_ensureVisible:function(e){var t,n,r,i;n=(t=e.position().top)+e.height()+parseInt(e.css("margin-top"),10)+parseInt(e.css("margin-bottom"),10),r=this.$menu.scrollTop(),i=this.$menu.height()+parseInt(this.$menu.css("padding-top"),10)+parseInt(this.$menu.css("padding-bottom"),10),t<0?this.$menu.scrollTop(r+t):i<n&&this.$menu.scrollTop(r+(n-i))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,this.isEmpty||this._show(),this.trigger("opened"))},setLanguageDirection:function(e){this.$menu.css("ltr"===e?this.css.ltr:this.css.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(e){var t=null;return e.length&&(t={raw:i.extractDatum(e),value:i.extractValue(e),datasetName:i.extractDatasetName(e)}),t},getCurrentCursor:function(){return this._getCursor().first()},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},cursorTopSuggestion:function(){this._setCursor(this._getSuggestions().first(),!1)},update:function(t){c.each(this.datasets,function(e){e.update(t)})},empty:function(){c.each(this.datasets,function(e){e.clear()}),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){this.$menu.off(".aa"),this.$menu=null,c.each(this.datasets,function(e){e.destroy()})}}),o.Dataset=i,e.exports=o},function(e,t,n){"use strict";function r(e){var t,n,r,i;(e=e||{}).templates=e.templates||{},e.source||o.error("missing source"),e.name&&(i=e.name,!/^[_a-zA-Z0-9-]+$/.test(i))&&o.error("invalid dataset name: "+e.name),this.query=null,this._isEmpty=!0,this.highlight=!!e.highlight,this.name=void 0===e.name||null===e.name?o.getUniqueId():e.name,this.source=e.source,this.displayFn=(r=(r=e.display||e.displayKey)||"value",o.isFunction(r)?r:function(e){return e[r]}),this.debounce=e.debounce,this.cache=!1!==e.cache,this.templates=(t=e.templates,n=this.displayFn,{empty:t.empty&&o.templatify(t.empty),header:t.header&&o.templatify(t.header),footer:t.footer&&o.templatify(t.footer),suggestion:t.suggestion||function(e){return"<p>"+n(e)+"</p>"}}),this.css=o.mixin({},s,e.appendTo?s.appendTo:{}),this.cssClasses=e.cssClasses=o.mixin({},s.defaultClasses,e.cssClasses||{}),this.cssClasses.prefix=e.cssClasses.formattedPrefix||o.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix);var a=o.className(this.cssClasses.prefix,this.cssClasses.dataset);this.$el=e.$menu&&0<e.$menu.find(a+"-"+this.name).length?c.element(e.$menu.find(a+"-"+this.name)[0]):c.element(u.dataset.replace("%CLASS%",this.name).replace("%PREFIX%",this.cssClasses.prefix).replace("%DATASET%",this.cssClasses.dataset)),this.$menu=e.$menu,this.clearCachedSuggestions()}var o=n(4),c=n(2),u=n(18),s=n(19),i=n(8);r.extractDatasetName=function(e){return c.element(e).data("aaDataset")},r.extractValue=function(e){return c.element(e).data("aaValue")},r.extractDatum=function(e){var t=c.element(e).data("aaDatum");return"string"==typeof t&&(t=JSON.parse(t)),t},o.mixin(r.prototype,i,{_render:function(t,a){function e(){var e=[].slice.call(arguments,0);return e=[{query:t,isEmpty:!r}].concat(e),s.templates.header.apply(this,e)}function n(){var e=[].slice.call(arguments,0);return e=[{query:t,isEmpty:!r}].concat(e),s.templates.footer.apply(this,e)}if(this.$el){var r,s=this,i=[].slice.call(arguments,2);if(this.$el.empty(),r=a&&a.length,this._isEmpty=!r,!r&&this.templates.empty)this.$el.html(function(){var e=[].slice.call(arguments,0);return e=[{query:t,isEmpty:!0}].concat(e),s.templates.empty.apply(this,e)}.apply(this,i)).prepend(s.templates.header?e.apply(this,i):null).append(s.templates.footer?n.apply(this,i):null);else if(r)this.$el.html(function(){var e,t,r=[].slice.call(arguments,0),i=this,n=u.suggestions.replace("%PREFIX%",this.cssClasses.prefix).replace("%SUGGESTIONS%",this.cssClasses.suggestions);return e=c.element(n).css(this.css.suggestions),t=o.map(a,function(e){var t,n=u.suggestion.replace("%PREFIX%",i.cssClasses.prefix).replace("%SUGGESTION%",i.cssClasses.suggestion);return(t=c.element(n).attr({role:"option",id:["option",Math.floor(1e8*Math.random())].join("-")}).append(s.templates.suggestion.apply(this,[e].concat(r)))).data("aaDataset",s.name),t.data("aaValue",s.displayFn(e)||void 0),t.data("aaDatum",JSON.stringify(e)),t.children().each(function(){c.element(this).css(i.css.suggestionChild)}),t}),e.append.apply(e,t),e}.apply(this,i)).prepend(s.templates.header?e.apply(this,i):null).append(s.templates.footer?n.apply(this,i):null);else if(a&&!Array.isArray(a))throw new TypeError("suggestions must be an array");this.$menu&&this.$menu.addClass(this.cssClasses.prefix+(r?"with":"without")+"-"+this.name).removeClass(this.cssClasses.prefix+(r?"without":"with")+"-"+this.name),this.trigger("rendered",t)}},getRoot:function(){return this.$el},update:function(n){function e(e){if(!this.canceled&&n===this.query){var t=[].slice.call(arguments,1);this.cacheSuggestions(n,e,t),this._render.apply(this,[n,e].concat(t))}}if(this.query=n,this.canceled=!1,this.shouldFetchFromCache(n))e.apply(this,[this.cachedSuggestions].concat(this.cachedRenderExtraArgs));else{var t=this,r=function(){t.canceled||t.source(n,e.bind(t))};if(this.debounce){clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(function(){t.debounceTimeout=null,r()},this.debounce)}else r()}},cacheSuggestions:function(e,t,n){this.cachedQuery=e,this.cachedSuggestions=t,this.cachedRenderExtraArgs=n},shouldFetchFromCache:function(e){return this.cache&&this.cachedQuery===e&&this.cachedSuggestions&&this.cachedSuggestions.length},clearCachedSuggestions:function(){delete this.cachedQuery,delete this.cachedSuggestions,delete this.cachedRenderExtraArgs},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered","")},isEmpty:function(){return this._isEmpty},destroy:function(){this.clearCachedSuggestions(),this.$el=null}}),e.exports=r},function(e,t){"use strict";e.exports={wrapper:'<span class="%ROOT%"></span>',dropdown:'<span class="%PREFIX%%DROPDOWN_MENU%"></span>',dataset:'<div class="%PREFIX%%DATASET%-%CLASS%"></div>',suggestions:'<span class="%PREFIX%%SUGGESTIONS%"></span>',suggestion:'<div class="%PREFIX%%SUGGESTION%"></div>'}},function(e,t,n){"use strict";var r=n(4),i={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:"0"},defaultClasses:{root:"algolia-autocomplete",prefix:"aa",noPrefix:!1,dropdownMenu:"dropdown-menu",input:"input",hint:"hint",suggestions:"suggestions",suggestion:"suggestion",cursor:"cursor",dataset:"dataset",empty:"empty"},appendTo:{wrapper:{position:"absolute",zIndex:"100",display:"none"},input:{},inputWithNoHint:{},dropdown:{display:"block"}}};r.isMsie()&&r.mixin(i.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),r.isMsie()&&r.isMsie()<=7&&r.mixin(i.input,{marginTop:"-1px"}),e.exports=i},function(e,t,n){"use strict";e.exports={hits:n(21),popularIn:n(24)}},function(e,t,n){"use strict";var i=n(4),a=n(22),s=n(23);e.exports=function(t,r){var e=s(t.as._ua);return e&&3<=e[0]&&20<e[1]&&((r=r||{}).additionalUA="autocomplete.js "+a),function(e,n){t.search(e,r,function(e,t){e?i.error(e.message):n(t.hits,t)})}}},function(e,t){e.exports="0.33.0"},function(e,t){"use strict";e.exports=function(e){var t=e.match(/Algolia for vanilla JavaScript (\d+\.)(\d+\.)(\d+)/);if(t)return[t[1],t[2],t[3]]}},function(e,t,n){"use strict";var h=n(4),f=n(22),p=n(23);e.exports=function(t,r,i,c){var e=p(t.as._ua);if(e&&3<=e[0]&&20<e[1]&&((r=r||{}).additionalUA="autocomplete.js "+f),!i.source)return h.error("Missing 'source' key");var u=h.isFunction(i.source)?i.source:function(e){return e[i.source]};if(!i.index)return h.error("Missing 'index' key");var l=i.index;return c=c||{},function(e,o){t.search(e,r,function(e,a){if(e)h.error(e.message);else{if(0<a.hits.length){var s=a.hits[0],t=h.mixin({hitsPerPage:0},i);delete t.source,delete t.index;var n=p(l.as._ua);return n&&3<=n[0]&&20<n[1]&&(r.additionalUA="autocomplete.js "+f),void l.search(u(s),t,function(e,t){if(e)h.error(e.message);else{var r=[];if(c.includeAll){var n=c.allTitle||"All departments";r.push(h.mixin({facet:{value:n,count:t.nbHits}},h.cloneDeep(s)))}h.each(t.facets,function(e,n){h.each(e,function(e,t){r.push(h.mixin({facet:{facet:n,value:t,count:e}},h.cloneDeep(s)))})});for(var i=1;i<a.hits.length;++i)r.push(a.hits[i]);o(r,a)}})}o([])}})}}}]);var e=algoliasearch(O,S),t=e.initIndex("articles_algolia_query_suggestions"),n=e.initIndex(H),r=$(".bp-algolia .moteur-input"),i=$("body");r.autocomplete({hint:!1,appendTo:".bp-algolia .moteur-autocomplete",autoWidth:!1,debug:!0},[{source:$.fn.autocomplete.sources.hits(n,{clickAnalytics:!0,analyticsTags:["suggest_mobile"]}),displayKey:U,autoWidth:!1,templates:{suggestion:function(e){return e._highlightResult[U].value+(e[Q]&&4<e[Q].length?" ("+(""+e[Q]).substr(0,2)+")":"")+'<span class="'+(e[B]?"icon-localisation":"icon-hashtag")+'"></span>'},header:!1}},{source:$.fn.autocomplete.sources.hits(t,{clickAnalytics:!0,analyticsTags:["suggest_mobile"]}),displayKey:o,templates:{suggestion:function(e){return e._highlightResult.query?e._highlightResult.query.value+'<span class="icon-recherche"></span>':""},header:!1}}]).on("autocomplete:selected",function(e,t,n){1==n?window.location=t[M]:(document.querySelector(".bp-algolia .moteur-input").value=t[o],window.location.href=x.replace("inputedQuery",t[o]))}).on("autocomplete:closed",function(e,t,n){window.scrollTo(0,0),i.removeClass("no-scroll"),r[0].value="",r.blur()}).on("autocomplete:shown",function(e,t,n){window.scrollTo(0,0),i.addClass("no-scroll"),_=!1}),document.querySelector(".bp-algolia .moteur-recherche form").addEventListener("submit",function(e){return r.blur(),r.autocomplete("close"),!1}),document.querySelector(".bp-algolia .moteur-recherche .ais-SearchBox-reset").addEventListener("click",function(){setTimeout(function(){r.autocomplete("close"),r[0].value="",search.helper.setQuery("")},150)}),$(".bp-algolia .moteur-recherche form").keypress(function(e){"13"==(e.keyCode?e.keyCode:e.which)&&(window.location.href=x.replace("inputedQuery",search.helper.state.query))})}},50)}(),e=setInterval(function(){"undefined"!=typeof aa&&(clearInterval(e),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t);return null}),document.addEventListener("click",function(e){if(e.target.closest("[data-algolia-objectid-article]")){if(aa("init",{applicationID:O,apiKey:S}),!(t=e.target.closest("[data-algolia-objectid-article]")))return;aa("click",{objectID:t.getAttribute("data-algolia-objectid-article"),position:parseInt(t.getAttribute("data-algolia-position-article")),queryID:t.getAttribute("data-algolia-queryid-article"),eventName:"click-articles",index:L})}else if(e.target.closest("[data-algolia-objectid-video]")){if(aa("init",{applicationID:O,apiKey:n}),!(t=e.target.closest("[data-algolia-objectid-video]")))return;aa("click",{objectID:t.getAttribute("data-algolia-objectid-video"),position:parseInt(t.getAttribute("data-algolia-position-video")),queryID:t.getAttribute("data-algolia-queryid-video"),eventName:"click-videos",index:"videos"})}else if(e.target.closest("[data-algolia-objectid-obseque]")){if(aa("init",{applicationID:D,apiKey:E}),!(t=e.target.closest("[data-algolia-objectid-obseque]")))return;aa("click",{objectID:t.getAttribute("data-algolia-objectid-obseque"),position:parseInt(t.getAttribute("data-algolia-position-obseque")),queryID:t.getAttribute("data-algolia-queryid-obseque"),eventName:"click-obseque-block",index:G})}else if(e.target.closest("[data-algolia-objectid-infolocale]")){if(aa("init",{applicationID:O,apiKey:A}),!(t=e.target.closest("[data-algolia-objectid-infolocale]")))return;aa("click",{objectID:t.getAttribute("data-algolia-objectid-infolocale"),position:parseInt(t.getAttribute("data-algolia-position-infolocale")),queryID:t.getAttribute("data-algolia-queryid-infolocale"),eventName:"click-infolocale-block",index:K})}else if(e.target.closest("[data-algolia-objectid-animaux]")){if(aa("init",{applicationID:N,apiKey:P}),!(t=e.target.closest("[data-algolia-objectid-animaux]")))return;aa("click",{objectID:t.getAttribute("data-algolia-objectid-animaux"),position:parseInt(t.getAttribute("data-algolia-position-animaux")),queryID:t.getAttribute("data-algolia-queryid-animaux"),eventName:"click-animaux-block",index:V})}else if(e.target.closest("[data-algolia-objectid-culture]")){if(aa("init",{applicationID:O,apiKey:C}),!(t=e.target.closest("[data-algolia-objectid-culture]")))return;aa("click",{objectID:t.getAttribute("data-algolia-objectid-culture"),position:parseInt(t.getAttribute("data-algolia-position-culture")),queryID:t.getAttribute("data-algolia-queryid-culture"),eventName:"click-culture-block",index:J})}else if(e.target.closest("[data-algolia-objectid-recette]")){if(aa("init",{applicationID:N,apiKey:T}),!(t=e.target.closest("[data-algolia-objectid-recette]")))return;aa("click",{objectID:t.getAttribute("data-algolia-objectid-recette"),position:parseInt(t.getAttribute("data-algolia-position-recette")),queryID:t.getAttribute("data-algolia-queryid-recette"),eventName:"click-recette-block",index:W})}else{if(!e.target.closest("[data-algolia-objectid-citation]"))return;var t;if(aa("init",{applicationID:O,apiKey:j}),!(t=e.target.closest("[data-algolia-objectid-citation]")))return;aa("click",{objectID:t.getAttribute("data-algolia-objectid-citation"),position:parseInt(t.getAttribute("data-algolia-position-citation")),queryID:t.getAttribute("data-algolia-queryid-citation"),eventName:"click-citation-block",index:z})}}))},50)}})}}();
}());